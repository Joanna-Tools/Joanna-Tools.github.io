(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"Fv+3":function(e,t,n){var i;!function(r,s,o,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=s.createElement("div"),u="function",d=Math.round,p=Math.abs,f=Date.now;function m(e,t,n){return setTimeout(w(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(v(e,n[t],n),!0)}function v(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function y(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,i,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var _=y(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===a)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),b=y(function(e,t){return _(e,t,!0)},"merge","Use `assign`.");function x(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&l(i,n)}function w(e,t){return function(){return e.apply(t,arguments)}}function E(e,t){return typeof e==u?e.apply(t&&t[0]||a,t):e}function S(e,t){return e===a?t:e}function M(e,t,n){v(I(t),function(t){e.addEventListener(t,n,!1)})}function T(e,t,n){v(I(t),function(t){e.removeEventListener(t,n,!1)})}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return e.indexOf(t)>-1}function I(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function L(e){return Array.prototype.slice.call(e,0)}function R(e,t,n){for(var i=[],r=[],s=0;s<e.length;){var o=t?e[s][t]:e[s];P(r,o)<0&&i.push(e[s]),r[s]=o,s++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function O(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),s=0;s<c.length;){if((i=(n=c[s])?n+r:t)in e)return i;s++}return a}var k=1;function D(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var N="ontouchstart"in r,F=O(r,"PointerEvent")!==a,z=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,B=1,H=4,U=8,G=1,j=2,W=4,q=8,Y=16,X=j|W,Z=q|Y,$=X|Z,K=["x","y"],J=["clientX","clientY"];function Q(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){E(e.options.enable,[e])&&n.handler(t)},this.init()}function ee(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,s=t&B&&i-r==0,o=t&(H|U)&&i-r==0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=te(t)),r>1&&!n.firstMultiple?n.firstMultiple=te(t):1===r&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,l=o?o.center:s.center,c=t.center=ne(i);t.timeStamp=f(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=oe(l,c),t.distance=se(l,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},s=e.prevInput||{};t.eventType!==B&&s.eventType!==H||(r=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=re(t.deltaX,t.deltaY);var h,u,d=ie(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,t.scale=o?(h=o.pointers,se((u=i)[0],u[1],J)/se(h[0],h[1],J)):1,t.rotation=o?function(e,t){return oe(i[1],i[0],J)+oe(e[1],e[0],J)}(o.pointers):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,s,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=U&&(l>V||o.velocity===a)){var c=t.deltaX-o.deltaX,h=t.deltaY-o.deltaY,u=ie(l,c,h);i=u.x,r=u.y,n=p(u.x)>p(u.y)?u.x:u.y,s=re(c,h),e.lastInterval=t}else n=o.velocity,i=o.velocityX,r=o.velocityY,s=o.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=s}(n,t);var m=e.element;C(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function te(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:ne(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ne(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:d(n/t),y:d(i/t)}}function ie(e,t,n){return{x:t/e||0,y:n/e||0}}function re(e,t){return e===t?G:p(e)>=p(t)?e<0?j:W:t<0?q:Y}function se(e,t,n){n||(n=K);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function oe(e,t,n){return n||(n=K),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}Q.prototype={handler:function(){},init:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(D(this.element),this.evWin,this.domHandler)}};var ae={mousedown:B,mousemove:2,mouseup:H},le="mousedown",ce="mousemove mouseup";function he(){this.evEl=le,this.evWin=ce,this.pressed=!1,Q.apply(this,arguments)}x(he,Q,{handler:function(e){var t=ae[e.type];t&B&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=H),this.pressed&&(t&H&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var ue={pointerdown:B,pointermove:2,pointerup:H,pointercancel:U,pointerout:U},de={2:"touch",3:"pen",4:"mouse",5:"kinect"},pe="pointerdown",fe="pointermove pointerup pointercancel";function me(){this.evEl=pe,this.evWin=fe,Q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(pe="MSPointerDown",fe="MSPointerMove MSPointerUp MSPointerCancel"),x(me,Q,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=ue[i],s=de[e.pointerType]||e.pointerType,o="touch"==s,a=P(t,e.pointerId,"pointerId");r&B&&(0===e.button||o)?a<0&&(t.push(e),a=t.length-1):r&(H|U)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),n&&t.splice(a,1))}});var ge={touchstart:B,touchmove:2,touchend:H,touchcancel:U},ve="touchstart",ye="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=ve,this.evWin=ye,this.started=!1,Q.apply(this,arguments)}x(_e,Q,{handler:function(e){var t=ge[e.type];if(t===B&&(this.started=!0),this.started){var n=(function(e,t){var n=L(e.touches),i=L(e.changedTouches);return t&(H|U)&&(n=R(n.concat(i),"identifier",!0)),[n,i]}).call(this,e,t);t&(H|U)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var be={touchstart:B,touchmove:2,touchend:H,touchcancel:U},xe="touchstart touchmove touchend touchcancel";function we(){this.evTarget=xe,this.targetIds={},Q.apply(this,arguments)}x(we,Q,{handler:function(e){var t=be[e.type],n=(function(e,t){var n=L(e.touches),i=this.targetIds;if(t&(2|B)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,o=L(e.changedTouches),a=[],l=this.target;if(s=n.filter(function(e){return C(e.target,l)}),t===B)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&a.push(o[r]),t&(H|U)&&delete i[o[r].identifier],r++;return a.length?[R(s.concat(a),"identifier",!0),a]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Ee=2500;function Se(){Q.apply(this,arguments);var e=w(this.handler,this);this.touch=new we(this.manager,e),this.mouse=new he(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Me(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)},Ee)}}x(Se,Q,{handler:function(e,t,n){var i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(e,t){e&B?(this.primaryTouch=t.changedPointers[0].identifier,Me.call(this,t)):e&(H|U)&&Me.call(this,t)}).call(this,t,n);else if(i&&(function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(t-r.x),o=Math.abs(n-r.y);if(s<=25&&o<=25)return!0}return!1}).call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Te=O(h.style,"touchAction"),Ce=Te!==a,Ae=function(){if(!Ce)return!1;var e={},t=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||r.CSS.supports("touch-action",n)}),e}();function Ie(e,t){this.manager=e,this.set(t)}Ie.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ce&&this.manager.element.style&&Ae[e]&&(this.manager.element.style[Te]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return v(this.manager.recognizers,function(t){E(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(A(e,"none"))return"none";var t=A(e,"pan-x"),n=A(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":A(e,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=A(i,"none")&&!Ae.none,s=A(i,"pan-y")&&!Ae["pan-y"],o=A(i,"pan-x")&&!Ae["pan-x"];if(r&&1===e.pointers.length&&e.distance<2&&e.deltaTime<250)return;if(!o||!s)return r||s&&n&X||o&&n&Z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Pe=1,Le=2,Re=4,Oe=8,ke=Oe,De=16;function Ne(e){this.options=l({},this.defaults,e||{}),this.id=k++,this.manager=null,this.options.enable=S(this.options.enable,!0),this.state=Pe,this.simultaneous={},this.requireFail=[]}function Fe(e){return e&De?"cancel":e&Oe?"end":e&Re?"move":e&Le?"start":""}function ze(e){return e==Y?"down":e==q?"up":e==j?"left":e==W?"right":""}function Ve(e,t){var n=t.manager;return n?n.get(e):e}function Be(){Ne.apply(this,arguments)}function He(){Be.apply(this,arguments),this.pX=null,this.pY=null}function Ue(){Be.apply(this,arguments)}function Ge(){Ne.apply(this,arguments),this._timer=null,this._input=null}function je(){Be.apply(this,arguments)}function We(){Be.apply(this,arguments)}function qe(){Ne.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ye(e,t){return(t=t||{}).recognizers=S(t.recognizers,Ye.defaults.preset),new Xe(e,t)}function Xe(e,t){var n;this.options=l({},Ye.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(F?me:z?we:N?Se:he))(n,ee),this.touchAction=new Ie(this,this.options.touchAction),Ze(this,!0),v(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ze(e,t){var n,i=e.element;i.style&&(v(e.options.cssProps,function(r,s){n=O(i.style,s),t?(e.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}Ne.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)?this:(e=Ve(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=Ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=Ve(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<Oe&&i(t.options.event+Fe(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=Oe&&i(t.options.event+Fe(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Pe)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!E(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(ke|De|32)&&(this.state=Pe),this.state=this.process(t),this.state&(Le|Re|Oe|De)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},x(Be,Ne,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(Le|Re),r=this.attrTest(e);return i&&(n&U||!r)?t|De:i||r?n&H?t|Oe:t&Le?t|Re:Le:32}}),x(He,Be,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var e=this.options.direction,t=[];return e&X&&t.push("pan-y"),e&Z&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,s=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&X?(r=0===s?G:s<0?j:W,n=s!=this.pX,i=Math.abs(e.deltaX)):(r=0===o?G:o<0?q:Y,n=o!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return Be.prototype.attrTest.call(this,e)&&(this.state&Le||!(this.state&Le)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ze(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),x(Ue,Be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Le)},emit:function(e){1!==e.scale&&(e.additionalEvent=this.options.event+(e.scale<1?"in":"out")),this._super.emit.call(this,e)}}),x(Ge,Ne,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(H|U)&&!r)this.reset();else if(e.eventType&B)this.reset(),this._timer=m(function(){this.state=ke,this.tryEmit()},t.time,this);else if(e.eventType&H)return ke;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ke&&(e&&e.eventType&H?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),x(je,Be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Le)}}),x(We,Be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:X|Z,pointers:1},getTouchAction:function(){return He.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(X|Z)?t=e.overallVelocity:n&X?t=e.overallVelocityX:n&Z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&e.eventType&H},emit:function(e){var t=ze(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),x(qe,Ne,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&B&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=H)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||se(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&s?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=ke,this.tryEmit()},t.interval,this),Le):ke}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ke&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ye.VERSION="2.0.7",Ye.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[je,{enable:!1}],[Ue,{enable:!1},["rotate"]],[We,{direction:X}],[He,{direction:X},["swipe"]],[qe],[qe,{event:"doubletap",taps:2},["tap"]],[Ge]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Xe.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&ke)&&(r=t.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(Le|Re|Oe)&&(r=t.curRecognizer=n),s++}},get:function(e){if(e instanceof Ne)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return v(I(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==a){var n=this.handlers;return v(I(e),function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=s.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&Ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Ye,{INPUT_START:B,INPUT_MOVE:2,INPUT_END:H,INPUT_CANCEL:U,STATE_POSSIBLE:Pe,STATE_BEGAN:Le,STATE_CHANGED:Re,STATE_ENDED:Oe,STATE_RECOGNIZED:ke,STATE_CANCELLED:De,STATE_FAILED:32,DIRECTION_NONE:G,DIRECTION_LEFT:j,DIRECTION_RIGHT:W,DIRECTION_UP:q,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Z,DIRECTION_ALL:$,Manager:Xe,Input:Q,TouchAction:Ie,TouchInput:we,MouseInput:he,PointerEventInput:me,TouchMouseInput:Se,SingleTouchInput:_e,Recognizer:Ne,AttrRecognizer:Be,Tap:qe,Pan:He,Swipe:We,Pinch:Ue,Rotate:je,Press:Ge,on:M,off:T,each:v,merge:b,extend:_,assign:l,inherit:x,bindFn:w,prefixed:O}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Ye,(i=(function(){return Ye}).call(t,n,t,e))===a||(e.exports=i)}(window,document)},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function o(e){setTimeout(()=>{throw e})}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},l=Array.isArray||(e=>e&&"number"==typeof e.length);function c(e){return null!==e&&"object"==typeof e}function h(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}h.prototype=Object.create(Error.prototype);const u=h,d=(()=>{class e{constructor(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e,t=!1;if(this.closed)return;let{_parent:n,_parents:r,_unsubscribe:s,_subscriptions:o}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let a=-1,h=r?r.length:0;for(;n;)n.remove(this),n=++a<h&&r[a]||null;if(i(s))try{s.call(this)}catch(d){t=!0,e=d instanceof u?p(d.errors):[d]}if(l(o))for(a=-1,h=o.length;++a<h;){const n=o[a];if(c(n))try{n.unsubscribe()}catch(d){t=!0,e=e||[],d instanceof u?e=e.concat(p(d.errors)):e.push(d)}}if(t)throw new u(e)}add(t){let n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;(n=new e)._subscriptions=[t]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){const e=this._subscriptions;e?e.push(n):this._subscriptions=[n]}return n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}_addParent(e){let{_parent:t,_parents:n}=this;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[f](){return this}static create(e,t,n){const i=new m(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:e,_parents:t}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this}}class g extends m{constructor(e,t,n,r){let s;super(),this._parentSubscriber=e;let o=this;i(t)?s=t:t&&(s=t.next,n=t.error,r=t.complete,t!==a&&(i((o=Object.create(t)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const v="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(){}const _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:i}=this,r=function(e,t,n){if(e){if(e instanceof m)return e;if(e[f])return e[f]()}return e||t||n?new m(e,t,n):new m(a)}(e,t,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof m?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(r){n(r),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[v](){return this}pipe(...e){return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)}:y)(this);var t}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=(t=>new e(t)),e})();function b(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function x(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}x.prototype=Object.create(Error.prototype);const w=x;class E extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class S extends m{constructor(e){super(e),this.destination=e}}const M=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new S(this)}lift(e){const t=new T(this,this);return t.operator=e,t}next(e){if(this.closed)throw new w;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].next(e)}}error(e){if(this.closed)throw new w;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let r=0;r<n;r++)i[r].error(e);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new w;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new w;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new E(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=((e,t)=>new T(e,t)),e})();class T extends M{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function C(e){return e&&"function"==typeof e.schedule}class A extends m{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const I=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()},P=e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);function L(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=L(),O=e=>t=>{const n=e[R]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t},k=e=>t=>{const n=e[v]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)},D=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function N(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const F=e=>{if(e instanceof _)return t=>e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t);if(e&&"function"==typeof e[v])return k(e);if(D(e))return I(e);if(N(e))return P(e);if(e&&"function"==typeof e[R])return O(e);{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function z(e,t,n,i,r=new A(e,n,i)){if(!r.closed)return F(t)(r)}class V extends m{notifyNext(e,t,n,i,r){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function B(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new H(e,t))}}class H{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new U(e,this.project,this.thisArg))}}class U extends m{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function G(e,t){return new _(t?n=>{const i=new d;let r=0;return i.add(t.schedule(function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()})),i}:I(e))}function j(e,t){if(!t)return e instanceof _?e:new _(F(e));if(null!=e){if(function(e){return e&&"function"==typeof e[v]}(e))return function(e,t){return new _(t?n=>{const i=new d;return i.add(t.schedule(()=>{const r=e[v]();i.add(r.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i}:k(e))}(e,t);if(N(e))return function(e,t){return new _(t?n=>{const i=new d;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i}:P(e))}(e,t);if(D(e))return G(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _(t?n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(()=>{r=e[R](),i.add(t.schedule(function(){if(n.closed)return;let e,t;try{const s=r.next();e=s.value,t=s.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}))})),i}:O(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function W(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(W((n,i)=>j(e(n,i)).pipe(B((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new q(e,n)))}class q{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new Y(e,this.project,this.concurrent))}}class Y extends V{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new A(this,void 0,void 0);this.destination.add(i),z(this,e,t,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,i,r){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function X(e){return e}function Z(e=Number.POSITIVE_INFINITY){return W(X,e)}function $(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return C(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:Z(t)(G(e,n))}function K(){return function(e){return e.lift(new J(e))}}class J{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new Q(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class Q extends m{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}const ee=class extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new ne(this.getSubject(),this))),e.closed?(this._connection=null,e=d.EMPTY):this._connection=e),e}refCount(){return K()(this)}}.prototype,te={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ee._subscribe},_isComplete:{value:ee._isComplete,writable:!0},getSubject:{value:ee.getSubject},connect:{value:ee.connect},refCount:{value:ee.refCount}};class ne extends S{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ie(){return new M}function re(){return e=>K()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,te);return i.source=t,i.subjectFactory=n,i}}(ie)(e))}const se="__parameters__";function oe(e,t,n){const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function r(...e){if(this instanceof r)return i.apply(this,e),this;const t=new r(...e);return n.annotation=t,n;function n(e,n,i){const r=e.hasOwnProperty(se)?e[se]:Object.defineProperty(e,se,{value:[]})[se];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(t),e}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r}const ae=oe("Inject",e=>({token:e})),le=oe("Optional"),ce=oe("Self"),he=oe("SkipSelf");var ue=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function de(e){for(let t in e)if(e[t]===de)return t;throw Error("Could not find renamed property on target object.")}function pe(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return e&&e.hasOwnProperty(me)?e[me]:null}const me=de({ngInjectableDef:de});function ge(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const ve=de({__forward_ref__:de});function ye(e){return e.__forward_ref__=ye,e.toString=function(){return ge(this())},e}function _e(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(ve)&&t.__forward_ref__===ye?t():e}function be(){const e="undefined"!=typeof globalThis&&globalThis,t="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof global&&global;return e||i||t||n}const xe=be();let we,Ee=void 0;function Se(e){const t=Ee;return Ee=e,t}function Me(e,t=ue.Default){return(we||function(e,t=ue.Default){if(void 0===Ee)throw new Error("inject() must be called from an injection context");return null===Ee?function(e,t,n){const i=fe(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&ue.Optional)return null;throw new Error(`Injector: NOT_FOUND [${ge(e)}]`)}(e,0,t):Ee.get(e,t&ue.Optional?null:void 0,t)})(e,t)}const Te=Me;class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=pe({providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ae="__source",Ie=new Object,Pe=new Ce("INJECTOR",-1);class Le{get(e,t=Ie){if(t===Ie){const t=new Error(`NullInjectorError: No provider for ${ge(e)}!`);throw t.name="NullInjectorError",t}return t}}const Re=(()=>{class e{static create(e,t){return Array.isArray(e)?new Ue(e,t):new Ue(e.providers,e.parent,e.name||null)}}return e.THROW_IF_NOT_FOUND=Ie,e.NULL=new Le,e.ngInjectableDef=pe({providedIn:"any",factory:()=>Me(Pe)}),e.__NG_ELEMENT_ID__=-1,e})(),Oe=function(e){return e},ke=[],De=Oe,Ne=function(){return Array.prototype.slice.call(arguments)},Fe=de({provide:String,useValue:de}),ze="ngTokenPath",Ve="ngTempTokenPath",Be=/\n/gm,He="\u0275";class Ue{constructor(e,t=Re.NULL,n=null){this.parent=t,this.source=n;const i=this._records=new Map;i.set(Re,{token:Re,fn:Oe,deps:ke,value:this,useNew:!1}),i.set(Pe,{token:Pe,fn:Oe,deps:ke,value:this,useNew:!1}),function e(t,n){if(n)if((n=_e(n))instanceof Array)for(let i=0;i<n.length;i++)e(t,n[i]);else{if("function"==typeof n)throw We("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw We("Unexpected provider",n);{let e=_e(n.provide);const i=function(e){const t=function(e){let t=ke;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let i=6,r=_e(n[e]);if(r instanceof Array)for(let e=0,t=r;e<t.length;e++){const n=t[e];n instanceof le||n==le?i|=1:n instanceof he||n==he?i&=-3:n instanceof ce||n==ce?i&=-5:r=n instanceof ae?n.token:_e(n)}t.push({token:r,options:i})}}else if(e.useExisting)t=[{token:_e(e.useExisting),options:6}];else if(!(n||Fe in e))throw We("'deps' required",e);return t}(e);let n=Oe,i=ke,r=!1,s=_e(e.provide);if(Fe in e)i=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)r=!0,n=_e(e.useClass);else{if("function"!=typeof s)throw We("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);r=!0,n=s}return{deps:t,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){let i=t.get(e);if(i){if(i.fn!==Ne)throw Ge(e)}else t.set(e,i={token:n.provide,deps:[],useNew:!1,fn:Ne,value:ke});i.deps.push({token:e=n,options:6})}const r=t.get(e);if(r&&r.fn==Ne)throw Ge(e);t.set(e,i)}}}(i,e)}get(e,t,n=ue.Default){const i=this._records.get(e);try{return function e(t,n,i,r,s,o){try{return function(t,n,i,r,s,o){let a;if(!n||o&ue.SkipSelf)o&ue.Self||(a=r.get(t,s,ue.Default));else{if((a=n.value)==De)throw Error(He+"Circular dependency");if(a===ke){n.value=De;let t=void 0,s=n.useNew,o=n.fn,l=n.deps,c=ke;if(l.length){c=[];for(let t=0;t<l.length;t++){const n=l[t],s=n.options,o=2&s?i.get(n.token):void 0;c.push(e(n.token,o,i,o||4&s?r:Re.NULL,1&s?null:Re.THROW_IF_NOT_FOUND,ue.Default))}}n.value=a=s?new o(...c):o.apply(t,c)}}return a}(t,n,i,r,s,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[Ve]=a[Ve]||[]).unshift(t),n&&n.value==De&&(n.value=ke),a}}(e,i,this._records,this.parent,t,n)}catch(r){return function(e,t,n,i){const r=e[Ve];throw t[Ae]&&r.unshift(t[Ae]),e.message=je("\n"+e.message,r,"StaticInjectorError",i),e[ze]=r,e[Ve]=null,e}(r,e,0,this.source)}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(ge(n))),`StaticInjector[${e.join(", ")}]`}}function Ge(e){return We("Cannot mix multi providers and regular providers",e)}function je(e,t,n,i=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==He?e.substr(2):e;let r=ge(t);if(t instanceof Array)r=t.map(ge).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):ge(i)))}r=`{${e.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Be,"\n  ")}`}function We(e,t){return new Error(je(e,t,"StaticInjectorError"))}const qe="ngDebugContext",Ye="ngOriginalError",Xe="ngErrorLogger",Ze=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),$e=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xe))();function Ke(e){return e[qe]}function Je(e){return e[Ye]}function Qe(e,...t){e.error(...t)}class et{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e[Xe]||Qe}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?Ke(e)?Ke(e):this._findContext(Je(e)):null}_findOriginalError(e){let t=Je(e);for(;t&&Je(t);)t=Je(t);return t}}let tt=!0,nt=!1;function it(){return nt=!0,tt}class rt{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(i){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const st=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ot=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function at(e){return(e=String(e)).match(st)||e.match(ot)?e:(it()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function lt(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ct(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const ht=lt("area,br,col,hr,img,wbr"),ut=lt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dt=lt("rp,rt"),pt=ct(dt,ut),ft=ct(ht,ct(ut,lt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ct(dt,lt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pt),mt=lt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gt=lt("srcset"),vt=ct(mt,gt,lt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yt=lt("script,style,template");class _t{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ft.hasOwnProperty(t))return this.sanitizedSomething=!0,!yt.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,s=t.toLowerCase();if(!vt.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;mt[s]&&(o=at(o)),gt[s]&&(i=o,o=(i=String(i)).split(",").map(e=>at(e.trim())).join(", ")),this.buf.push(" ",t,'="',wt(o),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ft.hasOwnProperty(t)&&!ht.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(wt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const bt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xt=/([^\#-~ |!])/g;function wt(e){return e.replace(/&/g,"&amp;").replace(bt,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(xt,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Et;function St(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}const Mt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class Tt{}const Ct=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),At=/^url\(([^)]+)\)$/,It=/([A-Z])/g;function Pt(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function Lt(e){return!!e&&"function"==typeof e.then}function Rt(e){return!!e&&"function"==typeof e.subscribe}let Ot=null;function kt(){if(!Ot){const e=xe.Symbol;if(e&&e.iterator)Ot=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ot=n)}}}return Ot}function Dt(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Nt(e,t){const n=zt(e),i=zt(t);if(n&&i)return function(e,t,n){const i=e[kt()](),r=t[kt()]();for(;;){const e=i.next(),t=r.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Nt);{const r=e&&("object"==typeof e||"function"==typeof e),s=t&&("object"==typeof t||"function"==typeof t);return!(n||!r||i||!s)||Dt(e,t)}}class Ft{constructor(e){this.wrapped=e}static wrap(e){return new Ft(e)}static unwrap(e){return Ft.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ft}}function zt(e){return!!Vt(e)&&(Array.isArray(e)||!(e instanceof Map)&&kt()in e)}function Vt(e){return null!==e&&("function"==typeof e||"object"==typeof e)}class Bt{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}const Ht=new Ce("The presence of this token marks an injector as being the root injector.");class Ut{}class Gt{}function jt(e){const t=Error(`No component factory found for ${ge(e)}. Did you add it to @NgModule.entryComponents?`);return t[Wt]=e,t}const Wt="ngComponent";class qt{resolveComponentFactory(e){throw jt(e)}}const Yt=(()=>{class e{}return e.NULL=new qt,e})();class Xt{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let i=0;i<e.length;i++){const t=e[i];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw jt(e);return new Zt(t,this._ngModule)}}class Zt extends Gt{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,i){return this.factory.create(e,t,n,i||this.ngModule)}}class $t{}class Kt{}function Jt(...e){}const Qt=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=(()=>en(e)),e})(),en=Jt;class tn{}class nn{}const rn=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),sn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>on()),e})(),on=Jt;class an{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ln=new an("8.0.3");class cn{constructor(){}supports(e){return zt(e)}create(e){return new un(e)}}const hn=(e,t)=>t;class un{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||hn}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,r=null;for(;t||n;){const s=!n||t&&t.currentIndex<mn(n,i,r)?t:n,o=mn(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{r||(r=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;t<=s&&s<e&&(r[n]=i+1)}r[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!zt(e))throw new Error(`Error trying to diff '${ge(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,r=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)i=this._trackByFn(t,n=e[t]),null!==r&&Dt(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,t)),Dt(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,t),s=!0),r=r._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[kt()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==r&&Dt(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,e,i,t)),Dt(r.item,e)||this._addIdentityChange(r,e)):(r=this._mismatch(r,e,i,t),s=!0),r=r._next,t++}),this.length=t;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let r;return null===e?r=this._itTail:(r=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Dt(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Dt(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,i)):e=this._addAfter(new dn(t,n),r,i),e}_verifyReinsertion(e,t,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?e=this._reinsertAfter(r,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,r=e._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new fn),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class dn{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pn{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Dt(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class fn{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new pn,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mn(e,t,n){const i=e.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}class gn{constructor(){}supports(e){return e instanceof Map||Vt(e)}create(){return new vn}}class vn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Vt(e)))throw new Error(`Error trying to diff '${ge(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new yn(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Dt(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class yn{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}const _n=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new he,new le]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.ngInjectableDef=pe({providedIn:"root",factory:()=>new e([new cn])}),e})(),bn=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new he,new le]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.ngInjectableDef=pe({providedIn:"root",factory:()=>new e([new gn])}),e})(),xn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>wn()),e})(),wn=(...e)=>{},En=[new gn],Sn=new _n([new cn]),Mn=new bn(En),Tn=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>Cn(e,Qt)),e})(),Cn=Jt,An=(()=>{class e{}return e.__NG_ELEMENT_ID__=(()=>In(e,Qt)),e})(),In=Jt;function Pn(e,t,n,i){let r=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return Ln(n,t),n}(r,e)}function Ln(e,t){e[qe]=t,e[Xe]=t.logError.bind(t)}function Rn(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}function On(e,t,n){const i=e.state,r=1792&i;return r===t?(e.state=-1793&i|n,e.initIndex=-1,!0):r===n}function kn(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Dn(e,t){return e.nodes[t]}function Nn(e,t){return e.nodes[t]}function Fn(e,t){return e.nodes[t]}function zn(e,t){return e.nodes[t]}function Vn(e,t){return e.nodes[t]}const Bn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Hn=()=>{},Un=new Map;function Gn(e){let t=Un.get(e);return t||(t=ge(e)+"_"+Un.size,Un.set(e,t)),t}const jn="$$undefined",Wn="$$empty";function qn(e){return{id:jn,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let Yn=0;function Xn(e,t,n,i){return!(!(2&e.state)&&Dt(e.oldValues[t.bindingIndex+n],i))}function Zn(e,t,n,i){return!!Xn(e,t,n,i)&&(e.oldValues[t.bindingIndex+n]=i,!0)}function $n(e,t,n,i){const r=e.oldValues[t.bindingIndex+n];if(1&e.state||!Nt(r,i)){const s=t.bindings[n].name;throw Pn(Bn.createDebugContext(e,t.nodeIndex),`${s}: ${r}`,`${s}: ${i}`,0!=(1&e.state))}}function Kn(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function Jn(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Qn(e,t,n,i){try{return Kn(33554432&e.def.nodes[t].flags?Nn(e,t).componentView:e),Bn.handleEvent(e,t,n,i)}catch(r){e.root.errorHandler.handleError(r)}}function ei(e){return e.parent?Nn(e.parent,e.parentNodeDef.nodeIndex):null}function ti(e){return e.parent?e.parentNodeDef.parent:null}function ni(e,t){switch(201347067&t.flags){case 1:return Nn(e,t.nodeIndex).renderElement;case 2:return Dn(e,t.nodeIndex).renderText}}function ii(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function ri(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function si(e){return 1<<e%32}function oi(e){const t={};let n=0;const i={};return e&&e.forEach(([e,r])=>{"number"==typeof e?(t[e]=r,n|=si(e)):i[e]=r}),{matchedQueries:t,references:i,matchedQueryIds:n}}function ai(e,t){return e.map(e=>{let n,i;return Array.isArray(e)?[i,n]=e:(i=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,Ae,{value:t,configurable:!0}),{flags:i,token:n,tokenKey:Gn(n)}})}function li(e,t,n){let i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===Ze.Native?Nn(e,n.renderParent.nodeIndex).renderElement:void 0:t}const ci=new WeakMap;function hi(e){let t=ci.get(e);return t||((t=e(()=>Hn)).factory=e,ci.set(e,t)),t}function ui(e,t,n,i,r){3===t&&(n=e.renderer.parentNode(ni(e,e.def.lastRenderRootNode))),di(e,t,0,e.def.nodes.length-1,n,i,r)}function di(e,t,n,i,r,s,o){for(let a=n;a<=i;a++){const n=e.def.nodes[a];11&n.flags&&fi(e,n,t,r,s,o),a+=n.childCount}}function pi(e,t,n,i,r,s){let o=e;for(;o&&!ii(o);)o=o.parent;const a=o.parent,l=ti(o),c=l.nodeIndex+l.childCount;for(let h=l.nodeIndex+1;h<=c;h++){const e=a.def.nodes[h];e.ngContentIndex===t&&fi(a,e,n,i,r,s),h+=e.childCount}if(!a.parent){const o=e.root.projectableNodes[t];if(o)for(let t=0;t<o.length;t++)mi(e,o[t],n,i,r,s)}}function fi(e,t,n,i,r,s){if(8&t.flags)pi(e,t.ngContent.index,n,i,r,s);else{const o=ni(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&mi(e,o,n,i,r,s),32&t.bindingFlags&&mi(Nn(e,t.nodeIndex).componentView,o,n,i,r,s)):mi(e,o,n,i,r,s),16777216&t.flags){const o=Nn(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<o.length;e++)ui(o[e],n,i,r,s)}1&t.flags&&!t.element.name&&di(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,i,r,s)}}function mi(e,t,n,i,r,s){const o=e.renderer;switch(n){case 1:o.appendChild(i,t);break;case 2:o.insertBefore(i,t,r);break;case 3:o.removeChild(i,t);break;case 0:s.push(t)}}const gi=/^:([^:]+):(.+)$/;function vi(e){if(":"===e[0]){const t=e.match(gi);return[t[1],t[2]]}return["",e]}function yi(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function _i(e,t,n,i,r,s,o,a,l,c,h,u,d,p,f,m,g,v,y,_){switch(e){case 1:return t+bi(n)+i;case 2:return t+bi(n)+i+bi(r)+s;case 3:return t+bi(n)+i+bi(r)+s+bi(o)+a;case 4:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c;case 5:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c+bi(h)+u;case 6:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c+bi(h)+u+bi(d)+p;case 7:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c+bi(h)+u+bi(d)+p+bi(f)+m;case 8:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c+bi(h)+u+bi(d)+p+bi(f)+m+bi(g)+v;case 9:return t+bi(n)+i+bi(r)+s+bi(o)+a+bi(l)+c+bi(h)+u+bi(d)+p+bi(f)+m+bi(g)+v+bi(y)+_;default:throw new Error("Does not support more than 9 expressions")}}function bi(e){return null!=e?e.toString():""}const xi=new Object,wi=Gn(Re),Ei=Gn(Pe),Si=Gn($t);function Mi(e,t,n,i){return n=_e(n),{index:-1,deps:ai(i,ge(t)),flags:e,token:t,value:n}}function Ti(e,t,n=Re.THROW_IF_NOT_FOUND){const i=Se(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const o=t.tokenKey;switch(o){case wi:case Ei:case Si:return e}const a=e._def.providersByKey[o];let l;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=Ci(e,a)),t===xi?void 0:t}if((l=fe(t.token))&&(r=e,null!=(s=l).providedIn&&(function(e,t){return e._def.modules.indexOf(s.providedIn)>-1}(r)||"root"===s.providedIn&&r._def.isRoot))){const n=e._providers.length;return e._def.providers[n]=e._def.providersByKey[t.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:t.token},e._providers[n]=xi,e._providers[n]=Ci(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Se(i)}var r,s}function Ci(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const i=n.length;switch(i){case 0:return new t;case 1:return new t(Ti(e,n[0]));case 2:return new t(Ti(e,n[0]),Ti(e,n[1]));case 3:return new t(Ti(e,n[0]),Ti(e,n[1]),Ti(e,n[2]));default:const r=new Array(i);for(let t=0;t<i;t++)r[t]=Ti(e,n[t]);return new t(...r)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const i=n.length;switch(i){case 0:return t();case 1:return t(Ti(e,n[0]));case 2:return t(Ti(e,n[0]),Ti(e,n[1]));case 3:return t(Ti(e,n[0]),Ti(e,n[1]),Ti(e,n[2]));default:const r=Array(i);for(let t=0;t<i;t++)r[t]=Ti(e,n[t]);return t(...r)}}(e,t.value,t.deps);break;case 2048:n=Ti(e,t.deps[0]);break;case 256:n=t.value}return n===xi||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?xi:n}function Ai(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const i=n[t];return i.viewContainerParent=null,Ri(n,t),Bn.dirtyParentQueries(i),Pi(i),i}function Ii(e,t,n){const i=t?ni(t,t.def.lastRenderRootNode):e.renderElement,r=n.renderer.parentNode(i),s=n.renderer.nextSibling(i);ui(n,2,r,s,void 0)}function Pi(e){ui(e,3,null,null,void 0)}function Li(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ri(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const Oi=new Object;function ki(e,t,n,i,r,s){return new Di(e,t,n,i,r,s)}class Di extends Gt{constructor(e,t,n,i,r,s){super(),this.selector=e,this.componentType=t,this._inputs=i,this._outputs=r,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,i){if(!i)throw new Error("ngModule should be provided");const r=hi(this.viewDefFactory),s=r.nodes[0].element.componentProvider.nodeIndex,o=Bn.createRootView(e,t||[],n,r,i,Oi),a=Fn(o,s).instance;return n&&o.renderer.setAttribute(Nn(o,0).renderElement,"ng-version",ln.full),new Ni(o,new Bi(o),a)}}class Ni extends Ut{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new Qt(Nn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new ji(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function Fi(e,t,n){return new zi(e,t,n)}class zi{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new Qt(this._data.renderElement)}get injector(){return new ji(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=ti(e),e=e.parent;return e?new ji(e,t):new ji(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=Ai(this._data,e);Bn.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Bi(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,r){const s=n||this.parentInjector;r||e instanceof Zt||(r=s.get($t));const o=e.create(s,i,void 0,r);return this.insert(o.hostView,t),o}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,i){let r=t.viewContainer._embeddedViews;null==n&&(n=r.length),i.viewContainerParent=e,Li(r,n,i),function(e,t){const n=ei(t);if(!n||n===e||16&t.state)return;t.state|=16;let i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(t),function(e,n){if(4&n.flags)return;t.parent.def.nodeFlags|=4,n.flags|=4;let i=n.parent;for(;i;)i.childFlags|=4,i=i.parent}(0,t.parentNodeDef)}(t,i),Bn.dirtyParentQueries(i),Ii(t,n>0?r[n-1]:null,i)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,i){const r=e.viewContainer._embeddedViews,s=r[n];Ri(r,n),null==i&&(i=r.length),Li(r,i,s),Bn.dirtyParentQueries(s),Pi(s),Ii(e,i>0?r[i-1]:null,s)}(this._data,0,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=Ai(this._data,e);t&&Bn.destroyView(t)}detach(e){const t=Ai(this._data,e);return t?new Bi(t):null}}function Vi(e){return new Bi(e)}class Bi{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return ui(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Kn(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{Bn.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){Bn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Bn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Pi(this._view),Bn.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Hi(e,t){return new Ui(e,t)}class Ui extends Tn{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Bi(Bn.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new Qt(Nn(this._parentView,this._def.nodeIndex).renderElement)}}function Gi(e,t){return new ji(e,t)}class ji{constructor(e,t){this.view=e,this.elDef=t}get(e,t=Re.THROW_IF_NOT_FOUND){return Bn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Gn(e)},t)}}function Wi(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=Nn(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return Dn(e,n.nodeIndex).renderText;if(20240&n.flags)return Fn(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function qi(e){return new Yi(e.renderer)}class Yi{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,i]=vi(t),r=this.delegate.createElement(i,n);return e&&this.delegate.appendChild(e,r),r}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),i=this.delegate.nextSibling(e);for(let r=0;r<t.length;r++)this.delegate.insertBefore(n,t[r],i)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[i,r]=vi(t);null!=n?this.delegate.setAttribute(e,r,n,i):this.delegate.removeAttribute(e,r,i)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Xi(e,t,n,i){return new Zi(e,t,n,i)}class Zi{constructor(e,t,n,i){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let i=0;i<t.providers.length;i++){const r=t.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=Ci(e,r))}}(this)}get(e,t=Re.THROW_IF_NOT_FOUND,n=ue.Default){let i=0;return n&ue.SkipSelf?i|=1:n&ue.Self&&(i|=4),Ti(this,{token:e,tokenKey:Gn(e),flags:i},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(Yt)}destroy(){if(this._destroyed)throw new Error(`The ng module ${ge(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,i=new Set;for(let r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){const t=e._providers[r];if(t&&t!==xi){const e=t.ngOnDestroy;"function"!=typeof e||i.has(t)||(e.apply(t),i.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const $i=Gn(tn),Ki=Gn(sn),Ji=Gn(Qt),Qi=Gn(An),er=Gn(Tn),tr=Gn(xn),nr=Gn(Re),ir=Gn(Pe);function rr(e,t,n,i,r,s,o,a){const l=[];if(o)for(let h in o){const[e,t]=o[h];l[e]={flags:8,name:h,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let h in a)c.push({type:1,propName:h,target:null,eventName:a[h]});return or(e,t|=16384,n,i,r,r,s,l,c)}function sr(e,t,n,i,r){return or(-1,e,t,0,n,i,r)}function or(e,t,n,i,r,s,o,a,l){const{matchedQueries:c,references:h,matchedQueryIds:u}=oi(n);l||(l=[]),a||(a=[]),s=_e(s);const d=ai(o,ge(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:u,references:h,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:yi(a),outputs:l,element:null,provider:{token:r,value:s,deps:d},text:null,query:null,ngContent:null}}function ar(e,t){return ur(e,t)}function lr(e,t){let n=e;for(;n.parent&&!ii(n);)n=n.parent;return dr(n.parent,ti(n),!0,t.provider.value,t.provider.deps)}function cr(e,t){const n=dr(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let i=0;i<t.outputs.length;i++){const r=t.outputs[i],s=n[r.propName];if(!Rt(s))throw new Error(`@Output ${r.propName} not initialized in '${n.constructor.name}'.`);{const n=s.subscribe(hr(e,t.parent.nodeIndex,r.eventName));e.disposables[t.outputIndex+i]=n.unsubscribe.bind(n)}}return n}function hr(e,t,n){return i=>Qn(e,t,n,i)}function ur(e,t){const n=(8192&t.flags)>0,i=t.provider;switch(201347067&t.flags){case 512:return dr(e,t.parent,n,i.value,i.deps);case 1024:return function(e,t,n,i,r){const s=r.length;switch(s){case 0:return i();case 1:return i(fr(e,t,n,r[0]));case 2:return i(fr(e,t,n,r[0]),fr(e,t,n,r[1]));case 3:return i(fr(e,t,n,r[0]),fr(e,t,n,r[1]),fr(e,t,n,r[2]));default:const o=Array(s);for(let i=0;i<s;i++)o[i]=fr(e,t,n,r[i]);return i(...o)}}(e,t.parent,n,i.value,i.deps);case 2048:return fr(e,t.parent,n,i.deps[0]);case 256:return i.value}}function dr(e,t,n,i,r){const s=r.length;switch(s){case 0:return new i;case 1:return new i(fr(e,t,n,r[0]));case 2:return new i(fr(e,t,n,r[0]),fr(e,t,n,r[1]));case 3:return new i(fr(e,t,n,r[0]),fr(e,t,n,r[1]),fr(e,t,n,r[2]));default:const o=new Array(s);for(let i=0;i<s;i++)o[i]=fr(e,t,n,r[i]);return new i(...o)}}const pr={};function fr(e,t,n,i,r=Re.THROW_IF_NOT_FOUND){if(8&i.flags)return i.token;const s=e;2&i.flags&&(r=null);const o=i.tokenKey;o===tr&&(n=!(!t||!t.element.componentView)),t&&1&i.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(o){case $i:return qi(mr(a,t,n));case Ki:return mr(a,t,n).renderer;case Ji:return new Qt(Nn(a,t.nodeIndex).renderElement);case Qi:return Nn(a,t.nodeIndex).viewContainer;case er:if(t.element.template)return Nn(a,t.nodeIndex).template;break;case tr:return Vi(mr(a,t,n));case nr:case ir:return Gi(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[o];if(e){let t=Fn(a,e.nodeIndex);return t||(t={instance:ur(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=ii(a),t=ti(a),a=a.parent,4&i.flags&&(a=null)}const l=s.root.injector.get(i.token,pr);return l!==pr||r===pr?l:s.root.ngModule.injector.get(i.token,r)}function mr(e,t,n){let i;if(n)i=Nn(e,t.nodeIndex).componentView;else for(i=e;i.parent&&!ii(i);)i=i.parent;return i}function gr(e,t,n,i,r,s){if(32768&n.flags){const t=Nn(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[i].name]=r,524288&n.flags){s=s||{};const t=Ft.unwrap(e.oldValues[n.bindingIndex+i]);s[n.bindings[i].nonMinifiedName]=new Bt(t,r,0!=(2&e.state))}return e.oldValues[n.bindingIndex+i]=r,s}function vr(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let i=0;for(let r=0;r<n.length;r++){const s=n[r];let o=s.parent;for(!o&&s.flags&t&&_r(e,r,s.flags&t,i++),0==(s.childFlags&t)&&(r+=s.childCount);o&&1&o.flags&&r===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(i=yr(e,o,t,i)),o=o.parent}}function yr(e,t,n,i){for(let r=t.nodeIndex+1;r<=t.nodeIndex+t.childCount;r++){const t=e.def.nodes[r];t.flags&n&&_r(e,r,t.flags&n,i++),r+=t.childCount}return i}function _r(e,t,n,i){const r=Fn(e,t);if(!r)return;const s=r.instance;s&&(Bn.setCurrentNode(e,t),1048576&n&&kn(e,512,i)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&kn(e,768,i)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}const br=new Ce("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>$e});class xr extends M{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i,r=e=>null,s=()=>null;e&&"object"==typeof e?(i=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(r=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,r,s);return e instanceof d&&e.add(o),o}}class wr{constructor(){this.dirty=!0,this._results=[],this.changes=new xr,this.length=0}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}[kt()](){return this._results[kt()]()}toString(){return this._results.toString()}reset(e){this._results=function e(t,n){void 0===n&&(n=t);for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?(n===t&&(n=t.slice(0,i)),e(r,n)):n!==t&&n.push(r)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Er=new Ce("Application Initializer"),Sr=(()=>(class{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();Lt(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}))(),Mr=new Ce("AppId");function Tr(){return`${Cr()}${Cr()}${Cr()}`}function Cr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ar=new Ce("Platform Initializer"),Ir=new Ce("Platform ID"),Pr=new Ce("appBootstrapListener"),Lr=(()=>(class{log(e){console.log(e)}warn(e){console.warn(e)}}))();function Rr(){throw new Error("Runtime compiler is not loaded")}const Or=Rr,kr=Rr,Dr=Rr,Nr=Rr,Fr=(()=>(class{constructor(){this.compileModuleSync=Or,this.compileModuleAsync=kr,this.compileModuleAndAllComponentsSync=Dr,this.compileModuleAndAllComponentsAsync=Nr}clearCache(){}clearCacheFor(e){}getModuleId(e){}}))();class zr{}let Vr,Br;function Hr(){const e=xe.wtf;return!(!e||!(Vr=e.trace)||(Br=Vr.events,0))}const Ur=Hr(),Gr=Ur?function(e,t=null){return Br.createScope(e,t)}:(e,t)=>(function(e,t){return null}),jr=Ur?function(e,t){return Vr.leaveScope(e,t),t}:(e,t)=>t,Wr=(()=>Promise.resolve(0))();function qr(e){"undefined"==typeof Zone?Wr.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Yr{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xr(!1),this.onMicrotaskEmpty=new xr(!1),this.onStable=new xr(!1),this.onError=new xr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,i,r,s,o)=>{try{return Kr(t),e.invokeTask(i,r,s,o)}finally{Jr(t)}},onInvoke:(e,n,i,r,s,o,a)=>{try{return Kr(t),e.invoke(i,r,s,o,a)}finally{Jr(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t.hasPendingMicrotasks=r.microTask,$r(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Zr,Xr,Xr);try{return r.runTask(s,t,n)}finally{r.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Xr(){}const Zr={};function $r(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Kr(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Jr(e){e._nesting--,$r(e)}class Qr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xr,this.onMicrotaskEmpty=new xr,this.onStable=new xr,this.onError=new xr}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}const es=(()=>(class{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yr.assertNotInAngularZone(),qr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qr(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}))(),ts=(()=>{class e{constructor(){this._applications=new Map,rs.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return rs.findTestabilityInTree(this,e,t)}}return e.ctorParameters=(()=>[]),e})();class ns{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let is,rs=new ns,ss=function(e){return e instanceof Zt};const os=new Ce("AllowMultipleToken");class as{constructor(e,t){this.name=e,this.token=t}}function ls(e,t,n=[]){const i=`Platform: ${t}`,r=new Ce(i);return(t=[])=>{let s=cs();if(!s||s.injector.get(os,!1))if(e)e(n.concat(t).concat({provide:r,useValue:!0}));else{const e=n.concat(t).concat({provide:r,useValue:!0});!function(e){if(is&&!is.destroyed&&!is.injector.get(os,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");is=e.get(hs);const t=e.get(Ar,null);t&&t.forEach(e=>e())}(Re.create({providers:e,name:i}))}return function(e){const t=cs();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(r)}}function cs(){return is&&!is.destroyed?is:null}const hs=(()=>(class{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(r=t?t.ngZone:void 0)?new Qr:("zone.js"===r?void 0:r)||new Yr({enableLongStackTrace:it()}),i=[{provide:Yr,useValue:n}];var r;return n.run(()=>{const t=Re.create({providers:i,parent:this.injector,name:e.moduleType.name}),r=e.create(t),s=r.injector.get(et,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy(()=>ps(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,n){try{const r=n();return Lt(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(s,n,()=>{const e=r.injector.get(Sr);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(r),r))})})}bootstrapModule(e,t=[]){const n=us({},t);return function(e,t,n){return e.get(zr).createCompiler([t]).compileModuleAsync(n)}(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(ds);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${ge(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}))();function us(e,t){return Array.isArray(t)?t.reduce(us,e):Object.assign({},e,t)}const ds=(()=>{class e{constructor(e,t,n,i,r,s){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=it(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Yr.assertNotInAngularZone(),qr(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Yr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=$(o,a.pipe(re()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Gt?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=ss(n)?null:this._injector.get($t),r=n.create(Re.NULL,[],t||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const s=r.injector.get(es,null);return s&&r.injector.get(ts).registerApplication(r.location.nativeElement,s),this._loadComponent(r),it()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const t=e._tickScope();try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,jr(t)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;ps(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Pr,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),ps(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e._tickScope=Gr("ApplicationRef#tick()"),e})();function ps(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class fs{constructor(e,t){this.name=e,this.callback=t}}class ms{constructor(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof gs&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class gs extends ms{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(t=>{t.parent&&t.parent.removeChild(t),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,i){t.childNodes.forEach(t=>{t instanceof gs&&(n(t)&&i.push(t),e(t,n,i))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,i){t instanceof gs&&t.childNodes.forEach(t=>{n(t)&&i.push(t),t instanceof gs&&e(t,n,i)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof gs)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const vs=new Map,ys=function(e){return vs.get(e)||null};function _s(e){vs.set(e.nativeNode,e)}const bs=ls(null,"core",[{provide:Ir,useValue:"unknown"},{provide:hs,deps:[Re]},{provide:ts,deps:[]},{provide:Lr,deps:[]}]),xs=new Ce("LocaleId");function ws(){return Sn}function Es(){return Mn}function Ss(e){return e||"en-US"}function Ms(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}const Ts=(()=>(class{constructor(e){}}))();function Cs(e,t,n,i,r,s){e|=1;const{matchedQueries:o,references:a,matchedQueryIds:l}=oi(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?hi(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Hn},provider:null,text:null,query:null,ngContent:null}}function As(e,t,n,i,r,s,o=[],a,l,c,h,u){c||(c=Hn);const{matchedQueries:d,references:p,matchedQueryIds:f}=oi(n);let m=null,g=null;s&&([m,g]=vi(s)),a=a||[];const v=new Array(a.length);for(let b=0;b<a.length;b++){const[e,t,n]=a[b],[i,r]=vi(t);let s=void 0,o=void 0;switch(15&e){case 4:o=n;break;case 1:case 8:s=n}v[b]={flags:e,ns:i,name:r,nonMinifiedName:r,securityContext:s,suffix:o}}l=l||[];const y=new Array(l.length);for(let b=0;b<l.length;b++){const[e,t]=l[b];y[b]={type:0,target:e,eventName:t,propName:null}}const _=(o=o||[]).map(([e,t])=>{const[n,i]=vi(e);return[n,i,t]});return u=function(e){if(e&&e.id===jn){const t=null!=e.encapsulation&&e.encapsulation!==Ze.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${Yn++}`:Wn}return e&&e.id===Wn&&(e=null),e||null}(u),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:i,childCount:r,bindings:v,bindingFlags:yi(v),outputs:y,element:{ns:m,name:g,attrs:_,template:null,componentProvider:null,componentView:h||null,componentRendererType:u,publicProviders:null,allProviders:null,handleEvent:c||Hn},provider:null,text:null,query:null,ngContent:null}}function Is(e,t,n){const i=n.element,r=e.root.selectorOrNode,s=e.renderer;let o;if(e.parent||!r){o=i.name?s.createElement(i.name,i.ns):s.createComment("");const r=li(e,t,n);r&&s.appendChild(r,o)}else o=s.selectRootElement(r,!!i.componentRendererType&&i.componentRendererType.encapsulation===Ze.ShadowDom);if(i.attrs)for(let a=0;a<i.attrs.length;a++){const[e,t,n]=i.attrs[a];s.setAttribute(o,t,n,e)}return o}function Ps(e,t,n,i){for(let o=0;o<n.outputs.length;o++){const a=n.outputs[o],l=Ls(e,n.nodeIndex,(s=a.eventName,(r=a.target)?`${r}:${s}`:s));let c=a.target,h=e;"component"===a.target&&(c=null,h=t);const u=h.renderer.listen(c||i,a.eventName,l);e.disposables[n.outputIndex+o]=u}var r,s}function Ls(e,t,n){return i=>Qn(e,t,n,i)}function Rs(e,t,n,i){if(!Zn(e,t,n,i))return!1;const r=t.bindings[n],s=Nn(e,t.nodeIndex),o=s.renderElement,a=r.name;switch(15&r.flags){case 1:!function(e,t,n,i,r,s){const o=t.securityContext;let a=o?e.root.sanitizer.sanitize(o,s):s;a=null!=a?a.toString():null;const l=e.renderer;null!=s?l.setAttribute(n,r,a,i):l.removeAttribute(n,r,i)}(e,r,o,r.ns,a,i);break;case 2:!function(e,t,n,i){const r=e.renderer;i?r.addClass(t,n):r.removeClass(t,n)}(e,o,a,i);break;case 4:!function(e,t,n,i,r){let s=e.root.sanitizer.sanitize(Mt.STYLE,r);if(null!=s){s=s.toString();const e=t.suffix;null!=e&&(s+=e)}else s=null;const o=e.renderer;null!=s?o.setStyle(n,i,s):o.removeStyle(n,i)}(e,r,o,a,i);break;case 8:!function(e,t,n,i,r){const s=t.securityContext;let o=s?e.root.sanitizer.sanitize(s,r):r;e.renderer.setProperty(n,i,o)}(33554432&t.flags&&32&r.flags?s.componentView:e,r,o,a,i)}return!0}function Os(e,t,n){let i=[];for(let r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:si(t),bindings:i},ngContent:null}}function ks(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&ri(e);){let n=e.parentNodeDef;e=e.parent;const i=n.nodeIndex+n.childCount;for(let r=0;r<=i;r++){const i=e.def.nodes[r];67108864&i.flags&&536870912&i.flags&&(i.query.filterId&t)===i.query.filterId&&Vn(e,r).setDirty(),!(1&i.flags&&r+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(r+=i.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&Vn(e,n).setDirty(),n+=t.childCount}}function Ds(e,t){const n=Vn(e,t.nodeIndex);if(!n.dirty)return;let i,r=void 0;if(67108864&t.flags){const n=t.parent.parent;r=Ns(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),i=Fn(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(r=Ns(e,0,e.def.nodes.length-1,t.query,[]),i=e.component);n.reset(r);const s=t.query.bindings;let o=!1;for(let a=0;a<s.length;a++){const e=s[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,o=!0}i[e.propName]=t}o&&n.notifyOnChanges()}function Ns(e,t,n,i,r){for(let s=t;s<=n;s++){const t=e.def.nodes[s],n=t.matchedQueries[i.id];if(null!=n&&r.push(Fs(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&i.filterId)===i.filterId){const n=Nn(e,s);if((t.childMatchedQueries&i.filterId)===i.filterId&&(Ns(e,s+1,s+t.childCount,i,r),s+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const s=e[t],o=ei(s);o&&o===n&&Ns(s,0,s.def.nodes.length-1,i,r)}}const o=n.template._projectedViews;if(o)for(let e=0;e<o.length;e++){const t=o[e];Ns(t,0,t.def.nodes.length-1,i,r)}}(t.childMatchedQueries&i.filterId)!==i.filterId&&(s+=t.childCount)}return r}function Fs(e,t,n){if(null!=n)switch(n){case 1:return Nn(e,t.nodeIndex).renderElement;case 0:return new Qt(Nn(e,t.nodeIndex).renderElement);case 2:return Nn(e,t.nodeIndex).template;case 3:return Nn(e,t.nodeIndex).viewContainer;case 4:return Fn(e,t.nodeIndex).instance}}function zs(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Vs(e,t,n){const i=li(e,t,n);i&&pi(e,n.ngContent.index,1,i,null,void 0)}function Bs(e,t,n){const i=new Array(n.length-1);for(let r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Hs(e,t,n){let i;const r=e.renderer;i=r.createText(n.text.prefix);const s=li(e,t,n);return s&&r.appendChild(s,i),{renderText:i}}function Us(e,t){return(null!=e?e.toString():"")+t.suffix}function Gs(e,t,n,i){let r=0,s=0,o=0,a=0,l=0,c=null,h=null,u=!1,d=!1,p=null;for(let f=0;f<t.length;f++){const e=t[f];if(e.nodeIndex=f,e.parent=c,e.bindingIndex=r,e.outputIndex=s,e.renderParent=h,o|=e.flags,l|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=c?c.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,u=!1,d=!1,e.element.template&&(l|=e.element.template.nodeMatchedQueries)}if(Ws(c,e,t.length),r+=e.bindings.length,s+=e.outputs.length,!h&&3&e.flags&&(p=e),20224&e.flags){u||(u=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?c.element.publicProviders[Gn(e.provider.token)]=e:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[Gn(e.provider.token)]=e),t&&(c.element.componentProvider=e)}if(c?(c.childFlags|=e.flags,c.directChildFlags|=e.flags,c.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(c.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)c=e,js(e)||(h=e);else for(;c&&f===c.nodeIndex+c.childCount;){const e=c.parent;e&&(e.childFlags|=c.childFlags,e.childMatchedQueries|=c.childMatchedQueries),h=(c=e)&&js(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:l,flags:e,nodes:t,updateDirectives:n||Hn,updateRenderer:i||Hn,handleEvent:(e,n,i,r)=>t[n].element.handleEvent(e,i,r),bindingCount:r,outputCount:s,lastRenderRootNode:p}}function js(e){return 0!=(1&e.flags)&&null===e.element.name}function Ws(e,t,n){const i=t.element&&t.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function qs(e,t,n,i){const r=Zs(e.root,e.renderer,e,t,n);return $s(r,e.component,i),Ks(r),r}function Ys(e,t,n){const i=Zs(e,e.renderer,null,null,t);return $s(i,n,n),Ks(i),i}function Xs(e,t,n,i){const r=t.element.componentRendererType;let s;return s=r?e.root.rendererFactory.createRenderer(i,r):e.root.renderer,Zs(e.root,s,e,t.element.componentProvider,n)}function Zs(e,t,n,i,r){const s=new Array(r.nodes.length),o=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:s,state:13,root:e,renderer:t,oldValues:new Array(r.bindingCount),disposables:o,initIndex:-1}}function $s(e,t,n){e.component=t,e.context=n}function Ks(e){let t;ii(e)&&(t=Nn(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,i=e.nodes;for(let r=0;r<n.nodes.length;r++){const s=n.nodes[r];let o;switch(Bn.setCurrentNode(e,r),201347067&s.flags){case 1:const n=Is(e,t,s);let a=void 0;if(33554432&s.flags){const t=hi(s.element.componentView);a=Bn.createComponentView(e,s,t,n)}Ps(e,a,s,n),o={renderElement:n,componentView:a,viewContainer:null,template:s.element.template?Hi(e,s):void 0},16777216&s.flags&&(o.viewContainer=Fi(e,s,o));break;case 2:o=Hs(e,t,s);break;case 512:case 1024:case 2048:case 256:(o=i[r])||4096&s.flags||(o={instance:ar(e,s)});break;case 16:o={instance:lr(e,s)};break;case 16384:(o=i[r])||(o={instance:cr(e,s)}),32768&s.flags&&$s(Nn(e,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new wr;break;case 8:Vs(e,t,s),o=void 0}i[r]=o}oo(e,so.CreateViewNodes),ho(e,201326592,268435456,0)}function Js(e){to(e),Bn.updateDirectives(e,1),ao(e,so.CheckNoChanges),Bn.updateRenderer(e,1),oo(e,so.CheckNoChanges),e.state&=-97}function Qs(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,On(e,0,256),to(e),Bn.updateDirectives(e,0),ao(e,so.CheckAndUpdate),ho(e,67108864,536870912,0);let t=On(e,256,512);vr(e,2097152|(t?1048576:0)),Bn.updateRenderer(e,0),oo(e,so.CheckAndUpdate),ho(e,134217728,536870912,0),vr(e,8388608|((t=On(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,On(e,768,1024)}function eo(e,t,n,i,r,s,o,a,l,c,h,u,d){return 0===n?function(e,t,n,i,r,s,o,a,l,c,h,u){switch(201347067&t.flags){case 1:return function(e,t,n,i,r,s,o,a,l,c,h,u){const d=t.bindings.length;let p=!1;return d>0&&Rs(e,t,0,n)&&(p=!0),d>1&&Rs(e,t,1,i)&&(p=!0),d>2&&Rs(e,t,2,r)&&(p=!0),d>3&&Rs(e,t,3,s)&&(p=!0),d>4&&Rs(e,t,4,o)&&(p=!0),d>5&&Rs(e,t,5,a)&&(p=!0),d>6&&Rs(e,t,6,l)&&(p=!0),d>7&&Rs(e,t,7,c)&&(p=!0),d>8&&Rs(e,t,8,h)&&(p=!0),d>9&&Rs(e,t,9,u)&&(p=!0),p}(e,t,n,i,r,s,o,a,l,c,h,u);case 2:return function(e,t,n,i,r,s,o,a,l,c,h,u){let d=!1;const p=t.bindings,f=p.length;if(f>0&&Zn(e,t,0,n)&&(d=!0),f>1&&Zn(e,t,1,i)&&(d=!0),f>2&&Zn(e,t,2,r)&&(d=!0),f>3&&Zn(e,t,3,s)&&(d=!0),f>4&&Zn(e,t,4,o)&&(d=!0),f>5&&Zn(e,t,5,a)&&(d=!0),f>6&&Zn(e,t,6,l)&&(d=!0),f>7&&Zn(e,t,7,c)&&(d=!0),f>8&&Zn(e,t,8,h)&&(d=!0),f>9&&Zn(e,t,9,u)&&(d=!0),d){let d=t.text.prefix;f>0&&(d+=Us(n,p[0])),f>1&&(d+=Us(i,p[1])),f>2&&(d+=Us(r,p[2])),f>3&&(d+=Us(s,p[3])),f>4&&(d+=Us(o,p[4])),f>5&&(d+=Us(a,p[5])),f>6&&(d+=Us(l,p[6])),f>7&&(d+=Us(c,p[7])),f>8&&(d+=Us(h,p[8])),f>9&&(d+=Us(u,p[9]));const m=Dn(e,t.nodeIndex).renderText;e.renderer.setValue(m,d)}return d}(e,t,n,i,r,s,o,a,l,c,h,u);case 16384:return function(e,t,n,i,r,s,o,a,l,c,h,u){const d=Fn(e,t.nodeIndex),p=d.instance;let f=!1,m=void 0;const g=t.bindings.length;return g>0&&Xn(e,t,0,n)&&(f=!0,m=gr(e,d,t,0,n,m)),g>1&&Xn(e,t,1,i)&&(f=!0,m=gr(e,d,t,1,i,m)),g>2&&Xn(e,t,2,r)&&(f=!0,m=gr(e,d,t,2,r,m)),g>3&&Xn(e,t,3,s)&&(f=!0,m=gr(e,d,t,3,s,m)),g>4&&Xn(e,t,4,o)&&(f=!0,m=gr(e,d,t,4,o,m)),g>5&&Xn(e,t,5,a)&&(f=!0,m=gr(e,d,t,5,a,m)),g>6&&Xn(e,t,6,l)&&(f=!0,m=gr(e,d,t,6,l,m)),g>7&&Xn(e,t,7,c)&&(f=!0,m=gr(e,d,t,7,c,m)),g>8&&Xn(e,t,8,h)&&(f=!0,m=gr(e,d,t,8,h,m)),g>9&&Xn(e,t,9,u)&&(f=!0,m=gr(e,d,t,9,u,m)),m&&p.ngOnChanges(m),65536&t.flags&&kn(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),f}(e,t,n,i,r,s,o,a,l,c,h,u);case 32:case 64:case 128:return function(e,t,n,i,r,s,o,a,l,c,h,u){const d=t.bindings;let p=!1;const f=d.length;if(f>0&&Zn(e,t,0,n)&&(p=!0),f>1&&Zn(e,t,1,i)&&(p=!0),f>2&&Zn(e,t,2,r)&&(p=!0),f>3&&Zn(e,t,3,s)&&(p=!0),f>4&&Zn(e,t,4,o)&&(p=!0),f>5&&Zn(e,t,5,a)&&(p=!0),f>6&&Zn(e,t,6,l)&&(p=!0),f>7&&Zn(e,t,7,c)&&(p=!0),f>8&&Zn(e,t,8,h)&&(p=!0),f>9&&Zn(e,t,9,u)&&(p=!0),p){const p=zn(e,t.nodeIndex);let m;switch(201347067&t.flags){case 32:m=new Array(d.length),f>0&&(m[0]=n),f>1&&(m[1]=i),f>2&&(m[2]=r),f>3&&(m[3]=s),f>4&&(m[4]=o),f>5&&(m[5]=a),f>6&&(m[6]=l),f>7&&(m[7]=c),f>8&&(m[8]=h),f>9&&(m[9]=u);break;case 64:m={},f>0&&(m[d[0].name]=n),f>1&&(m[d[1].name]=i),f>2&&(m[d[2].name]=r),f>3&&(m[d[3].name]=s),f>4&&(m[d[4].name]=o),f>5&&(m[d[5].name]=a),f>6&&(m[d[6].name]=l),f>7&&(m[d[7].name]=c),f>8&&(m[d[8].name]=h),f>9&&(m[d[9].name]=u);break;case 128:const e=n;switch(f){case 1:m=e.transform(n);break;case 2:m=e.transform(i);break;case 3:m=e.transform(i,r);break;case 4:m=e.transform(i,r,s);break;case 5:m=e.transform(i,r,s,o);break;case 6:m=e.transform(i,r,s,o,a);break;case 7:m=e.transform(i,r,s,o,a,l);break;case 8:m=e.transform(i,r,s,o,a,l,c);break;case 9:m=e.transform(i,r,s,o,a,l,c,h);break;case 10:m=e.transform(i,r,s,o,a,l,c,h,u)}}p.value=m}return p}(e,t,n,i,r,s,o,a,l,c,h,u);default:throw"unreachable"}}(e,t,i,r,s,o,a,l,c,h,u,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let i=!1;for(let r=0;r<n.length;r++)Rs(e,t,r,n[r])&&(i=!0);return i}(e,t,n);case 2:return function(e,t,n){const i=t.bindings;let r=!1;for(let s=0;s<n.length;s++)Zn(e,t,s,n[s])&&(r=!0);if(r){let r="";for(let e=0;e<n.length;e++)r+=Us(n[e],i[e]);r=t.text.prefix+r;const s=Dn(e,t.nodeIndex).renderText;e.renderer.setValue(s,r)}return r}(e,t,n);case 16384:return function(e,t,n){const i=Fn(e,t.nodeIndex),r=i.instance;let s=!1,o=void 0;for(let a=0;a<n.length;a++)Xn(e,t,a,n[a])&&(s=!0,o=gr(e,i,t,a,n[a],o));return o&&r.ngOnChanges(o),65536&t.flags&&kn(e,256,t.nodeIndex)&&r.ngOnInit(),262144&t.flags&&r.ngDoCheck(),s}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const i=t.bindings;let r=!1;for(let s=0;s<n.length;s++)Zn(e,t,s,n[s])&&(r=!0);if(r){const r=zn(e,t.nodeIndex);let s;switch(201347067&t.flags){case 32:s=n;break;case 64:s={};for(let t=0;t<n.length;t++)s[i[t].name]=n[t];break;case 128:const e=n[0],r=n.slice(1);s=e.transform(...r)}r.value=s}return r}(e,t,n);default:throw"unreachable"}}(e,t,i)}function to(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const i=t.nodes[n];if(4&i.flags){const t=Nn(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const i=t[n];i.state|=32,Jn(i,e)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function no(e,t,n,i,r,s,o,a,l,c,h,u,d){return 0===n?function(e,t,n,i,r,s,o,a,l,c,h,u){const d=t.bindings.length;d>0&&$n(e,t,0,n),d>1&&$n(e,t,1,i),d>2&&$n(e,t,2,r),d>3&&$n(e,t,3,s),d>4&&$n(e,t,4,o),d>5&&$n(e,t,5,a),d>6&&$n(e,t,6,l),d>7&&$n(e,t,7,c),d>8&&$n(e,t,8,h),d>9&&$n(e,t,9,u)}(e,t,i,r,s,o,a,l,c,h,u,d):function(e,t,n){for(let i=0;i<n.length;i++)$n(e,t,i,n[i])}(e,t,i),!1}function io(e,t){if(Vn(e,t.nodeIndex).dirty)throw Pn(Bn.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function ro(e){if(!(128&e.state)){if(ao(e,so.Destroy),oo(e,so.Destroy),vr(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=ei(e);if(t){const n=t.template._projectedViews;n&&(Ri(n,n.indexOf(e)),Bn.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(Nn(e,n).renderElement):2&t.flags?e.renderer.destroyNode(Dn(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&Vn(e,n).destroy()}}(e),ii(e)&&e.renderer.destroy(),e.state|=128}}const so=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function oo(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];33554432&r.flags?lo(Nn(e,i).componentView,t):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function ao(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];if(16777216&r.flags){const n=Nn(e,i).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)lo(n[e],t)}else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function lo(e,t){const n=e.state;switch(t){case so.CheckNoChanges:0==(128&n)&&(12==(12&n)?Js(e):64&n&&co(e,so.CheckNoChangesProjectedViews));break;case so.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Js(e):64&n&&co(e,t));break;case so.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Qs(e):64&n&&co(e,so.CheckAndUpdateProjectedViews));break;case so.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Qs(e):64&n&&co(e,t));break;case so.Destroy:ro(e);break;case so.CreateViewNodes:Ks(e)}}function co(e,t){ao(e,t),oo(e,t)}function ho(e,t,n,i){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const r=e.def.nodes.length;for(let s=0;s<r;s++){const r=e.def.nodes[s];if(r.flags&t&&r.flags&n)switch(Bn.setCurrentNode(e,r.nodeIndex),i){case 0:Ds(e,r);break;case 1:io(e,r)}r.childFlags&t&&r.childFlags&n||(s+=r.childCount)}}let uo=!1;function po(e,t,n,i,r,s){const o=r.injector.get(nn);return Ys(mo(e,r,o,t,n),i,s)}function fo(e,t,n,i,r,s){const o=r.injector.get(nn),a=mo(e,r,new Yo(o),t,n),l=Mo(i);return Wo(Lo.create,Ys,null,[a,l,s])}function mo(e,t,n,i,r){const s=t.injector.get(Tt),o=t.injector.get(et),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:i,selectorOrNode:r,sanitizer:s,rendererFactory:n,renderer:a,errorHandler:o}}function go(e,t,n,i){const r=Mo(n);return Wo(Lo.create,qs,null,[e,t,r,i])}function vo(e,t,n,i){return n=xo.get(t.element.componentProvider.provider.token)||Mo(n),Wo(Lo.create,Xs,null,[e,t,n,i])}function yo(e,t,n,i){return Xi(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===_o.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const i=_o.get(e.token);3840&e.flags&&i&&(t=!0,n=n||i.deprecatedBehavior)}),e.modules.forEach(e=>{bo.forEach((i,r)=>{fe(r).providedIn===e&&(t=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const i=e.providers[t];n&&(i.flags|=4096);const r=_o.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=ai(r.deps),i.value=r.value)}if(bo.size>0){let t=new Set(e.modules);bo.forEach((i,r)=>{if(t.has(fe(r).providedIn)){let t={token:r,flags:i.flags|(n?4096:0),deps:ai(i.deps),value:i.value,index:e.providers.length};e.providers.push(t),e.providersByKey[Gn(r)]=t}})}}(e=e.factory(()=>Hn)),e):e}(i))}const _o=new Map,bo=new Map,xo=new Map;function wo(e){let t;_o.set(e.token,e),"function"==typeof e.token&&(t=fe(e.token))&&"function"==typeof t.providedIn&&bo.set(e.token,e)}function Eo(e,t){const n=hi(t.viewDefFactory),i=hi(n.nodes[0].element.componentView);xo.set(e,i)}function So(){_o.clear(),bo.clear(),xo.clear()}function Mo(e){if(0===_o.size)return e;const t=function(e){const t=[];let n=null;for(let i=0;i<e.nodes.length;i++){const r=e.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&_o.has(r.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>Hn);for(let i=0;i<t.length;i++)n(e,t[i]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=_o.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=ai(n.deps),e.value=n.value)}}}}function To(e,t,n,i,r,s,o,a,l,c,h,u,d){const p=e.def.nodes[t];return eo(e,p,n,i,r,s,o,a,l,c,h,u,d),224&p.flags?zn(e,t).value:void 0}function Co(e,t,n,i,r,s,o,a,l,c,h,u,d){const p=e.def.nodes[t];return no(e,p,n,i,r,s,o,a,l,c,h,u,d),224&p.flags?zn(e,t).value:void 0}function Ao(e){return Wo(Lo.detectChanges,Qs,null,[e])}function Io(e){return Wo(Lo.checkNoChanges,Js,null,[e])}function Po(e){return Wo(Lo.destroy,ro,null,[e])}const Lo=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let Ro,Oo,ko;function Do(e,t){Oo=e,ko=t}function No(e,t,n,i){return Do(e,t),Wo(Lo.handleEvent,e.def.handleEvent,null,[e,t,n,i])}function Fo(e,t){if(128&e.state)throw Rn(Lo[Ro]);return Do(e,Ho(e,0)),e.def.updateDirectives(function(e,n,i,...r){const s=e.def.nodes[n];return 0===t?Vo(e,s,i,r):Bo(e,s,i,r),16384&s.flags&&Do(e,Ho(e,n)),224&s.flags?zn(e,s.nodeIndex).value:void 0},e)}function zo(e,t){if(128&e.state)throw Rn(Lo[Ro]);return Do(e,Uo(e,0)),e.def.updateRenderer(function(e,n,i,...r){const s=e.def.nodes[n];return 0===t?Vo(e,s,i,r):Bo(e,s,i,r),3&s.flags&&Do(e,Uo(e,n)),224&s.flags?zn(e,s.nodeIndex).value:void 0},e)}function Vo(e,t,n,i){if(eo(e,t,n,...i)){const o=1===n?i[0]:i;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const i=t.bindings[e],a=o[e];8&i.flags&&(n[(r=i.nonMinifiedName,s=void 0,s=r.replace(/[$@]/g,"_"),`ng-reflect-${r=s.replace(It,(...e)=>"-"+e[1].toLowerCase())}`)]=Pt(a))}const i=t.parent,a=Nn(e,i.nodeIndex).renderElement;if(i.element.name)for(let t in n){const i=n[t];null!=i?e.renderer.setAttribute(a,t,i):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var r,s}function Bo(e,t,n,i){no(e,t,n,...i)}function Ho(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function Uo(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class Go{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,i=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=ti(i),i=i.parent;this.elDef=n,this.elView=i}get elOrCompView(){return Nn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Gi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){jo(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&jo(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!ii(e);)e=e.parent;return e.parent?Nn(e.parent,ti(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?ni(this.view,this.nodeDef):ni(this.elView,this.elDef)}logError(e,...t){let n,i;2&this.nodeDef.flags?(n=this.view.def,i=this.nodeDef.nodeIndex):(n=this.elView.def,i=this.elDef.nodeIndex);const r=function(e,t){let n=-1;for(let i=0;i<=t;i++)3&e.nodes[i].flags&&n++;return n}(n,i);let s=-1;n.factory(()=>++s===r?e.error.bind(e,...t):Hn),s<r&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function jo(e,t,n){for(let i in t.references)n[i]=Fs(e,t,t.references[i])}function Wo(e,t,n,i){const r=Ro,s=Oo,o=ko;try{Ro=e;const l=t.apply(n,i);return Oo=s,ko=o,Ro=r,l}catch(a){if(Ke(a)||!Oo)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),Ln(e,t),e}(a,qo())}}function qo(){return Oo?new Go(Oo,ko):null}class Yo{constructor(e){this.delegate=e}createRenderer(e,t){return new Xo(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class Xo{constructor(e){this.delegate=e,this.debugContextFactory=qo,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){vs.delete(e.nativeNode)}(ys(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),i=this.createDebugContext(n);if(i){const t=new gs(n,null,i);t.name=e,_s(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&_s(new ms(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&_s(new ms(t,null,n)),t}appendChild(e,t){const n=ys(e),i=ys(t);n&&i&&n instanceof gs&&n.addChild(i),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const i=ys(e),r=ys(t),s=ys(n);i&&r&&i instanceof gs&&i.insertBefore(s,r),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=ys(e),i=ys(t);n&&i&&n instanceof gs&&n.removeChild(i),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),i=qo();return i&&_s(new gs(n,null,i)),n}setAttribute(e,t,n,i){const r=ys(e);r&&r instanceof gs&&(r.attributes[i?i+":"+t:t]=n),this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){const i=ys(e);i&&i instanceof gs&&(i.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=ys(e);n&&n instanceof gs&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=ys(e);n&&n instanceof gs&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,i){const r=ys(e);r&&r instanceof gs&&(r.styles[t]=n),this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){const i=ys(e);i&&i instanceof gs&&(i.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const i=ys(e);i&&i instanceof gs&&(i.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const i=ys(e);i&&i.listeners.push(new fs(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function Zo(e,t,n){return new $o(e,t,n)}class $o extends Kt{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(uo)return;uo=!0;const e=it()?{setCurrentNode:Do,createRootView:fo,createEmbeddedView:go,createComponentView:vo,createNgModuleRef:yo,overrideProvider:wo,overrideComponentView:Eo,clearOverrides:So,checkAndUpdateView:Ao,checkNoChangesView:Io,destroyView:Po,createDebugContext:(e,t)=>new Go(e,t),handleEvent:No,updateDirectives:Fo,updateRenderer:zo}:{setCurrentNode:()=>{},createRootView:po,createEmbeddedView:qs,createComponentView:Xs,createNgModuleRef:Xi,overrideProvider:Hn,overrideComponentView:Hn,clearOverrides:Hn,checkAndUpdateView:Qs,checkNoChangesView:Js,destroyView:ro,createDebugContext:(e,t)=>new Go(e,t),handleEvent:(e,t,n,i)=>e.def.handleEvent(e,t,n,i),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?To:Co,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?To:Co,e)};Bn.setCurrentNode=e.setCurrentNode,Bn.createRootView=e.createRootView,Bn.createEmbeddedView=e.createEmbeddedView,Bn.createComponentView=e.createComponentView,Bn.createNgModuleRef=e.createNgModuleRef,Bn.overrideProvider=e.overrideProvider,Bn.overrideComponentView=e.overrideComponentView,Bn.clearOverrides=e.clearOverrides,Bn.checkAndUpdateView=e.checkAndUpdateView,Bn.checkNoChangesView=e.checkNoChangesView,Bn.destroyView=e.destroyView,Bn.resolveDep=fr,Bn.createDebugContext=e.createDebugContext,Bn.handleEvent=e.handleEvent,Bn.updateDirectives=e.updateDirectives,Bn.updateRenderer=e.updateRenderer,Bn.dirtyParentQueries=ks}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),i={};for(const r in e.providersByKey)i[r]=e.providersByKey[r];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:i}}(hi(this._ngModuleDefFactory));return Bn.createNgModuleRef(this.moduleType,e||Re.NULL,this._bootstrapComponents,t)}}n("Fv+3");class Ko{}class Jo{}const Qo=(()=>{class e{constructor(t,n){this._subject=new xr,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=e.stripTrailingSlash(ea(i)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+e.normalizeQueryParams(n))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,ea(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(t,n="",i=null){this._platformStrategy.pushState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),i)}replaceState(t,n="",i=null){this._platformStrategy.replaceState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+e.normalizeQueryParams(n)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}return e})();function ea(e){return e.replace(/\/index.html$/,"")}const ta=void 0;var na=["en",[["a","p"],["AM","PM"],ta],[["AM","PM"],ta,ta],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ta,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ta,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ta,"{1} 'at' {0}",ta],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const ia={},ra=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),sa=new Ce("UseV4Plurals");class oa{}const aa=(()=>(class extends oa{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=ia[t];if(n)return n;const i=t.split("-")[0];if(n=ia[i])return n;if("en"===i)return na;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[18]}(t||this.locale)(e)){case ra.Zero:return"zero";case ra.One:return"one";case ra.Two:return"two";case ra.Few:return"few";case ra.Many:return"many";default:return"other"}}}))();class la{}const ca=(()=>(class{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._initialClasses=[]}getValue(){return null}setClass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(zt(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ge(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}))(),ha=(()=>{class e{constructor(e){this._delegate=e}getValue(){return this._delegate.getValue()}}return e.ngDirectiveDef=void 0,e})(),ua=(()=>(class extends ha{constructor(e){super(e)}set klass(e){this._delegate.setClass(e)}set ngClass(e){this._delegate.setNgClass(e)}ngDoCheck(){this._delegate.applyChanges()}}))();class da{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}const pa=(()=>(class{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){it()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new da(null,this._ngForOf,-1,-1),i),r=new fa(e,n);t.push(r)}else if(null==i)this._viewContainer.remove(n);else{const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new fa(e,r);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}))();class fa{constructor(e,t){this.record=e,this.view=t}}const ma=(()=>(class{constructor(e,t){this._viewContainer=e,this._context=new ga,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){va("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){va("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateGuard_ngIf(e,t){return!0}}))();class ga{constructor(){this.$implicit=null,this.ngIf=null}}function va(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ge(t)}'.`)}class ya{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}const _a=(()=>(class{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}))(),ba=(()=>(class{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new ya(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}))(),xa=(()=>(class{constructor(e,t,n){n._addDefault(new ya(e,t))}}))(),wa=(()=>(class{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){this._shouldRecreateView(e)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(e){const t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)}_hasContextShapeChanged(e){const t=Object.keys(e.previousValue||{}),n=Object.keys(e.currentValue||{});if(t.length===n.length){for(let e of n)if(-1===t.indexOf(e))return!0;return!1}return!0}_updateExistingContext(e){for(let t of Object.keys(e))this._viewRef.context[t]=this.ngTemplateOutletContext[t]}}))(),Ea=(()=>(class{}))(),Sa=new Ce("DocumentToken"),Ma="browser";let Ta=null;function Ca(){return Ta}class Aa{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class Ia extends Aa{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Pa={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},La=3,Ra={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oa={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ka=(()=>{if(xe.Node)return xe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}})();class Da extends Ia{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new Da,Ta||(Ta=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Pa}contains(e,t){return ka.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=t[i];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(e,t),i}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const i=this.getStyle(e,t)||"";return n?i==n:i.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,i){e.setAttributeNS(t,n,i)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===La&&Oa.hasOwnProperty(t)&&(t=Oa[t]))}return Ra[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Fa||(Fa=document.querySelector("base"))?Fa.getAttribute("href"):null;return null==t?null:(n=t,Na||(Na=document.createElement("a")),Na.setAttribute("href",n),"/"===Na.pathname.charAt(0)?Na.pathname:"/"+Na.pathname);var n}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,r]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(r)}return null}(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let Na,Fa=null;function za(){return!!window.history.pushState}const Va=(()=>{class e extends Jo{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ca().getLocation(),this._history=Ca().getHistory()}getBaseHrefFromDOM(){return Ca().getBaseHref(this._doc)}onPopState(e){Ca().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ca().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){za()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){za()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.ctorParameters=(()=>[{type:void 0,decorators:[{type:ae,args:[Sa]}]}]),e})(),Ba=new Ce("TRANSITION_ID"),Ha=[{provide:Er,useFactory:function(e,t,n){return()=>{n.get(Sr).donePromise.then(()=>{const n=Ca();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Ba,Sa,Re],multi:!0}];class Ua{static init(){var e;e=new Ua,rs=e}addToWindow(e){xe.getAngularTestability=((t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i}),xe.getAllAngularTestabilities=(()=>e.getAllTestabilities()),xe.getAllAngularRootElements=(()=>e.getAllRootElements()),xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push(e=>{const t=xe.getAllAngularTestabilities();let n=t.length,i=!1;const r=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(r)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?Ca().isShadowRoot(t)?this.findTestabilityInTree(e,Ca().getHost(t),!0):this.findTestabilityInTree(e,Ca().parentElement(t),!0):null}}function Ga(e,t){"undefined"!=typeof COMPILED&&COMPILED||((xe.ng=xe.ng||{})[e]=t)}const ja=(()=>({ApplicationRef:ds,NgZone:Yr}))();function Wa(e){return ys(e)}const qa=new Ce("EventManagerPlugins"),Ya=(()=>(class{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}))();class Xa{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=Ca().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}const Za=(()=>(class{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}))(),$a=(()=>(class extends Za{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ca().remove(e))}}))(),Ka={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ja=/%COMP%/g,Qa="_nghost-%COMP%",el="_ngcontent-%COMP%";function tl(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?tl(e,r,n):(r=r.replace(Ja,e),n.push(r))}return n}function nl(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}const il=(()=>(class{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rl(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case Ze.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new al(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case Ze.Native:case Ze.ShadowDom:return new ll(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=tl(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}))();class rl{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ka[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=`${i}:${t}`;const r=Ka[i];r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Ka[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&rn.DashCase?e.style.setProperty(t,n,i&rn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&rn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){ol(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return ol(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nl(n)):this.eventManager.addEventListener(e,t,nl(n))}}const sl=(()=>"@".charCodeAt(0))();function ol(e,t){if(e.charCodeAt(0)===sl)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class al extends rl{constructor(e,t,n,i){super(e),this.component=n;const r=tl(i+"-"+n.id,n.styles,[]);t.addStyles(r),this.contentAttr=el.replace(Ja,i+"-"+n.id),this.hostAttr=Qa.replace(Ja,i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ll extends rl{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===Ze.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=tl(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const e=document.createElement("style");e.textContent=r[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const cl=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e})(),hl=cl("addEventListener"),ul=cl("removeEventListener"),dl={},pl="__zone_symbol__propagationStopped",fl=(()=>{const e="undefined"!=typeof Zone&&Zone[cl("BLACK_LISTED_EVENTS")];if(e){const t={};return e.forEach(e=>{t[e]=e}),t}})(),ml=function(e){return!!fl&&fl.hasOwnProperty(e)},gl=function(e){const t=dl[e.type];if(!t)return;const n=this[t];if(!n)return;const i=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[pl];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}}},vl=(()=>(class extends Xa{constructor(e,t,n){super(e),this.ngZone=t,n&&function(e){return"server"===e}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[pl]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let i=n;if(!e[hl]||Yr.isInAngularZone()&&!ml(t))e.addEventListener(t,i,!1);else{let n=dl[t];n||(n=dl[t]=cl("ANGULAR"+t+"FALSE"));let r=e[n];const s=r&&r.length>0;r||(r=e[n]=[]);const o=ml(t)?Zone.root:Zone.current;if(0===r.length)r.push({zone:o,handler:i});else{let e=!1;for(let t=0;t<r.length;t++)if(r[t].handler===i){e=!0;break}e||r.push({zone:o,handler:i})}s||e[hl](t,gl,!1)}return()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,n){let i=e[ul];if(!i)return e.removeEventListener.apply(e,[t,n,!1]);let r=dl[t],s=r&&e[r];if(!s)return e.removeEventListener.apply(e,[t,n,!1]);let o=!1;for(let a=0;a<s.length;a++)if(s[a].handler===n){o=!0,s.splice(a,1);break}o?0===s.length&&i.apply(e,[t,gl,!1]):e.removeEventListener.apply(e,[t,n,!1])}}))(),yl={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},_l=new Ce("HammerGestureConfig"),bl=new Ce("HammerLoader"),xl=(()=>(class{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}))(),wl=(()=>(class extends Xa{constructor(e,t,n,i){super(e),this._config=t,this.console=n,this.loader=i}supports(e){return!(!yl.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let i=!1,r=()=>{i=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(r=(()=>{}));i||(r=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),r=(()=>{})}),()=>{r()}}return i.runOutsideAngular(()=>{const r=this._config.buildHammer(e),s=function(e){i.runGuarded(function(){n(e)})};return r.on(t,s),()=>{r.off(t,s),"function"==typeof r.destroy&&r.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}))(),El=["alt","control","meta","shift"],Sl={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Ml=(()=>{class e extends Xa{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const r=e.parseEventName(n),s=e.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ca().onAndCancel(t,r.domEventName,s))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=e._normalizeKey(n.pop());let s="";if(El.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(e){let t="",n=Ca().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),El.forEach(i=>{i!=n&&(0,Sl[i])(e)&&(t+=i+".")}),t+=n}static eventCallback(t,n,i){return r=>{e.getEventFullKey(r)===t&&i.runGuarded(()=>n(r))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e})();class Tl{}const Cl=(()=>(class extends Tl{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case Mt.NONE:return t;case Mt.HTML:return t instanceof Il?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{Et=Et||new rt(e);let i=t?String(t):"";n=Et.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Et.getInertBodyElement(i)}while(i!==s);const o=new _t,a=o.sanitizeChildren(St(n)||n);return it()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const e=St(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case Mt.STYLE:return t instanceof Pl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(At);return t&&at(t[1])===t[1]||e.match(Ct)&&function(e){let t=!0,n=!0;for(let i=0;i<e.length;i++){const r=e.charAt(i);"'"===r&&n?t=!t:'"'===r&&t&&(n=!n)}return t&&n}(e)?e:(it()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case Mt.SCRIPT:if(t instanceof Ll)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case Mt.URL:return t instanceof Ol||t instanceof Rl?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),at(String(t)));case Mt.RESOURCE_URL:if(t instanceof Ol)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof Al)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new Il(e)}bypassSecurityTrustStyle(e){return new Pl(e)}bypassSecurityTrustScript(e){return new Ll(e)}bypassSecurityTrustUrl(e){return new Rl(e)}bypassSecurityTrustResourceUrl(e){return new Ol(e)}}))();class Al{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Il extends Al{getTypeName(){return"HTML"}}class Pl extends Al{getTypeName(){return"Style"}}class Ll extends Al{getTypeName(){return"Script"}}class Rl extends Al{getTypeName(){return"URL"}}class Ol extends Al{getTypeName(){return"ResourceURL"}}const kl=ls(bs,"browser",[{provide:Ir,useValue:Ma},{provide:Ar,useValue:function(){Da.makeCurrent(),Ua.init()},multi:!0},{provide:Jo,useClass:Va,deps:[Sa]},{provide:Sa,useFactory:function(){return document},deps:[]}]);function Dl(){return new et}const Nl=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:Mr,useValue:t.appId},{provide:Ba,useExisting:Mr},Ha]}}}return e})();"undefined"!=typeof window&&window;const Fl=new _(e=>e.complete());function zl(e){return e?function(e){return new _(t=>e.schedule(()=>t.complete()))}(e):Fl}function Vl(...e){let t;return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?Fl:t?Vl(e).pipe(B(e=>t(...e))):new _(t=>new Bl(t,e))}class Bl extends V{constructor(e,t){super(e),this.sources=t,this.completed=0,this.haveValues=0;const n=t.length;this.values=new Array(n);for(let i=0;i<n;i++){const e=z(this,t[i],null,i);e&&this.add(e)}}notifyNext(e,t,n,i,r){this.values[n]=t,r._hasValue||(r._hasValue=!0,this.haveValues++)}notifyComplete(e){const{destination:t,haveValues:n,values:i}=this,r=i.length;e._hasValue?(this.completed++,this.completed===r&&(n===r&&t.next(i),t.complete())):t.complete()}}const Hl=new Ce("NgValueAccessor"),Ul=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),Gl=new Ce("CompositionEventMode"),jl=(()=>(class{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ca()?Ca().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}))();class Wl{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ql extends Wl{get formDirective(){return null}get path(){return null}}function Yl(){throw new Error("unimplemented")}class Xl extends Wl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return Yl()}get asyncValidator(){return Yl()}}class Zl{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}const $l=(()=>(class extends Zl{constructor(e){super(e)}}))(),Kl=(()=>(class extends Zl{constructor(e){super(e)}}))();function Jl(e){return null==e||0===e.length}const Ql=new Ce("NgValidators"),ec=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class tc{static min(e){return t=>{if(Jl(t.value)||Jl(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Jl(t.value)||Jl(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Jl(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Jl(e.value)?null:ec.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Jl(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return tc.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Jl(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(nc);return 0==t.length?null:function(e){return rc(function(e,n){return t.map(t=>t(e))}(e))}}static composeAsync(e){if(!e)return null;const t=e.filter(nc);return 0==t.length?null:function(e){return Vl(function(e,n){return t.map(t=>t(e))}(e).map(ic)).pipe(B(rc))}}}function nc(e){return null!=e}function ic(e){const t=Lt(e)?j(e):e;if(!Rt(t))throw new Error("Expected validator to return Promise or Observable.");return t}function rc(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}function sc(e){return e.validate?t=>e.validate(t):e}function oc(e){return e.validate?t=>e.validate(t):e}const ac=(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),lc=(()=>(class{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}))(),cc=(()=>(class{constructor(e,t,n,i){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=i,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(Xl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=(()=>{e(this.value),this._registry.select(this)})}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}))(),hc={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class uc{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${hc.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${hc.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${hc.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${hc.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${hc.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${hc.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function dc(e,t){return[...t.path,e]}function pc(e,t){e||vc(t,"Cannot find control with"),t.valueAccessor||vc(t,"No value accessor for form control with"),e.validator=tc.compose([e.validator,t.validator]),e.asyncValidator=tc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&fc(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&fc(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function fc(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function mc(e,t){null==e&&vc(t,"Cannot find control with"),e.validator=tc.compose([e.validator,t.validator]),e.asyncValidator=tc.composeAsync([e.asyncValidator,t.asyncValidator])}function gc(e){return vc(e,"There is no FormControl instance attached to form control element with")}function vc(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function yc(e){return null!=e?tc.compose(e.map(sc)):null}function _c(e){return null!=e?tc.composeAsync(e.map(oc)):null}const bc=[Ul,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}))(),ac,(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=Dt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=(t=>{this.value=this._getOptionValue(t),e(this.value)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}))(),(()=>(class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=Dt}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=((e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)})}else t=((e,t)=>{e._setSelected(!1)});this._optionMap.forEach(t)}registerOnChange(e){this.onChange=(t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const i=e.item(t),r=this._getOptionValue(i.value);n.push(r)}}else{const e=t.options;for(let t=0;t<e.length;t++){const i=e.item(t);if(i.selected){const e=this._getOptionValue(i.value);n.push(e)}}}this.value=n,e(n)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}))(),cc];function xc(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function wc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ec="VALID",Sc="INVALID",Mc="PENDING",Tc="DISABLED";function Cc(e){const t=Ic(e)?e.validators:e;return Array.isArray(t)?yc(t):t||null}function Ac(e,t){const n=Ic(t)?t.asyncValidators:e;return Array.isArray(n)?_c(n):n||null}function Ic(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Pc{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===Ec}get invalid(){return this.status===Sc}get pending(){return this.status==Mc}get disabled(){return this.status===Tc}get enabled(){return this.status!==Tc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Cc(e)}setAsyncValidators(e){this.asyncValidator=Ac(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Mc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ec,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign({},e,{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Ec&&this.status!==Mc||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tc:Ec}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Mc;const t=ic(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof Rc?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Oc&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new xr,this.statusChanges=new xr}_calculateStatus(){return this._allControlsDisabled()?Tc:this.errors?Sc:this._anyControlsHaveStatus(Mc)?Mc:this._anyControlsHaveStatus(Sc)?Sc:Ec}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ic(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Lc extends Pc{constructor(e=null,t,n){super(Cc(t),Ac(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Rc extends Pc{constructor(e,t,n){super(Cc(t),Ac(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Lc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,i)=>{t=t||this.contains(i)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Oc extends Pc{constructor(e,t,n){super(Cc(t),Ac(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Lc?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const kc=(()=>Promise.resolve(null))(),Dc=(()=>(class extends ql{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new xr,this.form=new Rc({},yc(e),_c(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){kc.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),pc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){kc.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),wc(this._directives,e)})}addFormGroup(e){kc.then(()=>{const t=this._findContainer(e.path),n=new Rc({});mc(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){kc.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){kc.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,xc(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}))(),Nc=new Ce("NgFormSelectorWarning");class Fc extends ql{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return dc(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return yc(this._validators)}get asyncValidator(){return _c(this._asyncValidators)}_checkParentType(){}}const zc=(()=>(class{}))(),Vc=new Ce("NgModelWithFormControlWarning"),Bc=(()=>(class extends ql{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new xr}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return pc(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){wc(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);mc(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);mc(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,xc(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>gc(t)),t.valueAccessor.registerOnTouched(()=>gc(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&pc(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=yc(this._validators);this.form.validator=tc.compose([this.form.validator,e]);const t=_c(this._asyncValidators);this.form.asyncValidator=tc.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||uc.missingFormException()}}))(),Hc=(()=>(class extends Fc{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){Gc(this._parent)&&uc.groupParentException()}}))(),Uc=(()=>(class extends ql{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return dc(this.name,this._parent)}get validator(){return yc(this._validators)}get asyncValidator(){return _c(this._asyncValidators)}_checkParentType(){Gc(this._parent)&&uc.arrayParentException()}}))();function Gc(e){return!(e instanceof Hc||e instanceof Bc||e instanceof Uc)}const jc=(()=>{class e extends Xl{constructor(e,t,n,i,r){super(),this._ngModelWarningConfig=r,this._added=!1,this.update=new xr,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||vc(e,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return t.forEach(t=>{t.constructor===jl?n=t:function(e){return bc.some(t=>e.constructor===t)}(t)?(i&&vc(e,"More than one built-in value accessor matches form control with"),i=t):(r&&vc(e,"More than one custom value accessor matches form control with"),r=t)}),r||i||n||(vc(e,"No valid value accessor for form control with"),null)}(this,i)}set isDisabled(e){uc.disabledAttrWarning()}ngOnChanges(t){var n,i;this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Dt(t,n.currentValue)}(t,this.viewModel)&&("formControlName",n=e,this,i=this._ngModelWarningConfig,it()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(uc.ngModelWarning("formControlName"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return dc(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return yc(this._rawValidators)}get asyncValidator(){return _c(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof Hc)&&this._parent instanceof Fc?uc.ngModelGroupException():this._parent instanceof Hc||this._parent instanceof Bc||this._parent instanceof Uc||uc.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e._ngModelWarningSentOnce=!1,e})(),Wc=(()=>(class{get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!==`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?tc.required(e):null}registerOnValidatorChange(e){this._onChange=e}}))(),qc=(()=>(class{}))(),Yc=(()=>(class{group(e,t=null){const n=this._reduceControls(e);let i=null,r=null,s=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,r=null!=t.asyncValidators?t.asyncValidators:null,s=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,r=null!=t.asyncValidator?t.asyncValidator:null)),new Rc(n,{asyncValidators:r,updateOn:s,validators:i})}control(e,t,n){return new Lc(e,t,n)}array(e,t,n){const i=e.map(e=>this._createControl(e));return new Oc(i,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Lc||e instanceof Rc||e instanceof Oc?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}))(),Xc=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Nc,useValue:t.warnOnDeprecatedNgFormSelector}]}}}return e})(),Zc=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Vc,useValue:t.warnOnNgModelWithFormControl}]}}}return e})();void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});var $c=0,Kc=1,Jc=2,Qc=1,eh=2,th=3,nh=0,ih=1,rh=2,sh=0,oh=1,ah=2,lh=0,ch=1,hh=2,uh=3,dh=4,ph=5,fh=100,mh=101,gh=102,vh=103,yh=104,_h=200,bh=201,xh=202,wh=203,Eh=204,Sh=205,Mh=206,Th=207,Ch=208,Ah=209,Ih=210,Ph=0,Lh=1,Rh=2,Oh=3,kh=4,Dh=5,Nh=6,Fh=7,zh=0,Vh=1,Bh=2,Hh=0,Uh=1,Gh=2,jh=3,Wh=4,qh=5,Yh=301,Xh=302,Zh=303,$h=304,Kh=305,Jh=306,Qh=307,eu=1e3,tu=1001,nu=1002,iu=1003,ru=1004,su=1005,ou=1006,au=1007,lu=1008,cu=1009,hu=1010,uu=1011,du=1012,pu=1013,fu=1014,mu=1015,gu=1016,vu=1017,yu=1018,_u=1019,bu=1020,xu=1021,wu=1022,Eu=1023,Su=1024,Mu=1025,Tu=Eu,Cu=1026,Au=1027,Iu=1028,Pu=1029,Lu=1030,Ru=1031,Ou=1032,ku=1033,Du=33776,Nu=33777,Fu=33778,zu=33779,Vu=35840,Bu=35841,Hu=35842,Uu=35843,Gu=36196,ju=37808,Wu=37809,qu=37810,Yu=37811,Xu=37812,Zu=37813,$u=37814,Ku=37815,Ju=37816,Qu=37817,ed=37818,td=37819,nd=37820,id=37821,rd=2201,sd=2400,od=3e3,ad=3001,ld=3007,cd=3002,hd=3003,ud=3004,dd=3005,pd=3006,fd=3200,md=3201,gd=0,vd=1,yd=7680,_d=519,bd=35044;function xd(){}Object.assign(xd.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});for(var wd=[],Ed=0;Ed<256;Ed++)wd[Ed]=(Ed<16?"0":"")+Ed.toString(16);var Sd={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(wd[255&e]+wd[e>>8&255]+wd[e>>16&255]+wd[e>>24&255]+"-"+wd[255&t]+wd[t>>8&255]+"-"+wd[t>>16&15|64]+wd[t>>24&255]+"-"+wd[63&n|128]+wd[n>>8&255]+"-"+wd[n>>16&255]+wd[n>>24&255]+wd[255&i]+wd[i>>8&255]+wd[i>>16&255]+wd[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Sd.DEG2RAD},radToDeg:function(e){return e*Sd.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Md(e,t){this.x=e||0,this.y=t||0}function Td(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(Md.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Md.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}}),Object.assign(Td,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,s,o){var a=n[i+0],l=n[i+1],c=n[i+2],h=n[i+3],u=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(h!==f||a!==u||l!==d||c!==p){var m=1-o,g=a*u+l*d+c*p+h*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,o=Math.sin(o*b)/_}var x=o*v;if(a=a*m+u*x,l=l*m+d*x,c=c*m+p*x,h=h*m+f*x,m===1-o){var w=1/Math.sqrt(a*a+l*l+c*c+h*h);a*=w,l*=w,c*=w,h*=w}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=h}}),Object.defineProperties(Td.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Td.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,s=e.order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),h=o(r/2),u=a(n/2),d=a(i/2),p=a(r/2);return"XYZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"YXZ"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"ZXY"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h-u*d*p):"ZYX"===s?(this._x=u*c*h-l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h+u*d*p):"YZX"===s?(this._x=u*c*h+l*d*p,this._y=l*d*h+u*c*p,this._z=l*c*p-u*d*h,this._w=l*c*h-u*d*p):"XZY"===s&&(this._x=u*c*h-l*d*p,this._y=l*d*h-u*c*p,this._z=l*c*p+u*d*h,this._w=l*c*h+u*d*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(h-l)*t,this._y=(s-c)*t,this._z=(o-r)*t):i>a&&i>u?(t=2*Math.sqrt(1+i-a-u),this._w=(h-l)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(s+c)/t):a>u?(t=2*Math.sqrt(1+a-i-u),this._w=(s-c)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(l+h)/t):(t=2*Math.sqrt(1+u-i-a),this._w=(o-r)/t,this._x=(s+c)/t,this._y=(l+h)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Sd.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,s=this._w,o=s*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;var a=1-o*o;if(a<=Number.EPSILON){var l=1-t;return this._w=l*s+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),h=Math.atan2(c,o),u=Math.sin((1-t)*h)/c,d=Math.sin(t*h)/c;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=i*u+this._y*d,this._z=r*u+this._z*d,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Cd=new Id,Ad=new Td;function Id(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(Id.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ad.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Ad.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*i-o*n,c=a*n+o*t-r*i,h=a*i+r*n-s*t,u=-r*t-s*n-o*i;return this.x=l*a+u*-r+c*-o-h*-s,this.y=c*a+u*-s+h*-r-l*-o,this.z=h*a+u*-o+l*-s-c*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,s=t.x,o=t.y,a=t.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return Cd.copy(this).projectOnVector(e),this.sub(Cd)},reflect:function(e){return this.sub(Cd.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());0===t&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(e)/t;return Math.acos(Sd.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Pd,Ld=new Id;function Rd(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Rd.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,s,o,a,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Ld.x=e.getX(t),Ld.y=e.getY(t),Ld.z=e.getZ(t),Ld.applyMatrix3(this),e.setXYZ(t,Ld.x,Ld.y,Ld.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7],u=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],_=i[7],b=i[2],x=i[5],w=i[8];return r[0]=s*f+o*v+a*b,r[3]=s*m+o*y+a*x,r[6]=s*g+o*_+a*w,r[1]=l*f+c*v+h*b,r[4]=l*m+c*y+h*x,r[7]=l*g+c*_+h*w,r[2]=u*f+d*v+p*b,r[5]=u*m+d*y+p*x,r[8]=u*g+d*_+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-n*r*c+n*o*a+i*r*l-i*s*a},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],p=d*l-c*u,f=c*h-d*a,m=u*a-l*h,g=r*p+s*f+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=p*y,i[1]=(o*u-d*s)*y,i[2]=(c*s-o*l)*y,i[3]=f*y,i[4]=(d*r-o*h)*y,i[5]=(o*a-c*r)*y,i[6]=m*y,i[7]=(s*h-u*r)*y,i[8]=(l*r-s*a)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,s,o){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*s+l*o)+s+e,-i*l,i*a,-i*(-l*s+a*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],s=i[3],o=i[6],a=i[1],l=i[4],c=i[7];return i[0]=t*r+n*a,i[3]=t*s+n*l,i[6]=t*o+n*c,i[1]=-n*r+t*a,i[4]=-n*s+t*l,i[7]=-n*o+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Od={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Pd&&(Pd=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Pd.width=e.width,Pd.height=e.height;var n=Pd.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Pd}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},kd=0;function Dd(e,t,n,i,r,s,o,a,l,c){Object.defineProperty(this,"id",{value:kd++}),this.uuid=Sd.generateUUID(),this.name="",this.image=void 0!==e?e:Dd.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Dd.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:tu,this.wrapT=void 0!==i?i:tu,this.magFilter=void 0!==r?r:ou,this.minFilter=void 0!==s?s:lu,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Eu,this.internalFormat=null,this.type=void 0!==a?a:cu,this.offset=new Md(0,0),this.repeat=new Md(1,1),this.center=new Md(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rd,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:od,this.version=0,this.onUpdate=null}function Nd(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function Fd(e,t,n){this.width=e,this.height=t,this.scissor=new Nd(0,0,e,t),this.scissorTest=!1,this.viewport=new Nd(0,0,e,t),this.texture=new Dd(void 0,void 0,(n=n||{}).wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ou,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function zd(e,t,n){Fd.call(this,e,t,n),this.samples=4}Dd.DEFAULT_IMAGE=void 0,Dd.DEFAULT_MAPPING=300,Dd.prototype=Object.assign(Object.create(xd.prototype),{constructor:Dd,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=Sd.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var s=0,o=i.length;s<o;s++)r.push(Od.getDataURL(i[s]))}else r=Od.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case eu:e.x=e.x-Math.floor(e.x);break;case tu:e.x=e.x<0?0:1;break;case nu:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case eu:e.y=e.y-Math.floor(e.y);break;case tu:e.y=e.y<0?0:1;break;case nu:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Dd.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Nd.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Nd.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(f+1)/2,y=(a+c)/4,_=(l+d)/4,b=(u+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=_/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=b/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=_/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,t),this}var x=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(x)<.001&&(x=1),this.x=(p-u)/x,this.y=(l-d)/x,this.z=(c-a)/x,this.w=Math.acos((o+h+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Fd.prototype=Object.assign(Object.create(xd.prototype),{constructor:Fd,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),zd.prototype=Object.assign(Object.create(Fd.prototype),{constructor:zd,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Fd.prototype.copy.call(this,e),this.samples=e.samples,this}});var Vd=new Id,Bd=new qd,Hd=new Id(0,0,0),Ud=new Id(1,1,1),Gd=new Id,jd=new Id,Wd=new Id;function qd(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(qd.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,s,o,a,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new qd).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/Vd.setFromMatrixColumn(e,0).length(),r=1/Vd.setFromMatrixColumn(e,1).length(),s=1/Vd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===e.order){var u=s*c,d=s*h,p=o*c,f=o*h;t[0]=a*c,t[4]=-a*h,t[8]=l,t[1]=d+p*l,t[5]=u-f*l,t[9]=-o*a,t[2]=f-u*l,t[6]=p+d*l,t[10]=s*a}else if("YXZ"===e.order){var m=a*h,g=l*c;t[0]=(v=a*c)+(y=l*h)*o,t[4]=g*o-m,t[8]=s*l,t[1]=s*h,t[5]=s*c,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=s*a}else if("ZXY"===e.order){var v,y;m=a*h,g=l*c,t[0]=(v=a*c)-(y=l*h)*o,t[4]=-s*h,t[8]=g+m*o,t[1]=m+g*o,t[5]=s*c,t[9]=y-v*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if("ZYX"===e.order)u=s*c,d=s*h,p=o*c,f=o*h,t[0]=a*c,t[4]=p*l-d,t[8]=u*l+f,t[1]=a*h,t[5]=f*l+u,t[9]=d*l-p,t[2]=-l,t[6]=o*a,t[10]=s*a;else if("YZX"===e.order){var _=s*a,b=s*l,x=o*a,w=o*l;t[0]=a*c,t[4]=w-_*h,t[8]=x*h+b,t[1]=h,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=b*h+x,t[10]=_-w*h}else"XZY"===e.order&&(_=s*a,b=s*l,x=o*a,w=o*l,t[0]=a*c,t[4]=-h,t[8]=l*c,t[1]=_*h+w,t[5]=s*c,t[9]=b*h-x,t[2]=x*h-b,t[6]=o*c,t[10]=w*h+_);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Hd,e,Ud)},lookAt:function(e,t,n){var i=this.elements;return Wd.subVectors(e,t),0===Wd.lengthSq()&&(Wd.z=1),Wd.normalize(),Gd.crossVectors(n,Wd),0===Gd.lengthSq()&&(1===Math.abs(n.z)?Wd.x+=1e-4:Wd.z+=1e-4,Wd.normalize(),Gd.crossVectors(n,Wd)),Gd.normalize(),jd.crossVectors(Wd,Gd),i[0]=Gd.x,i[4]=jd.x,i[8]=Wd.x,i[1]=Gd.y,i[5]=jd.y,i[9]=Wd.y,i[2]=Gd.z,i[6]=jd.z,i[10]=Wd.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],h=n[5],u=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=i[0],w=i[4],E=i[8],S=i[12],M=i[1],T=i[5],C=i[9],A=i[13],I=i[2],P=i[6],L=i[10],R=i[14],O=i[3],k=i[7],D=i[11],N=i[15];return r[0]=s*x+o*M+a*I+l*O,r[4]=s*w+o*T+a*P+l*k,r[8]=s*E+o*C+a*L+l*D,r[12]=s*S+o*A+a*R+l*N,r[1]=c*x+h*M+u*I+d*O,r[5]=c*w+h*T+u*P+d*k,r[9]=c*E+h*C+u*L+d*D,r[13]=c*S+h*A+u*R+d*N,r[2]=p*x+f*M+m*I+g*O,r[6]=p*w+f*T+m*P+g*k,r[10]=p*E+f*C+m*L+g*D,r[14]=p*S+f*A+m*R+g*N,r[3]=v*x+y*M+_*I+b*O,r[7]=v*w+y*T+_*P+b*k,r[11]=v*E+y*C+_*L+b*D,r[15]=v*S+y*A+_*R+b*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Vd.x=e.getX(t),Vd.y=e.getY(t),Vd.z=e.getZ(t),Vd.applyMatrix4(this),e.setXYZ(t,Vd.x,Vd.y,Vd.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+r*a*h-i*l*h-r*o*u+n*l*u+i*o*d-n*a*d)+e[7]*(+t*a*d-t*l*u+r*s*u-i*s*d+i*l*c-r*a*c)+e[11]*(+t*l*h-t*o*d-r*s*h+n*s*d+r*o*c-n*l*c)+e[15]*(-i*o*c-t*a*h+t*o*u+i*s*h-n*s*u+n*a*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],_=i[15],b=p*y*u-v*f*u+v*h*m-c*y*m-p*h*_+c*f*_,x=g*f*u-d*y*u-g*h*m+l*y*m+d*h*_-l*f*_,w=d*v*u-g*p*u+g*c*m-l*v*m-d*c*_+l*p*_,E=g*p*h-d*v*h-g*c*f+l*v*f+d*c*y-l*p*y,S=r*b+s*x+o*w+a*E;if(0===S){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(M);return console.warn(M),this.identity()}var T=1/S;return n[0]=b*T,n[1]=(v*f*a-p*y*a-v*o*m+s*y*m+p*o*_-s*f*_)*T,n[2]=(c*y*a-v*h*a+v*o*u-s*y*u-c*o*_+s*h*_)*T,n[3]=(p*h*a-c*f*a-p*o*u+s*f*u+c*o*m-s*h*m)*T,n[4]=x*T,n[5]=(d*y*a-g*f*a+g*o*m-r*y*m-d*o*_+r*f*_)*T,n[6]=(g*h*a-l*y*a-g*o*u+r*y*u+l*o*_-r*h*_)*T,n[7]=(l*f*a-d*h*a+d*o*u-r*f*u-l*o*m+r*h*m)*T,n[8]=w*T,n[9]=(g*p*a-d*v*a-g*s*m+r*v*m+d*s*_-r*p*_)*T,n[10]=(l*v*a-g*c*a+g*s*u-r*v*u-l*s*_+r*c*_)*T,n[11]=(d*c*a-l*p*a-d*s*u+r*p*u+l*s*m-r*c*m)*T,n[12]=E*T,n[13]=(d*v*o-g*p*o+g*s*f-r*v*f-d*s*y+r*p*y)*T,n[14]=(g*c*o-l*v*o-g*s*h+r*v*h+l*s*y-r*c*y)*T,n[15]=(l*p*o-d*c*o+d*s*h-r*p*h-l*s*f+r*c*f)*T,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,o=e.y,a=e.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,s=t._y,o=t._z,a=t._w,l=r+r,c=s+s,h=o+o,u=r*l,d=r*c,p=r*h,f=s*c,m=s*h,g=o*h,v=a*l,y=a*c,_=a*h,b=n.x,x=n.y,w=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+_)*b,i[2]=(p-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(u+g))*x,i[6]=(m+v)*x,i[7]=0,i[8]=(p+y)*w,i[9]=(m-v)*w,i[10]=(1-(u+f))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){var i=this.elements,r=Vd.set(i[0],i[1],i[2]).length(),s=Vd.set(i[4],i[5],i[6]).length(),o=Vd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Bd.copy(this);var a=1/r,l=1/s,c=1/o;return Bd.elements[0]*=a,Bd.elements[1]*=a,Bd.elements[2]*=a,Bd.elements[4]*=l,Bd.elements[5]*=l,Bd.elements[6]*=l,Bd.elements[8]*=c,Bd.elements[9]*=c,Bd.elements[10]*=c,t.setFromRotationMatrix(Bd),n.x=r,n.y=s,n.z=o,this},makePerspective:function(e,t,n,i,r,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,a=2*r/(n-i),l=(t+e)/(t-e),c=(n+i)/(n-i),h=-(s+r)/(s-r),u=-2*s*r/(s-r);return o[0]=2*r/(t-e),o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=a,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=u,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,s){var o=this.elements,a=1/(t-e),l=1/(n-i),c=1/(s-r),h=(t+e)*a,u=(n+i)*l,d=(s+r)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Yd=new qd,Xd=new Td;function Zd(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Zd.DefaultOrder}function $d(){this.mask=1}Zd.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Zd.DefaultOrder="XYZ",Object.defineProperties(Zd.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Zd.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Sd.clamp,r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s))):"ZYX"===t?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,p))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Yd.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Yd,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Xd.setFromEuler(this),this.setFromQuaternion(Xd,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Id(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign($d.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var Kd=0,Jd=new Id,Qd=new Td,ep=new qd,tp=new Id,np=new Id,ip=new Id,rp=new Td,sp=new Id(1,0,0),op=new Id(0,1,0),ap=new Id(0,0,1),lp={type:"added"},cp={type:"removed"};function hp(){Object.defineProperty(this,"id",{value:Kd++}),this.uuid=Sd.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hp.DefaultUp.clone();var e=new Id,t=new Zd,n=new Td,i=new Id(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new qd},normalMatrix:{value:new Rd}}),this.matrix=new qd,this.matrixWorld=new qd,this.matrixAutoUpdate=hp.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $d,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function up(){hp.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}hp.DefaultUp=new Id(0,1,0),hp.DefaultMatrixAutoUpdate=!0,hp.prototype=Object.assign(Object.create(xd.prototype),{constructor:hp,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Qd.setFromAxisAngle(e,t),this.quaternion.multiply(Qd),this},rotateOnWorldAxis:function(e,t){return Qd.setFromAxisAngle(e,t),this.quaternion.premultiply(Qd),this},rotateX:function(e){return this.rotateOnAxis(sp,e)},rotateY:function(e){return this.rotateOnAxis(op,e)},rotateZ:function(e){return this.rotateOnAxis(ap,e)},translateOnAxis:function(e,t){return Jd.copy(e).applyQuaternion(this.quaternion),this.position.add(Jd.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(sp,e)},translateY:function(e){return this.translateOnAxis(op,e)},translateZ:function(e){return this.translateOnAxis(ap,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(ep.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?tp.copy(e):tp.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),np.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ep.lookAt(np,tp,this.up):ep.lookAt(tp,np,this.up),this.quaternion.setFromRotationMatrix(ep),i&&(ep.extractRotation(i.matrixWorld),Qd.setFromRotationMatrix(ep),this.quaternion.premultiply(Qd.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(lp)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(cp)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),ep.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ep.multiply(e.parent.matrixWorld)),e.applyMatrix(ep),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Id),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Td),this.updateMatrixWorld(!0),this.matrixWorld.decompose(np,e,ip),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Id),this.updateMatrixWorld(!0),this.matrixWorld.decompose(np,rp,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Id),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var o=s.shapes;if(Array.isArray(o))for(var a=0,l=o.length;a<l;a++)r(e.shapes,o[a]);else r(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(a=0,l=this.material.length;a<l;a++)c.push(r(e.materials,this.material[a]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0)for(i.children=[],a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object);if(t){var h=f(e.geometries),u=f(e.materials),d=f(e.textures),p=f(e.images);o=f(e.shapes),h.length>0&&(n.geometries=h),u.length>0&&(n.materials=u),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function f(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++)this.add(e.children[n].clone());return this}}),up.prototype=Object.assign(Object.create(hp.prototype),{constructor:up,isScene:!0,copy:function(e,t){return hp.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=hp.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var dp=[new Id,new Id,new Id,new Id,new Id,new Id,new Id,new Id],pp=new Id,fp=new Mp,mp=new Id,gp=new Id,vp=new Id,yp=new Id,_p=new Id,bp=new Id,xp=new Id,wp=new Id,Ep=new Id,Sp=new Id;function Mp(e,t){this.min=void 0!==e?e:new Id(1/0,1/0,1/0),this.max=void 0!==t?t:new Id(-1/0,-1/0,-1/0)}function Tp(e,t,n,i,r){var s,o;for(s=0,o=e.length-3;s<=o;s+=3){Sp.fromArray(e,s);var a=r.x*Math.abs(Sp.x)+r.y*Math.abs(Sp.y)+r.z*Math.abs(Sp.z),l=t.dot(Sp),c=n.dot(Sp),h=i.dot(Sp);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}Object.assign(Mp.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=e.length;a<l;a+=3){var c=e[a],h=e[a+1],u=e[a+2];c<t&&(t=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,s,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0,a=0,l=e.count;a<l;a++){var c=e.getX(a),h=e.getY(a),u=e.getZ(a);c<t&&(t=c),h<n&&(n=h),u<i&&(i=u),c>r&&(r=c),h>s&&(s=h),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,s,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=pp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Id),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Id),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),fp.copy(t.boundingBox),fp.applyMatrix4(e.matrixWorld),this.expandByPoint(fp.min),this.expandByPoint(fp.max));for(var n=e.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Id),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,pp),pp.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(xp),wp.subVectors(this.max,xp),mp.subVectors(e.a,xp),gp.subVectors(e.b,xp),vp.subVectors(e.c,xp),yp.subVectors(gp,mp),_p.subVectors(vp,gp),bp.subVectors(mp,vp);var t=[0,-yp.z,yp.y,0,-_p.z,_p.y,0,-bp.z,bp.y,yp.z,0,-yp.x,_p.z,0,-_p.x,bp.z,0,-bp.x,-yp.y,yp.x,0,-_p.y,_p.x,0,-bp.y,bp.x,0];return!!Tp(t,mp,gp,vp,wp)&&!!Tp(t=[1,0,0,0,1,0,0,0,1],mp,gp,vp,wp)&&(Ep.crossVectors(yp,_p),Tp(t=[Ep.x,Ep.y,Ep.z],mp,gp,vp,wp))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Id),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return pp.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(pp).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(dp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),dp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),dp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),dp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),dp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),dp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),dp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),dp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(dp),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Cp=new Mp;function Ap(e,t){this.center=void 0!==e?e:new Id,this.radius=void 0!==t?t:0}Object.assign(Ap.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):Cp.setFromPoints(e).getCenter(n);for(var i=0,r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Id),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Mp),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Ip=new Id,Pp=new Id,Lp=new Id,Rp=new Id,Op=new Id,kp=new Id,Dp=new Id;function Np(e,t){this.origin=void 0!==e?e:new Id,this.direction=void 0!==t?t:new Id(0,0,-1)}Object.assign(Np.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Id),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Ip)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Id),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Ip.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ip.copy(this.direction).multiplyScalar(t).add(this.origin),Ip.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){Pp.copy(e).add(t).multiplyScalar(.5),Lp.copy(t).sub(e).normalize(),Rp.copy(this.origin).sub(Pp);var r,s,o,a,l=.5*e.distanceTo(t),c=-this.direction.dot(Lp),h=Rp.dot(this.direction),u=-Rp.dot(Lp),d=Rp.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(s=c*h-u,a=l*p,(r=c*u-h)>=0)if(s>=-a)if(s<=a){var f=1/p;o=(r*=f)*(r+c*(s*=f)+2*h)+s*(c*r+s+2*u)+d}else s=l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s=-l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;else s<=-a?o=-(r=Math.max(0,-(-c*l+h)))*r+(s=r>0?-l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d:s<=a?(r=0,o=(s=Math.min(Math.max(-l,-u),l))*(s+2*u)+d):o=-(r=Math.max(0,-(c*l+h)))*r+(s=r>0?l:Math.min(Math.max(-l,-u),l))*(s+2*u)+d;else s=c>0?-l:l,o=-(r=Math.max(0,-(c*s+h)))*r+s*(s+2*u)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Lp).multiplyScalar(s).add(Pp),o},intersectSphere:function(e,t){Ip.subVectors(e.center,this.origin);var n=Ip.dot(this.direction),i=Ip.dot(Ip)-n*n,r=e.radius*e.radius;if(i>r)return null;var s=Math.sqrt(r-i),o=n-s,a=n+s;return o<0&&a<0?null:this.at(o<0?a:o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,s,o,a,l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(r=(e.min.y-u.y)*c,s=(e.max.y-u.y)*c):(r=(e.max.y-u.y)*c,s=(e.min.y-u.y)*c),n>s||r>i?null:((r>n||n!=n)&&(n=r),(s<i||i!=i)&&(i=s),h>=0?(o=(e.min.z-u.z)*h,a=(e.max.z-u.z)*h):(o=(e.max.z-u.z)*h,a=(e.min.z-u.z)*h),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Ip)},intersectTriangle:function(e,t,n,i,r){Op.subVectors(t,e),kp.subVectors(n,e),Dp.crossVectors(Op,kp);var s,o=this.direction.dot(Dp);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Rp.subVectors(this.origin,e);var a=s*this.direction.dot(kp.crossVectors(Rp,kp));if(a<0)return null;var l=s*this.direction.dot(Op.cross(Rp));if(l<0)return null;if(a+l>o)return null;var c=-s*Rp.dot(Dp);return c<0?null:this.at(c/o,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Fp=new Id,zp=new Id,Vp=new Rd;function Bp(e,t){this.normal=void 0!==e?e:new Id(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Bp.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var i=Fp.subVectors(n,t).cross(zp.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Id),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Id);var n=e.delta(Fp),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Id),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||Vp.getNormalMatrix(e),i=this.coplanarPoint(Fp).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Hp=new Id,Up=new Id,Gp=new Id,jp=new Id,Wp=new Id,qp=new Id,Yp=new Id,Xp=new Id,Zp=new Id,$p=new Id;function Kp(e,t,n){this.a=void 0!==e?e:new Id,this.b=void 0!==t?t:new Id,this.c=void 0!==n?n:new Id}Object.assign(Kp,{getNormal:function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Id),i.subVectors(n,t),Hp.subVectors(e,t),i.cross(Hp);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){Hp.subVectors(i,t),Up.subVectors(n,t),Gp.subVectors(e,t);var s=Hp.dot(Hp),o=Hp.dot(Up),a=Hp.dot(Gp),l=Up.dot(Up),c=Up.dot(Gp),h=s*l-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Id),0===h)return r.set(-2,-1,-1);var u=1/h,d=(l*a-o*c)*u,p=(s*c-o*a)*u;return r.set(1-d-p,p,d)},containsPoint:function(e,t,n,i){return Kp.getBarycoord(e,t,n,i,jp),jp.x>=0&&jp.y>=0&&jp.x+jp.y<=1},getUV:function(e,t,n,i,r,s,o,a){return this.getBarycoord(e,t,n,i,jp),a.set(0,0),a.addScaledVector(r,jp.x),a.addScaledVector(s,jp.y),a.addScaledVector(o,jp.z),a},isFrontFacing:function(e,t,n,i){return Hp.subVectors(n,t),Up.subVectors(e,t),Hp.cross(Up).dot(i)<0}}),Object.assign(Kp.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Hp.subVectors(this.c,this.b),Up.subVectors(this.a,this.b),.5*Hp.cross(Up).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Id),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Kp.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Bp),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Kp.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return Kp.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return Kp.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Kp.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Id);var n,i,r=this.a,s=this.b,o=this.c;Wp.subVectors(s,r),qp.subVectors(o,r),Xp.subVectors(e,r);var a=Wp.dot(Xp),l=qp.dot(Xp);if(a<=0&&l<=0)return t.copy(r);Zp.subVectors(e,s);var c=Wp.dot(Zp),h=qp.dot(Zp);if(c>=0&&h<=c)return t.copy(s);var u=a*h-c*l;if(u<=0&&a>=0&&c<=0)return n=a/(a-c),t.copy(r).addScaledVector(Wp,n);$p.subVectors(e,o);var d=Wp.dot($p),p=qp.dot($p);if(p>=0&&d<=p)return t.copy(o);var f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),t.copy(r).addScaledVector(qp,i);var m=c*p-d*h;if(m<=0&&h-c>=0&&d-p>=0)return Yp.subVectors(o,s),i=(h-c)/(h-c+(d-p)),t.copy(s).addScaledVector(Yp,i);var g=1/(m+f+u);return n=f*g,i=u*g,t.copy(r).addScaledVector(Wp,n).addScaledVector(qp,i)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Jp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qp={h:0,s:0,l:0},ef={h:0,s:0,l:0};function tf(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function nf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function rf(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function sf(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function of(e,t,n,i,r,s){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Id,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new tf,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}Object.assign(tf.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Sd.euclideanModulo(e,1),t=Sd.clamp(t,0,1),n=Sd.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=nf(r,i,e+1/3),this.g=nf(r,i,e),this.b=nf(r,i,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[2];switch(n[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var s=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(s,o,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=Jp[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=rf(e.r),this.g=rf(e.g),this.b=rf(e.b),this},copyLinearToSRGB:function(e){return this.r=sf(e.r),this.g=sf(e.g),this.b=sf(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,s=this.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l=(a+o)/2;if(a===o)t=0,n=0;else{var c=o-a;switch(n=l<=.5?c/(o+a):c/(2-o-a),o){case i:t=(r-s)/c+(r<s?6:0);break;case r:t=(s-i)/c+2;break;case s:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(Qp),Qp.h+=e,Qp.s+=t,Qp.l+=n,this.setHSL(Qp.h,Qp.s,Qp.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Qp),e.getHSL(ef);var n=Sd.lerp(Qp.h,ef.h,t),i=Sd.lerp(Qp.s,ef.s,t),r=Sd.lerp(Qp.l,ef.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),tf.NAMES=Jp,Object.assign(of.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var af=0;function lf(){Object.defineProperty(this,"id",{value:af++}),this.uuid=Sd.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ch,this.side=nh,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=sh,this.opacity=1,this.transparent=!1,this.blendSrc=Eh,this.blendDst=Sh,this.blendEquation=fh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Oh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_d,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yd,this.stencilZFail=yd,this.stencilZPass=yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function cf(e){lf.call(this),this.type="MeshBasicMaterial",this.color=new tf(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}lf.prototype=Object.assign(Object.create(xd.prototype),{constructor:lf,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ch&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==nh&&(n.side=this.side),this.vertexColors!==sh&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(lf.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),(cf.prototype=Object.create(lf.prototype)).constructor=cf,cf.prototype.isMeshBasicMaterial=!0,cf.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var hf=new Id;function uf(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=bd,this.updateRange={offset:0,count:-1},this.version=0}function df(e,t,n){uf.call(this,new Int8Array(e),t,n)}function pf(e,t,n){uf.call(this,new Uint8Array(e),t,n)}function ff(e,t,n){uf.call(this,new Uint8ClampedArray(e),t,n)}function mf(e,t,n){uf.call(this,new Int16Array(e),t,n)}function gf(e,t,n){uf.call(this,new Uint16Array(e),t,n)}function vf(e,t,n){uf.call(this,new Int32Array(e),t,n)}function yf(e,t,n){uf.call(this,new Uint32Array(e),t,n)}function _f(e,t,n){uf.call(this,new Float32Array(e),t,n)}function bf(e,t,n){uf.call(this,new Float64Array(e),t,n)}function xf(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function wf(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(uf.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(uf.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new tf),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Md),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new Id),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Nd),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this},applyMatrix3:function(e){for(var t=0,n=this.count;t<n;t++)hf.x=this.getX(t),hf.y=this.getY(t),hf.z=this.getZ(t),hf.applyMatrix3(e),this.setXYZ(t,hf.x,hf.y,hf.z);return this},applyMatrix4:function(e){for(var t=0,n=this.count;t<n;t++)hf.x=this.getX(t),hf.y=this.getY(t),hf.z=this.getZ(t),hf.applyMatrix4(e),this.setXYZ(t,hf.x,hf.y,hf.z);return this},applyNormalMatrix:function(e){for(var t=0,n=this.count;t<n;t++)hf.x=this.getX(t),hf.y=this.getY(t),hf.z=this.getZ(t),hf.applyNormalMatrix(e),this.setXYZ(t,hf.x,hf.y,hf.z);return this},transformDirection:function(e){for(var t=0,n=this.count;t<n;t++)hf.x=this.getX(t),hf.y=this.getY(t),hf.z=this.getZ(t),hf.transformDirection(e),this.setXYZ(t,hf.x,hf.y,hf.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(df.prototype=Object.create(uf.prototype)).constructor=df,(pf.prototype=Object.create(uf.prototype)).constructor=pf,(ff.prototype=Object.create(uf.prototype)).constructor=ff,(mf.prototype=Object.create(uf.prototype)).constructor=mf,(gf.prototype=Object.create(uf.prototype)).constructor=gf,(vf.prototype=Object.create(uf.prototype)).constructor=vf,(yf.prototype=Object.create(uf.prototype)).constructor=yf,(_f.prototype=Object.create(uf.prototype)).constructor=_f,(bf.prototype=Object.create(uf.prototype)).constructor=bf,Object.assign(xf.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,s=0;s<r.length;s++){var o=r[s];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*s-t.start,n.push(t)),t={start:3*s,materialIndex:i})}void 0!==t&&(t.count=3*s-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,l=a.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]={name:a[c].name,data:[]};this.morphTargets.position=t}var h,u=e.morphNormals,d=u.length;if(d>0){for(h=[],c=0;c<d;c++)h[c]={name:u[c].name,data:[]};this.morphTargets.normal=h}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,g=f.length===i.length;for(i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var b,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}!0===s&&(void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new Md,new Md,new Md))),!0===o&&(void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new Md,new Md,new Md)));for(var E=0;E<l;E++){var S=a[E].vertices;t[E].data.push(S[v.a],S[v.b],S[v.c])}for(E=0;E<d;E++){var M=u[E].vertexNormals[c];h[E].data.push(M.a,M.b,M.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Ef=1,Sf=new qd,Mf=new hp,Tf=new Id,Cf=new Mp,Af=new Mp,If=new Id;function Pf(){Object.defineProperty(this,"id",{value:Ef+=2}),this.uuid=Sd.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Pf.prototype=Object.assign(Object.create(xd.prototype),{constructor:Pf,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(wf(e)>65535?yf:gf)(e,1):e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new Rd).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Sf.makeRotationX(e),this.applyMatrix(Sf),this},rotateY:function(e){return Sf.makeRotationY(e),this.applyMatrix(Sf),this},rotateZ:function(e){return Sf.makeRotationZ(e),this.applyMatrix(Sf),this},translate:function(e,t,n){return Sf.makeTranslation(e,t,n),this.applyMatrix(Sf),this},scale:function(e,t,n){return Sf.makeScale(e,t,n),this.applyMatrix(Sf),this},lookAt:function(e){return Mf.lookAt(e),Mf.updateMatrix(),this.applyMatrix(Mf.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tf).negate(),this.translate(Tf.x,Tf.y,Tf.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new _f(3*t.vertices.length,3),i=new _f(3*t.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new _f(t.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _f(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new xf).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new uf(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.setAttribute("normal",new uf(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.setAttribute("color",new uf(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new uf(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var s=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new uf(s,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var a=[],l=e.morphTargets[o],c=0,h=l.length;c<h;c++){var u=l[c],d=new _f(3*u.data.length,3);d.name=u.name,a.push(d.copyVector3sArray(u.data))}this.morphAttributes[o]=a}if(e.skinIndices.length>0){var p=new _f(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new _f(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Mp);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++)Cf.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(If.addVectors(this.boundingBox.min,Cf.min),this.boundingBox.expandByPoint(If),If.addVectors(this.boundingBox.max,Cf.max),this.boundingBox.expandByPoint(If)):(this.boundingBox.expandByPoint(Cf.min),this.boundingBox.expandByPoint(Cf.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ap);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Cf.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++)Af.setFromBufferAttribute(o=t[i]),this.morphTargetsRelative?(If.addVectors(Cf.min,Af.min),Cf.expandByPoint(If),If.addVectors(Cf.max,Af.max),Cf.expandByPoint(If)):(Cf.expandByPoint(Af.min),Cf.expandByPoint(Af.max));Cf.getCenter(n);var s=0;for(i=0,r=e.count;i<r;i++)If.fromBufferAttribute(e,i),s=Math.max(s,n.distanceToSquared(If));if(t)for(i=0,r=t.length;i<r;i++)for(var o,a=this.morphTargetsRelative,l=0,c=(o=t[i]).count;l<c;l++)If.fromBufferAttribute(o,l),a&&(Tf.fromBufferAttribute(e,l),If.add(Tf)),s=Math.max(s,n.distanceToSquared(If));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new uf(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,s=i.length;r<s;r++)i[r]=0;var o,a,l,c=t.normal.array,h=new Id,u=new Id,d=new Id,p=new Id,f=new Id;if(e){var m=e.array;for(r=0,s=e.count;r<s;r+=3)a=3*m[r+1],l=3*m[r+2],h.fromArray(n,o=3*m[r+0]),u.fromArray(n,a),d.fromArray(n,l),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}else for(r=0,s=n.length;r<s;r+=9)h.fromArray(n,r),u.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,u),f.subVectors(h,u),p.cross(f),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,s=e.attributes[i],o=s.array,a=s.itemSize*t,l=Math.min(o.length,r.length-a),c=0,h=a;c<l;c++,h++)r[h]=o[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)If.x=e.getX(t),If.y=e.getY(t),If.z=e.getZ(t),If.normalize(),e.setXYZ(t,If.x,If.y,If.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=new n.constructor(t.length*i),s=0,o=0,a=0,l=t.length;a<l;a++){s=t[a]*i;for(var c=0;c<i;c++)r[o++]=n[s++]}return new uf(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Pf,n=this.index.array,i=this.attributes;for(var r in i){var s=e(i[r],n);t.setAttribute(r,s)}var o=this.morphAttributes;for(r in o){for(var a=[],l=o[r],c=0,h=l.length;c<h;c++)s=e(l[c],n),a.push(s);t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;for(var u=this.groups,d=(c=0,u.length);c<d;c++){var p=u[c];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var s=(d=r[n]).toJSON();""!==d.name&&(s.name=d.name),e.data.attributes[n]=s}var o={},a=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],c=[],h=0,u=l.length;h<u;h++){var d;s=(d=l[h]).toJSON(),""!==d.name&&(s.name=d.name),c.push(s)}c.length>0&&(o[n]=c,a=!0)}a&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Pf).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var s=e.attributes;for(t in s)this.setAttribute(t,s[t].clone());var o=e.morphAttributes;for(t in o){var a=[],l=o[t];for(n=0,i=l.length;n<i;n++)a.push(l[n].clone());this.morphAttributes[t]=a}this.morphTargetsRelative=e.morphTargetsRelative;var c=e.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var u=e.boundingBox;null!==u&&(this.boundingBox=u.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Lf=new qd,Rf=new Np,Of=new Ap,kf=new Id,Df=new Id,Nf=new Id,Ff=new Id,zf=new Id,Vf=new Id,Bf=new Id,Hf=new Id,Uf=new Id,Gf=new Md,jf=new Md,Wf=new Md,qf=new Id,Yf=new Id;function Xf(e,t){hp.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Pf,this.material=void 0!==t?t:new cf({color:16777215*Math.random()}),this.updateMorphTargets()}function Zf(e,t,n,i,r,s,o,a){if(null===(t.side===ih?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,t.side!==rh,a)))return null;Yf.copy(a),Yf.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Yf);return l<n.near||l>n.far?null:{distance:l,point:Yf.clone(),object:e}}function $f(e,t,n,i,r,s,o,a,l,c,h,u){kf.fromBufferAttribute(r,c),Df.fromBufferAttribute(r,h),Nf.fromBufferAttribute(r,u);var d=e.morphTargetInfluences;if(t.morphTargets&&s&&d){Bf.set(0,0,0),Hf.set(0,0,0),Uf.set(0,0,0);for(var p=0,f=s.length;p<f;p++){var m=d[p],g=s[p];0!==m&&(Ff.fromBufferAttribute(g,c),zf.fromBufferAttribute(g,h),Vf.fromBufferAttribute(g,u),o?(Bf.addScaledVector(Ff,m),Hf.addScaledVector(zf,m),Uf.addScaledVector(Vf,m)):(Bf.addScaledVector(Ff.sub(kf),m),Hf.addScaledVector(zf.sub(Df),m),Uf.addScaledVector(Vf.sub(Nf),m)))}kf.add(Bf),Df.add(Hf),Nf.add(Uf)}var v=Zf(e,t,n,i,kf,Df,Nf,qf);if(v){a&&(Gf.fromBufferAttribute(a,c),jf.fromBufferAttribute(a,h),Wf.fromBufferAttribute(a,u),v.uv=Kp.getUV(qf,kf,Df,Nf,Gf,jf,Wf,new Md)),l&&(Gf.fromBufferAttribute(l,c),jf.fromBufferAttribute(l,h),Wf.fromBufferAttribute(l,u),v.uv2=Kp.getUV(qf,kf,Df,Nf,Gf,jf,Wf,new Md));var y=new of(c,h,u);Kp.getNormal(kf,Df,Nf,y.normal),v.face=y}return v}Xf.prototype=Object.assign(Object.create(hp.prototype),{constructor:Xf,isMesh:!0,copy:function(e){return hp.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var o=r[s[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n,i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Of.copy(i.boundingSphere),Of.applyMatrix4(s),!1!==e.ray.intersectsSphere(Of)&&(Lf.getInverse(s),Rf.copy(e.ray).applyMatrix4(Lf),null===i.boundingBox||!1!==Rf.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,a,l,c,h,u,d,p,f,m=i.index,g=i.attributes.position,v=i.morphAttributes.position,y=i.morphTargetsRelative,_=i.attributes.uv,b=i.attributes.uv2,x=i.groups,w=i.drawRange;if(null!==m)if(Array.isArray(r))for(c=0,u=x.length;c<u;c++)for(f=r[(p=x[c]).materialIndex],h=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);h<d;h+=3)o=m.getX(h),a=m.getX(h+1),l=m.getX(h+2),(n=$f(this,f,e,Rf,g,v,y,_,b,o,a,l))&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(c=Math.max(0,w.start),u=Math.min(m.count,w.start+w.count);c<u;c+=3)o=m.getX(c),a=m.getX(c+1),l=m.getX(c+2),(n=$f(this,r,e,Rf,g,v,y,_,b,o,a,l))&&(n.faceIndex=Math.floor(c/3),t.push(n));else if(void 0!==g)if(Array.isArray(r))for(c=0,u=x.length;c<u;c++)for(f=r[(p=x[c]).materialIndex],h=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);h<d;h+=3)(n=$f(this,f,e,Rf,g,v,y,_,b,o=h,a=h+1,l=h+2))&&(n.faceIndex=Math.floor(h/3),n.face.materialIndex=p.materialIndex,t.push(n));else for(c=Math.max(0,w.start),u=Math.min(g.count,w.start+w.count);c<u;c+=3)(n=$f(this,r,e,Rf,g,v,y,_,b,o=c,a=c+1,l=c+2))&&(n.faceIndex=Math.floor(c/3),t.push(n))}else if(i.isGeometry){var E,S,M,T,C=Array.isArray(r),A=i.vertices,I=i.faces,P=i.faceVertexUvs[0];P.length>0&&(T=P);for(var L=0,R=I.length;L<R;L++){var O=I[L],k=C?r[O.materialIndex]:r;if(void 0!==k&&(n=Zf(this,k,e,Rf,E=A[O.a],S=A[O.b],M=A[O.c],qf))){if(T&&T[L]){var D=T[L];Gf.copy(D[0]),jf.copy(D[1]),Wf.copy(D[2]),n.uv=Kp.getUV(qf,E,S,M,Gf,jf,Wf,new Md)}n.face=O,n.faceIndex=L,t.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Kf=0,Jf=new qd,Qf=new hp,em=new Id;function tm(){Object.defineProperty(this,"id",{value:Kf+=2}),this.uuid=Sd.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}tm.prototype=Object.assign(Object.create(xd.prototype),{constructor:tm,isGeometry:!0,applyMatrix:function(e){for(var t=(new Rd).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Jf.makeRotationX(e),this.applyMatrix(Jf),this},rotateY:function(e){return Jf.makeRotationY(e),this.applyMatrix(Jf),this},rotateZ:function(e){return Jf.makeRotationZ(e),this.applyMatrix(Jf),this},translate:function(e,t,n){return Jf.makeTranslation(e,t,n),this.applyMatrix(Jf),this},scale:function(e,t,n){return Jf.makeScale(e,t,n),this.applyMatrix(Jf),this},lookAt:function(e){return Qf.lookAt(e),Qf.updateMatrix(),this.applyMatrix(Qf.matrix),this},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,a=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0;c<r.length;c+=3)t.vertices.push((new Id).fromArray(r,c)),void 0!==o&&t.colors.push((new tf).fromArray(o,c));function h(e,n,i,r){var c=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],h=new of(e,n,i,void 0===s?[]:[(new Id).fromArray(s,3*e),(new Id).fromArray(s,3*n),(new Id).fromArray(s,3*i)],c,r);t.faces.push(h),void 0!==a&&t.faceVertexUvs[0].push([(new Md).fromArray(a,2*e),(new Md).fromArray(a,2*n),(new Md).fromArray(a,2*i)]),void 0!==l&&t.faceVertexUvs[1].push([(new Md).fromArray(l,2*e),(new Md).fromArray(l,2*n),(new Md).fromArray(l,2*i)])}var u=e.groups;if(u.length>0)for(c=0;c<u.length;c++)for(var d=u[c],p=d.start,f=p,m=p+d.count;f<m;f+=3)void 0!==n?h(n[f],n[f+1],n[f+2],d.materialIndex):h(f,f+1,f+2,d.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)h(n[c],n[c+1],n[c+2]);else for(c=0;c<r.length/3;c+=3)h(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(em).negate(),this.translate(em.x,em.y,em.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new qd;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Id,t=new Id,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b];e.subVectors(this.vertices[r.c],o),t.subVectors(s,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,s,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new Id;if(e){var a,l,c=new Id,h=new Id;for(i=0,r=this.faces.length;i<r;i++)a=this.vertices[(s=this.faces[i]).a],c.subVectors(this.vertices[s.c],l=this.vertices[s.b]),h.subVectors(a,l),c.cross(h),o[s.a].add(c),o[s.b].add(c),o[s.c].add(c)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(s=this.faces[i]).a].add(s.normal),o[s.b].add(s.normal),o[s.c].add(s.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var u=(s=this.faces[i]).vertexNormals;3===u.length?(u[0].copy(o[s.a]),u[1].copy(o[s.b]),u[2].copy(o[s.c])):(u[0]=o[s.a].clone(),u[1]=o[s.b].clone(),u[2]=o[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var s=new tm;for(s.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,a=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Id,c={a:new Id,b:new Id,c:new Id},o.push(l),a.push(c)}var l,c,h=this.morphNormals[e];for(s.vertices=this.morphTargets[e].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)c=h.vertexNormals[n],(l=h.faceNormals[n]).copy((r=this.faces[n]).normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Mp),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ap),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Rd).getNormalMatrix(t));for(var u=0,d=o.length;u<d;u++){var p=o[u].clone();void 0!==t&&p.applyMatrix4(t),s.push(p)}for(u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(u=0,d=l.length;u<d;u++){var f,m,g=l[u],v=g.vertexNormals,y=g.vertexColors;(f=new of(g.a+r,g.b+r,g.c+r)).normal.copy(g.normal),void 0!==i&&f.normal.applyMatrix3(i).normalize();for(var _=0,b=v.length;_<b;_++)m=v[_].clone(),void 0!==i&&m.applyMatrix3(i).normalize(),f.vertexNormals.push(m);for(f.color.copy(g.color),_=0,b=y.length;_<b;_++)f.vertexColors.push(y[_].clone());f.materialIndex=g.materialIndex+n,a.push(f)}for(u=0,d=e.faceVertexUvs.length;u<d;u++){var x=e.faceVertexUvs[u];for(void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]),_=0,b=x.length;_<b;_++){for(var w=x[_],E=[],S=0,M=w.length;S<M;S++)E.push(w[S].clone());this.faceVertexUvs[u].push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,s,o,a,l={},c=[],h=[],u=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u)]?(l[t]=n,c.push(this.vertices[n]),h[n]=c.length-1):h[n]=h[l[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=h[r.a],r.b=h[r.b],r.c=h[r.c],s=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(s[p]===s[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),o=0,a=this.faceVertexUvs.length;o<a;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Id(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,s=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(s&&s.length===t&&(i=[]),o&&o.length===t&&(r=[]),n=0;n<t;n++){var a=e[n]._id;i&&i.push(s[a]),r&&r.push(o[a])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var s=this.vertices[r];i.push(s.x,s.y,s.z)}var o=[],a=[],l={},c=[],h={},u=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=E(_,0,0),_=E(_,1,!0),_=E(_,2,!1),_=E(_,3,f),_=E(_,4,m),_=E(_,5,g),_=E(_,6,v),_=E(_,7,y),o.push(_),o.push(p.a,p.b,p.c),o.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(T(b[0]),T(b[1]),T(b[2]))}if(m&&o.push(S(p.normal)),g){var x=p.vertexNormals;o.push(S(x[0]),S(x[1]),S(x[2]))}if(v&&o.push(M(p.color)),y){var w=p.vertexColors;o.push(M(w[0]),M(w[1]),M(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=a.length/3,a.push(e.x,e.y,e.z),l[t])}function M(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=c.length,c.push(e.getHex()),h[t])}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=u.length/2,u.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=i,e.data.normals=a,c.length>0&&(e.data.colors=c),u.length>0&&(e.data.uvs=[u]),e.data.faces=o,e},clone:function(){return(new tm).copy(this)},copy:function(e){var t,n,i,r,s,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.vertices;for(t=0,n=a.length;t<n;t++)this.vertices.push(a[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var h=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=h.length;i<r;i++){var u=h[i],d=[];for(s=0,o=u.length;s<o;s++)d.push(u[s].clone());this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var f={};if(f.name=p[t].name,void 0!==p[t].vertices)for(f.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)f.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(f.normals=[],i=0,r=p[t].normals.length;i<r;i++)f.normals.push(p[t].normals[i].clone());this.morphTargets.push(f)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var g={};if(void 0!==m[t].vertexNormals)for(g.vertexNormals=[],i=0,r=m[t].vertexNormals.length;i<r;i++){var v=m[t].vertexNormals[i],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(g.faceNormals=[],i=0,r=m[t].faceNormals.length;i<r;i++)g.faceNormals.push(m[t].faceNormals[i].clone());this.morphNormals.push(g)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var w=e.boundingBox;null!==w&&(this.boundingBox=w.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class nm extends tm{constructor(e,t,n,i,r,s){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s},this.fromBufferGeometry(new im(e,t,n,i,r,s)),this.mergeVertices()}}class im extends Pf{constructor(e,t,n,i,r,s){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};var o=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var a=[],l=[],c=[],h=[],u=0,d=0;function p(e,t,n,i,r,s,p,f,m,g,v){var y,_,b=s/m,x=p/g,w=s/2,E=p/2,S=f/2,M=m+1,T=g+1,C=0,A=0,I=new Id;for(_=0;_<T;_++){var P=_*x-E;for(y=0;y<M;y++)I[e]=(y*b-w)*i,I[t]=P*r,I[n]=S,l.push(I.x,I.y,I.z),I[e]=0,I[t]=0,I[n]=f>0?1:-1,c.push(I.x,I.y,I.z),h.push(y/m),h.push(1-_/g),C+=1}for(_=0;_<g;_++)for(y=0;y<m;y++){var L=u+y+M*(_+1),R=u+(y+1)+M*(_+1),O=u+(y+1)+M*_;a.push(u+y+M*_,L,O),a.push(L,R,O),A+=6}o.addGroup(d,A,v),d+=A,u+=C}p("z","y","x",-1,-1,n,t,e,s,r,0),p("z","y","x",1,-1,n,t,-e,s,r,1),p("x","z","y",1,1,e,n,t,i,s,2),p("x","z","y",1,-1,e,n,-t,i,s,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new _f(l,3)),this.setAttribute("normal",new _f(c,3)),this.setAttribute("uv",new _f(h,2))}}function rm(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];t[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return t}function sm(e){for(var t={},n=0;n<e.length;n++){var i=rm(e[n]);for(var r in i)t[r]=i[r]}return t}var om="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",am="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function lm(e){lf.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=om,this.fragmentShader=am,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function cm(){hp.call(this),this.type="Camera",this.matrixWorldInverse=new qd,this.projectionMatrix=new qd,this.projectionMatrixInverse=new qd}function hm(e,t,n,i){cm.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(lm.prototype=Object.create(lf.prototype)).constructor=lm,lm.prototype.isShaderMaterial=!0,lm.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rm(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},lm.prototype.toJSON=function(e){var t=lf.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;t.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},cm.prototype=Object.assign(Object.create(hp.prototype),{constructor:cm,isCamera:!0,copy:function(e,t){return hp.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Id),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){hp.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),hm.prototype=Object.assign(Object.create(cm.prototype),{constructor:hm,isPerspectiveCamera:!0,copy:function(e,t){return cm.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Sd.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Sd.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Sd.RAD2DEG*Math.atan(Math.tan(.5*Sd.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Sd.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){var o=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/o,t-=s.offsetY*n/a,i*=s.width/o,n*=s.height/a}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=hp.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var um=90,dm=1;function pm(e,t,n,i){hp.call(this),this.type="CubeCamera";var r=new hm(um,dm,e,t);r.up.set(0,-1,0),r.lookAt(new Id(1,0,0)),this.add(r);var s=new hm(um,dm,e,t);s.up.set(0,-1,0),s.lookAt(new Id(-1,0,0)),this.add(s);var o=new hm(um,dm,e,t);o.up.set(0,0,1),o.lookAt(new Id(0,1,0)),this.add(o);var a=new hm(um,dm,e,t);a.up.set(0,0,-1),a.lookAt(new Id(0,-1,0)),this.add(a);var l=new hm(um,dm,e,t);l.up.set(0,-1,0),l.lookAt(new Id(0,0,1)),this.add(l);var c=new hm(um,dm,e,t);c.up.set(0,-1,0),c.lookAt(new Id(0,0,-1)),this.add(c),this.renderTarget=new fm(n,n,i=i||{format:wu,magFilter:ou,minFilter:ou}),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),i=this.renderTarget,h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(n)},this.clear=function(e,t,n,i){for(var r=e.getRenderTarget(),s=this.renderTarget,o=0;o<6;o++)e.setRenderTarget(s,o),e.clear(t,n,i);e.setRenderTarget(r)}}function fm(e,t,n){Fd.call(this,e,t,n)}function mm(e,t,n,i,r,s,o,a,l,c,h,u){Dd.call(this,null,s,o,a,l,c,i,r,h,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:iu,this.minFilter=void 0!==c?c:iu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(pm.prototype=Object.create(hp.prototype)).constructor=pm,(fm.prototype=Object.create(Fd.prototype)).constructor=fm,fm.prototype.isWebGLRenderTargetCube=!0,fm.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new up,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new lm({type:"CubemapFromEquirect",uniforms:rm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ih,blending:lh});r.uniforms.tEquirect.value=t;var s=new Xf(new im(5,5,5),r);n.add(s);var o=new pm(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(e,n),s.geometry.dispose(),s.material.dispose(),this},(mm.prototype=Object.create(Dd.prototype)).constructor=mm,mm.prototype.isDataTexture=!0;var gm=new Ap,vm=new Id;function ym(e,t,n,i,r,s){this.planes=[void 0!==e?e:new Bp,void 0!==t?t:new Bp,void 0!==n?n:new Bp,void 0!==i?i:new Bp,void 0!==r?r:new Bp,void 0!==s?s:new Bp]}Object.assign(ym.prototype,{set:function(e,t,n,i,r,s){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-i,h-a,f-u,y-m).normalize(),t[1].setComponents(o+i,h+a,f+u,y+m).normalize(),t[2].setComponents(o+r,h+l,f+d,y+g).normalize(),t[3].setComponents(o-r,h-l,f-d,y-g).normalize(),t[4].setComponents(o-s,h-c,f-p,y-v).normalize(),t[5].setComponents(o+s,h+c,f+p,y+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),gm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gm)},intersectsSprite:function(e){return gm.center.set(0,0,0),gm.radius=.7071067811865476,gm.applyMatrix4(e.matrixWorld),this.intersectsSphere(gm)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(vm.x=i.normal.x>0?e.max.x:e.min.x,vm.y=i.normal.y>0?e.max.y:e.min.y,vm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(vm)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var _m={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},bm={common:{diffuse:{value:new tf(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rd},uv2Transform:{value:new Rd},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Md(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tf(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new tf(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rd}},sprite:{diffuse:{value:new tf(15658734)},opacity:{value:1},center:{value:new Md(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Rd}}},xm={basic:{uniforms:sm([bm.common,bm.specularmap,bm.envmap,bm.aomap,bm.lightmap,bm.fog]),vertexShader:_m.meshbasic_vert,fragmentShader:_m.meshbasic_frag},lambert:{uniforms:sm([bm.common,bm.specularmap,bm.envmap,bm.aomap,bm.lightmap,bm.emissivemap,bm.fog,bm.lights,{emissive:{value:new tf(0)}}]),vertexShader:_m.meshlambert_vert,fragmentShader:_m.meshlambert_frag},phong:{uniforms:sm([bm.common,bm.specularmap,bm.envmap,bm.aomap,bm.lightmap,bm.emissivemap,bm.bumpmap,bm.normalmap,bm.displacementmap,bm.fog,bm.lights,{emissive:{value:new tf(0)},specular:{value:new tf(1118481)},shininess:{value:30}}]),vertexShader:_m.meshphong_vert,fragmentShader:_m.meshphong_frag},standard:{uniforms:sm([bm.common,bm.envmap,bm.aomap,bm.lightmap,bm.emissivemap,bm.bumpmap,bm.normalmap,bm.displacementmap,bm.roughnessmap,bm.metalnessmap,bm.fog,bm.lights,{emissive:{value:new tf(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:_m.meshphysical_vert,fragmentShader:_m.meshphysical_frag},toon:{uniforms:sm([bm.common,bm.specularmap,bm.aomap,bm.lightmap,bm.emissivemap,bm.bumpmap,bm.normalmap,bm.displacementmap,bm.gradientmap,bm.fog,bm.lights,{emissive:{value:new tf(0)},specular:{value:new tf(1118481)},shininess:{value:30}}]),vertexShader:_m.meshtoon_vert,fragmentShader:_m.meshtoon_frag},matcap:{uniforms:sm([bm.common,bm.bumpmap,bm.normalmap,bm.displacementmap,bm.fog,{matcap:{value:null}}]),vertexShader:_m.meshmatcap_vert,fragmentShader:_m.meshmatcap_frag},points:{uniforms:sm([bm.points,bm.fog]),vertexShader:_m.points_vert,fragmentShader:_m.points_frag},dashed:{uniforms:sm([bm.common,bm.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_m.linedashed_vert,fragmentShader:_m.linedashed_frag},depth:{uniforms:sm([bm.common,bm.displacementmap]),vertexShader:_m.depth_vert,fragmentShader:_m.depth_frag},normal:{uniforms:sm([bm.common,bm.bumpmap,bm.normalmap,bm.displacementmap,{opacity:{value:1}}]),vertexShader:_m.normal_vert,fragmentShader:_m.normal_frag},sprite:{uniforms:sm([bm.sprite,bm.fog]),vertexShader:_m.sprite_vert,fragmentShader:_m.sprite_frag},background:{uniforms:{uvTransform:{value:new Rd},t2D:{value:null}},vertexShader:_m.background_vert,fragmentShader:_m.background_frag},cube:{uniforms:sm([bm.envmap,{opacity:{value:1}}]),vertexShader:_m.cube_vert,fragmentShader:_m.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_m.equirect_vert,fragmentShader:_m.equirect_frag},distanceRGBA:{uniforms:sm([bm.common,bm.displacementmap,{referencePosition:{value:new Id},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_m.distanceRGBA_vert,fragmentShader:_m.distanceRGBA_frag},shadow:{uniforms:sm([bm.lights,bm.fog,{color:{value:new tf(0)},opacity:{value:1}}]),vertexShader:_m.shadow_vert,fragmentShader:_m.shadow_frag}};function wm(){var e=null,t=!1,n=null;function i(r,s){!1!==t&&(n(r,s),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Em(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.usage,s=e.createBuffer();e.bindBuffer(n,s),e.bufferData(n,i,r),t.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var s=n.array,o=n.updateRange;e.bindBuffer(i,r.buffer),-1===o.count?e.bufferSubData(i,0,s):(e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(0,n,i),r.version=n.version)}}}function Sm(e,t,n,i){tm.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Mm(e,t,n,i)),this.mergeVertices()}function Mm(e,t,n,i){Pf.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,s,o=(e=e||1)/2,a=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,h=l+1,u=c+1,d=e/l,p=t/c,f=[],m=[],g=[],v=[];for(s=0;s<u;s++){var y=s*p-a;for(r=0;r<h;r++)m.push(r*d-o,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-s/c)}for(s=0;s<c;s++)for(r=0;r<l;r++){var _=r+h*(s+1),b=r+1+h*(s+1),x=r+1+h*s;f.push(r+h*s,_,x),f.push(_,b,x)}this.setIndex(f),this.setAttribute("position",new _f(m,3)),this.setAttribute("normal",new _f(g,3)),this.setAttribute("uv",new _f(v,2))}function Tm(e,t,n,i){var r,s,o=new tf(0),a=0,l=null,c=0;function h(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),h(o,a=void 0!==t?t:1)},getClearAlpha:function(){return a},setClearAlpha:function(e){h(o,a=e)},render:function(t,i,u,d){var p=i.background,f=e.xr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(h(o,a),l=null,c=0):p&&p.isColor&&(h(p,1),d=!0,l=null,c=0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube||p.mapping===Jh)){void 0===s&&((s=new Xf(new im(1,1,1),new lm({type:"BackgroundCubeMaterial",uniforms:rm(xm.cube.uniforms),vertexShader:xm.cube.vertexShader,fragmentShader:xm.cube.fragmentShader,side:ih,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(s));var g=p.isWebGLRenderTargetCube?p.texture:p;s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,l===p&&c===g.version||(s.material.needsUpdate=!0,l=p,c=g.version),t.unshift(s,s.geometry,s.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new Xf(new Mm(2,2),new lm({type:"BackgroundMaterial",uniforms:rm(xm.background.uniforms),vertexShader:xm.background.vertexShader,fragmentShader:xm.background.fragmentShader,side:nh,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version||(r.material.needsUpdate=!0,l=p,c=p.version),t.unshift(r,r.geometry,r.material,0,0,null))}}}function Cm(e,t,n,i){var r,s=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(i,o,a,l){if(0!==l){var c,h;if(s)c=e,h="drawArraysInstanced";else if(h="drawArraysInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](r,o,a,l),n.update(a,r,l)}}}function Am(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),u=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=h>0,y=s||!!t.get("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?e.getParameter(36183):0}}function Im(){var e=this,t=null,n=0,i=!1,r=!1,s=new Bp,o=new Rd,a={value:null,needsUpdate:!1};function l(){a.value!==t&&(a.value=t,a.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=a.value,!0!==r||null===c){var h=i+4*l,u=n.matrixWorldInverse;o.getNormalMatrix(u),(null===c||c.length<h)&&(c=new Float32Array(h));for(var d=0,p=i;d!==l;++d,p+=4)s.copy(t[d]).applyMatrix4(u,o),s.normal.toArray(c,p),c[p+3]=s.constant}a.value=c,a.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,s){var o=0!==e.length||r||0!==n||i;return i=r,t=c(e,s,0),n=e.length,o},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,s,o,h,u,d){if(!i||null===e||0===e.length||r&&!o)r?c(null):l();else{var p=r?0:n,f=4*p,m=u.clippingState||null;a.value=m,m=c(e,h,f,d);for(var g=0;g!==f;++g)m[g]=t[g];u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function Pm(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function Lm(e,t,n){var i=new WeakMap,r=new WeakMap;function s(e){var o=e.target,a=i.get(o);for(var l in null!==a.index&&t.remove(a.index),a.attributes)t.remove(a.attributes[l]);o.removeEventListener("dispose",s),i.delete(o);var c=r.get(a);c&&(t.remove(c),r.delete(a)),n.memory.geometries--}function o(e){var n=[],i=e.index,s=e.attributes.position,o=0;if(null!==i){o=i.version;for(var a=0,l=(c=i.array).length;a<l;a+=3)n.push(h=c[a+0],u=c[a+1],u,d=c[a+2],d,h)}else{var c;for(o=s.version,a=0,l=(c=s.array).length/3-1;a<l;a+=3){var h,u,d;n.push(h=a+0,u=a+1,u,d=a+2,d,h)}}var p=new(wf(n)>65535?yf:gf)(n,1);p.version=o,t.update(p,34963);var f=r.get(e);f&&t.remove(f),r.set(e,p)}return{get:function(e,t){var r=i.get(t);return r||(t.addEventListener("dispose",s),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Pf).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)},update:function(e){var n=e.index,i=e.attributes;for(var r in null!==n&&t.update(n,34963),i)t.update(i[r],34962);var s=e.morphAttributes;for(var r in s)for(var o=s[r],a=0,l=o.length;a<l;a++)t.update(o[a],34962)},getWireframeAttribute:function(e){var t=r.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return r.get(e)}}}function Rm(e,t,n,i){var r,s,o,a=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,s,t*o),n.update(i,r)},this.renderInstances=function(i,l,c,h){if(0!==h){var u,d;if(a)u=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](r,c,s,l*o,h),n.update(c,r,h)}}}function Om(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function km(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Dm(e){var t={},n=new Float32Array(8);return{update:function(i,r,s,o){var a=i.morphTargetInfluences,l=void 0===a?0:a.length,c=t[r.id];if(void 0===c){c=[];for(var h=0;h<l;h++)c[h]=[h,0];t[r.id]=c}var u=s.morphTargets&&r.morphAttributes.position,d=s.morphNormals&&r.morphAttributes.normal;for(h=0;h<l;h++)0!==(f=c[h])[1]&&(u&&r.deleteAttribute("morphTarget"+h),d&&r.deleteAttribute("morphNormal"+h));for(h=0;h<l;h++)(f=c[h])[0]=h,f[1]=a[h];c.sort(km);var p=0;for(h=0;h<8;h++){var f;if(f=c[h]){var m=f[0],g=f[1];if(g){u&&r.setAttribute("morphTarget"+h,u[m]),d&&r.setAttribute("morphNormal"+h,d[m]),n[h]=g,p+=g;continue}}n[h]=0}var v=r.morphTargetsRelative?1:1-p;o.getUniforms().setValue(e,"morphTargetBaseInfluence",v),o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Nm(e,t,n,i){var r={};return{update:function(e){var s=i.render.frame,o=e.geometry,a=t.get(e,o);return r[a.id]!==s&&(o.isGeometry&&a.updateFromObject(e),t.update(a),r[a.id]=s),e.isInstancedMesh&&n.update(e.instanceMatrix,34962),a},dispose:function(){r={}}}}function Fm(e,t,n,i,r,s,o,a,l,c){Dd.call(this,e=void 0!==e?e:[],t=void 0!==t?t:Yh,n,i,r,s,o=void 0!==o?o:wu,a,l,c),this.flipY=!1}function zm(e,t,n,i){Dd.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=iu,this.minFilter=iu,this.wrapR=tu,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Vm(e,t,n,i){Dd.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=iu,this.minFilter=iu,this.wrapR=tu,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}xm.physical={uniforms:sm([xm.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new tf(0)},clearcoatNormalScale:{value:new Md(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:_m.meshphysical_vert,fragmentShader:_m.meshphysical_frag},(Sm.prototype=Object.create(tm.prototype)).constructor=Sm,(Mm.prototype=Object.create(Pf.prototype)).constructor=Mm,(Fm.prototype=Object.create(Dd.prototype)).constructor=Fm,Fm.prototype.isCubeTexture=!0,Object.defineProperty(Fm.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),(zm.prototype=Object.create(Dd.prototype)).constructor=zm,zm.prototype.isDataTexture2DArray=!0,(Vm.prototype=Object.create(Dd.prototype)).constructor=Vm,Vm.prototype.isDataTexture3D=!0;var Bm=new Dd,Hm=new zm,Um=new Vm,Gm=new Fm,jm=[],Wm=[],qm=new Float32Array(16),Ym=new Float32Array(9),Xm=new Float32Array(4);function Zm(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,s=jm[r];if(void 0===s&&(s=new Float32Array(r),jm[r]=s),0!==t){i.toArray(s,0);for(var o=1,a=0;o!==t;++o)e[o].toArray(s,a+=n)}return s}function $m(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Km(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Jm(e,t){var n=Wm[t];void 0===n&&(n=new Int32Array(t),Wm[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Qm(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function eg(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if($m(n,t))return;e.uniform2fv(this.addr,t),Km(n,t)}}function tg(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if($m(n,t))return;e.uniform3fv(this.addr,t),Km(n,t)}}function ng(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if($m(n,t))return;e.uniform4fv(this.addr,t),Km(n,t)}}function ig(e,t){var n=this.cache,i=t.elements;if(void 0===i){if($m(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Km(n,t)}else{if($m(n,i))return;Xm.set(i),e.uniformMatrix2fv(this.addr,!1,Xm),Km(n,i)}}function rg(e,t){var n=this.cache,i=t.elements;if(void 0===i){if($m(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Km(n,t)}else{if($m(n,i))return;Ym.set(i),e.uniformMatrix3fv(this.addr,!1,Ym),Km(n,i)}}function sg(e,t){var n=this.cache,i=t.elements;if(void 0===i){if($m(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Km(n,t)}else{if($m(n,i))return;qm.set(i),e.uniformMatrix4fv(this.addr,!1,qm),Km(n,i)}}function og(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Bm,r)}function ag(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Hm,r)}function lg(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Um,r)}function cg(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||Gm,r)}function hg(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ug(e,t){var n=this.cache;$m(n,t)||(e.uniform2iv(this.addr,t),Km(n,t))}function dg(e,t){var n=this.cache;$m(n,t)||(e.uniform3iv(this.addr,t),Km(n,t))}function pg(e,t){var n=this.cache;$m(n,t)||(e.uniform4iv(this.addr,t),Km(n,t))}function fg(e,t){e.uniform1fv(this.addr,t)}function mg(e,t){e.uniform1iv(this.addr,t)}function gg(e,t){e.uniform2iv(this.addr,t)}function vg(e,t){e.uniform3iv(this.addr,t)}function yg(e,t){e.uniform4iv(this.addr,t)}function _g(e,t){var n=Zm(t,this.size,2);e.uniform2fv(this.addr,n)}function bg(e,t){var n=Zm(t,this.size,3);e.uniform3fv(this.addr,n)}function xg(e,t){var n=Zm(t,this.size,4);e.uniform4fv(this.addr,n)}function wg(e,t){var n=Zm(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Eg(e,t){var n=Zm(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Sg(e,t){var n=Zm(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Mg(e,t,n){var i=t.length,r=Jm(n,i);e.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.safeSetTexture2D(t[s]||Bm,r[s])}function Tg(e,t,n){var i=t.length,r=Jm(n,i);e.uniform1iv(this.addr,r);for(var s=0;s!==i;++s)n.safeSetTextureCube(t[s]||Gm,r[s])}function Cg(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(t.type){case 5126:return Qm;case 35664:return eg;case 35665:return tg;case 35666:return ng;case 35674:return ig;case 35675:return rg;case 35676:return sg;case 35678:case 36198:return og;case 35679:return lg;case 35680:return cg;case 36289:return ag;case 5124:case 35670:return hg;case 35667:case 35671:return ug;case 35668:case 35672:return dg;case 35669:case 35673:return pg}}()}function Ag(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return fg;case 35664:return _g;case 35665:return bg;case 35666:return xg;case 35674:return wg;case 35675:return Eg;case 35676:return Sg;case 35678:case 36198:case 36298:case 36306:return Mg;case 35680:case 36300:case 36308:return Tg;case 5124:case 35670:return mg;case 35667:case 35671:return gg;case 35668:case 35672:return vg;case 35669:case 35673:return yg}}()}function Ig(e){this.id=e,this.seq=[],this.map={}}Ag.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Km(t,e)},Ig.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,s=i.length;r!==s;++r){var o=i[r];o.setValue(e,t[o.id],n)}};var Pg=/([\w\d_]+)(\])?(\[|\.)?/g;function Lg(e,t){e.seq.push(t),e.map[t.id]=t}function Rg(e,t,n){var i=e.name,r=i.length;for(Pg.lastIndex=0;;){var s=Pg.exec(i),o=s[1],a=s[3];if("]"===s[2]&&(o|=0),void 0===a||"["===a&&Pg.lastIndex+2===r){Lg(n,void 0===a?new Cg(o,e,t):new Ag(o,e,t));break}var l=n.map[o];void 0===l&&Lg(n,l=new Ig(o)),n=l}}function Og(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);Rg(r,e.getUniformLocation(t,r.name),this)}}function kg(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Og.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Og.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Og.upload=function(e,t,n,i){for(var r=0,s=t.length;r!==s;++r){var o=t[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,i)}},Og.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var s=e[i];s.id in t&&n.push(s)}return n};var Dg=0;function Ng(e){switch(e){case od:return["Linear","( value )"];case ad:return["sRGB","( value )"];case cd:return["RGBE","( value )"];case ud:return["RGBM","( value, 7.0 )"];case dd:return["RGBM","( value, 16.0 )"];case pd:return["RGBD","( value, 256.0 )"];case ld:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case hd:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Fg(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(n){for(var i=e.getShaderSource(t).split("\n"),r=0;r<i.length;r++)i[r]=r+1+": "+i[r];return i.join("\n")}()}function zg(e,t){var n=Ng(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Vg(e,t){var n;switch(t){case Uh:n="Linear";break;case Gh:n="Reinhard";break;case jh:n="Uncharted2";break;case Wh:n="OptimizedCineon";break;case qh:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bg(e){return""!==e}function Hg(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ug(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Gg=/^[ \t]*#include +<([\w\d./]+)>/gm;function jg(e){return e.replace(Gg,Wg)}function Wg(e,t){var n=_m[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return jg(n)}var qg=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function Yg(e){return e.replace(qg,Xg)}function Xg(e,t,n,i){for(var r="",s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[ i \]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Zg(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function $g(e,t,n,i,r,s){var o,a,l,c,h=e.getContext(),u=i.defines,d=r.vertexShader,p=r.fragmentShader,f=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Qc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===eh?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===th&&(t="SHADOWMAP_TYPE_VSM"),t}(s),m=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Yh:case Xh:t="ENVMAP_TYPE_CUBE";break;case Jh:case Qh:t="ENVMAP_TYPE_CUBE_UV";break;case Zh:case $h:t="ENVMAP_TYPE_EQUIREC";break;case Kh:t="ENVMAP_TYPE_SPHERE"}return t}(s),g=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case Xh:case $h:t="ENVMAP_MODE_REFRACTION"}return t}(s),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case zh:t="ENVMAP_BLENDING_MULTIPLY";break;case Vh:t="ENVMAP_BLENDING_MIX";break;case Bh:t="ENVMAP_BLENDING_ADD"}return t}(s),y=e.gammaFactor>0?e.gammaFactor:1,_=s.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bg).join("\n")}(i.extensions,s,t),b=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(u),x=h.createProgram(),w=s.numMultiviewViews;if(i.isRawShaderMaterial?((o=[b].filter(Bg).join("\n")).length>0&&(o+="\n"),(a=[_,b].filter(Bg).join("\n")).length>0&&(a+="\n")):(o=[Zg(s),"#define SHADER_NAME "+r.name,b,s.instancing?"#define USE_INSTANCING":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+g:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+f:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bg).join("\n"),a=[_,Zg(s),"#define SHADER_NAME "+r.name,b,s.alphaTest?"#define ALPHATEST "+s.alphaTest+(s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+m:"",s.envMap?"#define "+g:"",s.envMap?"#define "+v:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.sheen?"#define USE_SHEEN":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+f:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||s.envMap)&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==Hh?"#define TONE_MAPPING":"",s.toneMapping!==Hh?_m.tonemapping_pars_fragment:"",s.toneMapping!==Hh?Vg("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.outputEncoding||s.mapEncoding||s.matcapEncoding||s.envMapEncoding||s.emissiveMapEncoding||s.lightMapEncoding?_m.encodings_pars_fragment:"",s.mapEncoding?zg("mapTexelToLinear",s.mapEncoding):"",s.matcapEncoding?zg("matcapTexelToLinear",s.matcapEncoding):"",s.envMapEncoding?zg("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMapEncoding?zg("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.lightMapEncoding?zg("lightMapTexelToLinear",s.lightMapEncoding):"",s.outputEncoding?(l=s.outputEncoding,c=Ng(l),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"):"",s.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Bg).join("\n")),d=Ug(d=Hg(d=jg(d),s),s),p=Ug(p=Hg(p=jg(p),s),s),d=Yg(d),p=Yg(p),s.isWebGL2&&!i.isRawShaderMaterial){var E=!1,S=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==d.match(S)&&null!==p.match(S)&&(E=!0,d=d.replace(S,""),p=p.replace(S,"")),o=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+o,a=["#version 300 es\n","#define varying in",E?"":"out highp vec4 pc_fragColor;",E?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a,w>0&&(o=(o=o.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+w+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+w+"];","uniform mat4 projectionMatrices["+w+"];","uniform mat4 viewMatrices["+w+"];","uniform mat3 normalMatrices["+w+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),a=(a=a.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+w+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var M,T,C=a+p,A=kg(h,35633,o+d),I=kg(h,35632,C);if(h.attachShader(x,A),h.attachShader(x,I),void 0!==i.index0AttributeName?h.bindAttribLocation(x,0,i.index0AttributeName):!0===s.morphTargets&&h.bindAttribLocation(x,0,"position"),h.linkProgram(x),e.debug.checkShaderErrors){var P=h.getProgramInfoLog(x).trim(),L=h.getShaderInfoLog(A).trim(),R=h.getShaderInfoLog(I).trim(),O=!0,k=!0;if(!1===h.getProgramParameter(x,35714)){O=!1;var D=Fg(h,A,"vertex"),N=Fg(h,I,"fragment");console.error("THREE.WebGLProgram: shader error: ",h.getError(),"35715",h.getProgramParameter(x,35715),"gl.getProgramInfoLog",P,D,N)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==R||(k=!1);k&&(this.diagnostics={runnable:O,material:i,programLog:P,vertexShader:{log:L,prefix:o},fragmentShader:{log:R,prefix:a}})}return h.deleteShader(A),h.deleteShader(I),this.getUniforms=function(){return void 0===M&&(M=new Og(h,x)),M},this.getAttributes=function(){return void 0===T&&(T=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var s=e.getActiveAttrib(t,r).name;n[s]=e.getAttribLocation(t,s)}return n}(h,x)),T},this.destroy=function(){h.deleteProgram(x),this.program=void 0},this.name=r.name,this.id=Dg++,this.cacheKey=n,this.usedTimes=1,this.program=x,this.vertexShader=A,this.fragmentShader=I,this.numMultiviewViews=w,this}function Kg(e,t,n){var i=[],r=n.isWebGL2,s=n.logarithmicDepthBuffer,o=n.floatVertexTextures,a=n.precision,l=n.maxVertexUniforms,c=n.vertexTextures,h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},u=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=od,t}this.getParameters=function(t,i,u,p,f,m,g){var v=p.fog,y=t.envMap||(t.isMeshStandardMaterial?p.environment:null),_=h[t.type],b=g.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(o)return 1024;var n=Math.floor((l-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(g):0;null!==t.precision&&(a=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",a,"instead.");var x=e.getRenderTarget();return{isWebGL2:r,shaderID:_,precision:a,instancing:!0===g.isInstancedMesh,supportsVertexTextures:c,numMultiviewViews:x&&x.isWebGLMultiviewRenderTarget?x.numViews:0,outputEncoding:null!==x?d(x.texture):e.outputEncoding,map:!!t.map,mapEncoding:d(t.map),matcap:!!t.matcap,matcapEncoding:d(t.matcap),envMap:!!y,envMapMode:y&&y.mapping,envMapEncoding:d(y),envMapCubeUV:!!y&&(y.mapping===Jh||y.mapping===Qh),lightMap:!!t.lightMap,lightMapEncoding:d(t.lightMap),aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:d(t.emissiveMap),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===vd,tangentSpaceNormalMap:t.normalMapType===gd,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.displacementMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||!t.displacementMap),fog:!!v,useFog:t.fog,fogExp2:v&&v.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:s,skinning:t.skinning&&b>0,maxBones:b,useVertexTexture:o,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:f,numClipIntersection:m,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:t.toneMapped?e.toneMapping:Hh,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===rh,flipSided:t.side===ih,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCacheKey=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);if(void 0===t.isRawShaderMaterial){for(var s=0;s<u.length;s++)i.push(n[u[s]]);i.push(e.outputEncoding),i.push(e.gammaFactor)}return i.push(t.onBeforeCompile.toString()),i.join()},this.acquireProgram=function(n,r,s,o){for(var a,l=0,c=i.length;l<c;l++){var h=i[l];if(h.cacheKey===o){++(a=h).usedTimes;break}}return void 0===a&&(a=new $g(e,t,o,n,r,s),i.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function Jg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&e.set(t,n={}),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Qg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ev(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function tv(){var e=[],t=0,n=[],i=[],r={id:-1};function s(n,i,s,o,a,l){var c=e[t];return void 0===c?e[t]=c={id:n.id,object:n,geometry:i,material:s,program:s.program||r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:l}:(c.id=n.id,c.object=n,c.geometry=i,c.material=s,c.program=s.program||r,c.groupOrder=o,c.renderOrder=n.renderOrder,c.z=a,c.group=l),t++,c}return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(e,t,r,o,a,l){var c=s(e,t,r,o,a,l);(!0===r.transparent?i:n).push(c)},unshift:function(e,t,r,o,a,l){var c=s(e,t,r,o,a,l);(!0===r.transparent?i:n).unshift(c)},sort:function(e,t){n.length>1&&n.sort(e||Qg),i.length>1&&i.sort(t||ev)}}}function nv(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r,s=e.get(n);return void 0===s?(r=new tv,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):void 0===(r=s.get(i))&&(r=new tv,s.set(i,r)),r},dispose:function(){e=new WeakMap}}}function iv(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Id,color:new tf,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Md};break;case"SpotLight":n={position:new Id,direction:new Id,color:new tf,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Md};break;case"PointLight":n={position:new Id,color:new tf,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Md,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Id,skyColor:new tf,groundColor:new tf};break;case"RectAreaLight":n={color:new tf,position:new Id,halfWidth:new Id,halfHeight:new Id}}return e[t.id]=n,n}}}var rv=0;function sv(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ov(){for(var e=new iv,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)t.probe.push(new Id);var i=new Id,r=new qd,s=new qd;return{setup:function(n,o,a){for(var l=0,c=0,h=0,u=0;u<9;u++)t.probe[u].set(0,0,0);var d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=0,b=a.matrixWorldInverse;n.sort(sv),u=0;for(var x=n.length;u<x;u++){var w=n[u],E=w.color,S=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)l+=E.r*S,c+=E.g*S,h+=E.b*S;else if(w.isLightProbe)for(var C=0;C<9;C++)t.probe[C].addScaledVector(w.sh.coefficients[C],S);else if(w.isDirectionalLight)(I=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),I.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(b),I.shadow=w.castShadow,w.castShadow&&(I.shadowBias=(A=w.shadow).bias,I.shadowRadius=A.radius,I.shadowMapSize=A.mapSize,t.directionalShadowMap[d]=T,t.directionalShadowMatrix[d]=w.shadow.matrix,v++),t.directional[d]=I,d++;else if(w.isSpotLight)(I=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),I.position.applyMatrix4(b),I.color.copy(E).multiplyScalar(S),I.distance=M,I.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(b),I.coneCos=Math.cos(w.angle),I.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),I.decay=w.decay,I.shadow=w.castShadow,w.castShadow&&(I.shadowBias=(A=w.shadow).bias,I.shadowRadius=A.radius,I.shadowMapSize=A.mapSize,t.spotShadowMap[f]=T,t.spotShadowMatrix[f]=w.shadow.matrix,_++),t.spot[f]=I,f++;else if(w.isRectAreaLight)(I=e.get(w)).color.copy(E).multiplyScalar(S),I.position.setFromMatrixPosition(w.matrixWorld),I.position.applyMatrix4(b),s.identity(),r.copy(w.matrixWorld),r.premultiply(b),s.extractRotation(r),I.halfWidth.set(.5*w.width,0,0),I.halfHeight.set(0,.5*w.height,0),I.halfWidth.applyMatrix4(s),I.halfHeight.applyMatrix4(s),t.rectArea[m]=I,m++;else if(w.isPointLight){var A;(I=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),I.position.applyMatrix4(b),I.color.copy(w.color).multiplyScalar(w.intensity),I.distance=w.distance,I.decay=w.decay,I.shadow=w.castShadow,w.castShadow&&(I.shadowBias=(A=w.shadow).bias,I.shadowRadius=A.radius,I.shadowMapSize=A.mapSize,I.shadowCameraNear=A.camera.near,I.shadowCameraFar=A.camera.far,t.pointShadowMap[p]=T,t.pointShadowMatrix[p]=w.shadow.matrix,y++),t.point[p]=I,p++}else if(w.isHemisphereLight){var I;(I=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),I.direction.transformDirection(b),I.direction.normalize(),I.skyColor.copy(w.color).multiplyScalar(S),I.groundColor.copy(w.groundColor).multiplyScalar(S),t.hemi[g]=I,g++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=h;var P=t.hash;P.directionalLength===d&&P.pointLength===p&&P.spotLength===f&&P.rectAreaLength===m&&P.hemiLength===g&&P.numDirectionalShadows===v&&P.numPointShadows===y&&P.numSpotShadows===_||(t.directional.length=d,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=g,t.directionalShadowMap.length=v,t.pointShadowMap.length=y,t.spotShadowMap.length=_,t.directionalShadowMatrix.length=v,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=_,P.directionalLength=d,P.pointLength=p,P.spotLength=f,P.rectAreaLength=m,P.hemiLength=g,P.numDirectionalShadows=v,P.numPointShadows=y,P.numSpotShadows=_,t.version=rv++)},state:t}}function av(){var e=new ov,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function lv(){var e=new WeakMap;function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}return{get:function(n,i){var r;return!1===e.has(n)?(r=new av,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new av,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function cv(e){lf.call(this),this.type="MeshDepthMaterial",this.depthPacking=fd,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function hv(e){lf.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Id,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}(cv.prototype=Object.create(lf.prototype)).constructor=cv,cv.prototype.isMeshDepthMaterial=!0,cv.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},(hv.prototype=Object.create(lf.prototype)).constructor=hv,hv.prototype.isMeshDistanceMaterial=!0,hv.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var uv="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",dv="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function pv(e,t,n){var i=new ym,r=new Md,s=new Md,o=new Nd,a=[],l=[],c={},h={0:ih,1:nh,2:rh},u=new lm({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Md},radius:{value:4}},vertexShader:dv,fragmentShader:uv}),d=u.clone();d.defines.HORIZONAL_PASS=1;var p=new Pf;p.setAttribute("position",new uf(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new Xf(p,u),m=this;function g(n,i){var r=t.update(f);u.uniforms.shadow_pass.value=n.map.texture,u.uniforms.resolution.value=n.mapSize,u.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,u,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,d,f,null)}function v(e,t,n){var i=e<<0|t<<1|n<<2,r=a[i];return void 0===r&&(r=new cv({depthPacking:md,morphTargets:e,skinning:t}),a[i]=r),r}function y(e,t,n){var i=e<<0|t<<1|n<<2,r=l[i];return void 0===r&&(r=new hv({morphTargets:e,skinning:t}),l[i]=r),r}function _(t,n,i,r,s,o){var a=t.geometry,l=null,u=v,d=t.customDepthMaterial;if(!0===i.isPointLight&&(u=y,d=t.customDistanceMaterial),void 0===d){var p=!1;!0===n.morphTargets&&(!0===a.isBufferGeometry?p=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:!0===a.isGeometry&&(p=a.morphTargets&&a.morphTargets.length>0));var f=!1;!0===t.isSkinnedMesh&&(!0===n.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),l=u(p,f,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=l.uuid,g=n.uuid,_=c[m];void 0===_&&(c[m]=_={});var b=_[g];void 0===b&&(b=l.clone(),_[g]=b),l=b}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=o===th?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=r,l.farDistance=s),l}function b(n,r,s,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===th)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);var l=t.update(n),c=n.material;if(Array.isArray(c))for(var h=l.groups,u=0,d=h.length;u<d;u++){var p=h[u],f=c[p.materialIndex];if(f&&f.visible){var m=_(n,f,o,s.near,s.far,a);e.renderBufferDirect(s,null,l,m,n,p)}}else c.visible&&(m=_(n,c,o,s.near,s.far,a),e.renderBufferDirect(s,null,l,m,n,null))}for(var g=n.children,v=0,y=g.length;v<y;v++)b(g[v],r,s,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qc,this.render=function(t,a,l){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var c=e.getRenderTarget(),h=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(lh),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var v=t[p],y=v.shadow;if(void 0!==y){r.copy(y.mapSize);var _,x=y.getFrameExtents();r.multiply(x),s.copy(y.mapSize),(r.x>n||r.y>n)&&(console.warn("THREE.WebGLShadowMap:",v,"has shadow exceeding max texture size, reducing"),r.x>n&&(s.x=Math.floor(n/x.x),r.x=s.x*x.x,y.mapSize.x=s.x),r.y>n&&(s.y=Math.floor(n/x.y),r.y=s.y*x.y,y.mapSize.y=s.y)),null!==y.map||y.isPointLightShadow||this.type!==th||(y.map=new Fd(r.x,r.y,_={minFilter:ou,magFilter:ou,format:Eu}),y.map.texture.name=v.name+".shadowMap",y.mapPass=new Fd(r.x,r.y,_),y.camera.updateProjectionMatrix()),null===y.map&&(y.map=new Fd(r.x,r.y,_={minFilter:iu,magFilter:iu,format:Eu}),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),E=0;E<w;E++){var S=y.getViewport(E);o.set(s.x*S.x,s.y*S.y,s.x*S.z,s.y*S.w),d.viewport(o),y.updateMatrices(v,E),i=y.getFrustum(),b(a,l,y.camera,v,this.type)}y.isPointLightShadow||this.type!==th||g(y,l)}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(c,h,u)}}}function fv(e,t,n){var i=n.isWebGL2,r=new function(){var t=!1,n=new Nd,i=null,r=new Nd(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,o,a){!0===a&&(t*=o,i*=o,s*=o),n.set(t,i,s,o),!1===r.equals(n)&&(e.clearColor(t,i,s,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?z(2929):V(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Ph:e.depthFunc(512);break;case Lh:e.depthFunc(519);break;case Rh:e.depthFunc(513);break;case Oh:e.depthFunc(515);break;case kh:e.depthFunc(514);break;case Dh:e.depthFunc(518);break;case Nh:e.depthFunc(516);break;case Fh:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){var t=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?z(2960):V(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&s===o||(e.stencilFunc(t,n,o),i=t,r=n,s=o)},setOp:function(t,n,i){o===t&&a===n&&l===i||(e.stencilOp(t,n,i),o=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null}}},a=e.getParameter(34921),l=new Uint8Array(a),c=new Uint8Array(a),h=new Uint8Array(a),u={},d=null,p=null,f=null,m=null,g=null,v=null,y=null,_=null,b=null,x=!1,w=null,E=null,S=null,M=null,T=null,C=e.getParameter(35661),A=!1,I=0,P=e.getParameter(7938);-1!==P.indexOf("WebGL")?(I=parseFloat(/^WebGL\ ([0-9])/.exec(P)[1]),A=I>=1):-1!==P.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(P)[1]),A=I>=2);var L=null,R={},O=new Nd,k=new Nd;function D(t,n,i){var r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return s}var N={};function F(n,r){l[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),h[n]!==r&&((i?e:t.get("ANGLE_instanced_arrays"))[i?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),h[n]=r)}function z(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function V(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}N[3553]=D(3553,3553,1),N[34067]=D(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),z(2929),s.setFunc(Oh),j(!1),W(Kc),z(2884),G(lh);var B={[fh]:32774,[mh]:32778,[gh]:32779};if(i)B[vh]=32775,B[yh]=32776;else{var H=t.get("EXT_blend_minmax");null!==H&&(B[vh]=H.MIN_EXT,B[yh]=H.MAX_EXT)}var U={[_h]:0,[bh]:1,[xh]:768,[Eh]:770,[Ih]:776,[Ch]:774,[Mh]:772,[wh]:769,[Sh]:771,[Ah]:775,[Th]:773};function G(t,n,i,r,s,o,a,l){if(t!==lh){if(p||(z(3042),p=!0),t===ph)s=s||n,o=o||i,a=a||r,n===m&&s===y||(e.blendEquationSeparate(B[n],B[s]),m=n,y=s),i===g&&r===v&&o===_&&a===b||(e.blendFuncSeparate(U[i],U[r],U[o],U[a]),g=i,v=r,_=o,b=a),f=t,x=null;else if(t!==f||l!==x){if(m===fh&&y===fh||(e.blendEquation(32774),m=fh,y=fh),l)switch(t){case ch:e.blendFuncSeparate(1,771,1,771);break;case hh:e.blendFunc(1,1);break;case uh:e.blendFuncSeparate(0,0,769,771);break;case dh:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case ch:e.blendFuncSeparate(770,771,1,771);break;case hh:e.blendFunc(770,1);break;case uh:e.blendFunc(0,769);break;case dh:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,v=null,_=null,b=null,f=t,x=l}}else p&&(V(3042),p=!1)}function j(t){w!==t&&(e.frontFace(t?2304:2305),w=t)}function W(t){t!==$c?(z(2884),t!==E&&e.cullFace(t===Kc?1029:t===Jc?1028:1032)):V(2884),E=t}function q(t,n,i){t?(z(32823),M===n&&T===i||(e.polygonOffset(n,i),M=n,T=i)):V(32823)}function Y(t){void 0===t&&(t=33984+C-1),L!==t&&(e.activeTexture(t),L=t)}return{buffers:{color:r,depth:s,stencil:o},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){F(e,0)},enableAttributeAndDivisor:F,disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==l[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:z,disable:V,useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:G,setMaterial:function(e,t){e.side===rh?V(2884):z(2884);var n=e.side===ih;t&&(n=!n),j(n),e.blending===ch&&!1===e.transparent?G(lh):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);var i=e.stencilWrite;o.setTest(i),i&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:j,setCullFace:W,setLineWidth:function(t){t!==S&&(A&&e.lineWidth(t),S=t)},setPolygonOffset:q,setScissorTest:function(e){e?z(3089):V(3089)},activeTexture:Y,bindTexture:function(t,n){null===L&&Y();var i=R[L];void 0===i&&(R[L]=i={type:void 0,texture:void 0}),i.type===t&&i.texture===n||(e.bindTexture(t,n||N[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=R[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===k.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),k.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);u={},L=null,R={},d=null,f=null,w=null,E=null,r.reset(),s.reset(),o.reset()}}}function mv(e,t,n,i,r,s,o){var a,l=r.isWebGL2,c=r.maxTextures,h=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,p=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var s=t?Sd.floorPowerOfTwo:Math.floor,o=s(r*e.width),l=s(r*e.height);void 0===a&&(a=m(o,l));var c=n?m(o,l):a;return c.width=o,c.height=l,c.getContext("2d").drawImage(e,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+l+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return Sd.isPowerOfTwo(e.width)&&Sd.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==iu&&e.minFilter!==ou}function _(t,n,r,s){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,s))*Math.LOG2E}function b(n,i,r){if(!1===l)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),6407===i&&(5126===r&&(s=34837),5131===r&&(s=34843),5121===r&&(s=32849)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=32856)),33325===s||33326===s||34842===s||34836===s?t.get("EXT_color_buffer_float"):34843!==s&&34837!==s||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),s}function x(e){return e===iu||e===ru||e===su?9728:9729}function w(t){var n=t.target;n.removeEventListener("dispose",w),function(t){var n=i.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),i.remove(t))}(n),n.isVideoTexture&&p.delete(n),o.memory.textures--}function E(t){var n=t.target;n.removeEventListener("dispose",E),function(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var s=0;s<6;s++)e.deleteFramebuffer(n.__webglFramebuffer[s]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[s]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(n.__webglColorTexture),e.deleteTexture(n.__webglDepthStencilTexture),o.memory.textures-=2,s=0;for(var a=n.__webglViewFramebuffers.length;s<a;s++)e.deleteFramebuffer(n.__webglViewFramebuffers[s])}i.remove(t.texture),i.remove(t)}}(n),o.memory.textures--}var S=0;function M(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){var s=e.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void R(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function T(t,r){if(6===t.image.length){var o=i.get(t);if(t.version>0&&o.__version!==t.version){L(o,t),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var a=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,u=[],d=0;d<6;d++)u[d]=a||c?c?t.image[d].image:t.image[d]:g(t.image[d],!1,!0,h);var p,f=u[0],m=v(f)||l,x=s.convert(t.format),w=s.convert(t.type),E=b(t.internalFormat,x,w);if(P(34067,t,m),a){for(d=0;d<6;d++){p=u[d].mipmaps;for(var S=0;S<p.length;S++){var M=p[S];t.format!==Eu&&t.format!==wu?null!==x?n.compressedTexImage2D(34069+d,S,E,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+d,S,E,M.width,M.height,0,x,w,M.data)}}o.__maxMipLevel=p.length-1}else{for(p=t.mipmaps,d=0;d<6;d++)if(c)for(n.texImage2D(34069+d,0,E,u[d].width,u[d].height,0,x,w,u[d].data),S=0;S<p.length;S++){var T=(M=p[S]).image[d].image;n.texImage2D(34069+d,S+1,E,T.width,T.height,0,x,w,T.data)}else for(n.texImage2D(34069+d,0,E,x,w,u[d]),S=0;S<p.length;S++)n.texImage2D(34069+d,S+1,E,x,w,(M=p[S]).image[d]);o.__maxMipLevel=p.length}y(t,m)&&_(34067,t,f.width,f.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function C(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}var A={[eu]:10497,[tu]:33071,[nu]:33648},I={[iu]:9728,[ru]:9984,[su]:9986,[ou]:9729,[au]:9985,[lu]:9987};function P(n,s,o){o?(e.texParameteri(n,10242,A[s.wrapS]),e.texParameteri(n,10243,A[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[s.wrapR]),e.texParameteri(n,10240,I[s.magFilter]),e.texParameteri(n,10241,I[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===tu&&s.wrapT===tu||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(s.magFilter)),e.texParameteri(n,10241,x(s.minFilter)),s.minFilter!==iu&&s.minFilter!==ou&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var a=t.get("EXT_texture_filter_anisotropic");if(a){if(s.type===mu&&null===t.get("OES_texture_float_linear"))return;if(s.type===gu&&null===(l||t.get("OES_texture_half_float_linear")))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function L(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),o.memory.textures++)}function R(t,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),L(t,i),n.activeTexture(33984+r),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var a=function(e){return!l&&(e.wrapS!==tu||e.wrapT!==tu||e.minFilter!==iu&&e.minFilter!==ou)}(i)&&!1===v(i.image),c=g(i.image,a,!1,u),h=v(c)||l,d=s.convert(i.format),p=s.convert(i.type),f=b(i.internalFormat,d,p);P(o,i,h);var m,x=i.mipmaps;if(i.isDepthTexture){if(f=6402,i.type===mu){if(!1===l)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else l&&(f=33189);i.format===Cu&&6402===f&&i.type!==du&&i.type!==fu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=du,p=s.convert(i.type)),i.format===Au&&(f=34041,i.type!==bu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=bu,p=s.convert(i.type))),n.texImage2D(3553,0,f,c.width,c.height,0,d,p,null)}else if(i.isDataTexture)if(x.length>0&&h){for(var w=0,E=x.length;w<E;w++)n.texImage2D(3553,w,f,(m=x[w]).width,m.height,0,d,p,m.data);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,f,c.width,c.height,0,d,p,c.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(w=0,E=x.length;w<E;w++)m=x[w],i.format!==Eu&&i.format!==wu?null!==d?n.compressedTexImage2D(3553,w,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,f,m.width,m.height,0,d,p,m.data);t.__maxMipLevel=x.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(w=0,E=x.length;w<E;w++)n.texImage2D(3553,w,f,d,p,m=x[w]);i.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,f,d,p,c),t.__maxMipLevel=0;y(i,h)&&_(o,i,c.width,c.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function O(t,r,o,a){var l=s.convert(r.texture.format),c=s.convert(r.texture.type),h=b(r.texture.internalFormat,l,c);n.texImage2D(a,0,h,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,a,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function k(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(i){var r=D(n);e.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer)i?(r=D(n),e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t);else{var o=s.convert(n.texture.format),a=s.convert(n.texture.type),l=b(n.texture.internalFormat,o,a);i?(r=D(n),e.renderbufferStorageMultisample(36161,r,l,n.width,n.height)):e.renderbufferStorage(36161,l,n.width,n.height)}e.bindRenderbuffer(36161,null)}function D(e){return l&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}var N=!1,F=!1;this.allocateTextureUnit=function(){var e=S;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=M,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?R(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?R(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=T,this.setTextureCubeDynamic=C,this.setupRenderTarget=function(r){var a=i.get(r),c=i.get(r.texture);r.addEventListener("dispose",E),c.__webglTexture=e.createTexture(),o.memory.textures++;var h=!0===r.isWebGLRenderTargetCube,u=!0===r.isWebGLMultisampleRenderTarget,d=!0===r.isWebGLMultiviewRenderTarget,p=v(r)||l;if(h){a.__webglFramebuffer=[];for(var f=0;f<6;f++)a.__webglFramebuffer[f]=e.createFramebuffer()}else if(a.__webglFramebuffer=e.createFramebuffer(),u)if(l){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var m=s.convert(r.texture.format),g=s.convert(r.texture.type),x=b(r.texture.internalFormat,m,g),w=D(r);e.renderbufferStorageMultisample(36161,w,x,r.width,r.height),e.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),r.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),k(a.__webglDepthRenderbuffer,r,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(d){var S=r.width,T=r.height,C=r.numViews;e.bindFramebuffer(36160,a.__webglFramebuffer);var A=t.get("OVR_multiview2");o.memory.textures+=2;var I=e.createTexture();e.bindTexture(35866,I),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,S,T,C,0,6408,5121,null),A.framebufferTextureMultiviewOVR(36160,36064,I,0,0,C);var L=e.createTexture();e.bindTexture(35866,L),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,S,T,C,0,34041,34042,null),A.framebufferTextureMultiviewOVR(36160,33306,L,0,0,C);var R=new Array(C);for(f=0;f<C;++f)R[f]=e.createFramebuffer(),e.bindFramebuffer(36160,R[f]),e.framebufferTextureLayer(36160,36064,I,0,f);a.__webglColorTexture=I,a.__webglDepthStencilTexture=L,a.__webglViewFramebuffers=R,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(h){for(n.bindTexture(34067,c.__webglTexture),P(34067,r.texture,p),f=0;f<6;f++)O(a.__webglFramebuffer[f],r,36064,34069+f);y(r.texture,p)&&_(34067,r.texture,r.width,r.height),n.bindTexture(34067,null)}else d||(n.bindTexture(3553,c.__webglTexture),P(3553,r.texture,p),O(a.__webglFramebuffer,r,36064,3553),y(r.texture,p)&&_(3553,r.texture,r.width,r.height),n.bindTexture(3553,null));r.depthBuffer&&function(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),M(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Cu)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Au)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var s=0;s<6;s++)e.bindFramebuffer(36160,n.__webglFramebuffer[s]),n.__webglDepthbuffer[s]=e.createRenderbuffer(),k(n.__webglDepthbuffer[s],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),k(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}(r)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(y(t,v(e)||l)){var r=e.isWebGLRenderTargetCube?34067:3553,s=i.get(t).__webglTexture;n.bindTexture(r,s),_(r,t,e.width,e.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(l){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var r=t.width,s=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,r,s,0,0,r,s,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),M(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?T(e,t):C(e,t)}}function gv(e,t,n){var i=n.isWebGL2;return{convert:function(e){var n;if(e===cu)return 5121;if(e===vu)return 32819;if(e===yu)return 32820;if(e===_u)return 33635;if(e===hu)return 5120;if(e===uu)return 5122;if(e===du)return 5123;if(e===pu)return 5124;if(e===fu)return 5125;if(e===mu)return 5126;if(e===gu)return i?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(e===xu)return 6406;if(e===wu)return 6407;if(e===Eu)return 6408;if(e===Su)return 6409;if(e===Mu)return 6410;if(e===Cu)return 6402;if(e===Au)return 34041;if(e===Iu)return 6403;if(e===Pu)return 36244;if(e===Lu)return 33319;if(e===Ru)return 33320;if(e===Ou)return 36248;if(e===ku)return 36249;if(e===Du||e===Nu||e===Fu||e===zu){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===Du)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Nu)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Fu)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===zu)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===Vu||e===Bu||e===Hu||e===Uu){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===Vu)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Bu)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Hu)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Uu)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===Gu?null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null:e===ju||e===Wu||e===qu||e===Yu||e===Xu||e===Zu||e===$u||e===Ku||e===Ju||e===Qu||e===ed||e===td||e===nd||e===id?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:e===bu?i?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function vv(e,t,n,i){Fd.call(this,e,t,i),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function yv(e,t){var n,i,r,s,o,a,l,c=e.extensions,h=e.properties,u=0;function d(e){return e.isArrayCamera?e.cameras:(o[0]=e,o)}this.isAvailable=function(){if(void 0===l){var e=c.get("OVR_multiview2");if(l=null!==e&&!1===t.getContextAttributes().antialias){u=t.getParameter(e.MAX_VIEWS_OVR),n=new vv(0,0,2),a=new Md,s=[],r=[],o=[];for(var i=0;i<u;i++)s[i]=new qd,r[i]=new Rd}}return l},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>u)return!1;for(var n=1,i=t.length;n<i;n++)if(t[0].viewport.z!==t[n].viewport.z||t[0].viewport.w!==t[n].viewport.w)return!1;return!0}(t)&&(i=e.getRenderTarget(),function(t){if(i?a.set(i.width,i.height):e.getDrawingBufferSize(a),t.isArrayCamera){var r=t.cameras[0].viewport;n.setSize(r.z,r.w),n.setNumViews(t.cameras.length)}else n.setSize(a.x,a.y),n.setNumViews(2)}(t),e.setRenderTarget(n))},this.detachCamera=function(r){n===e.getRenderTarget()&&(e.setRenderTarget(i),function(e){var i=n,r=i.numViews,s=h.get(i).__webglViewFramebuffers,o=i.width,l=i.height;if(e.isArrayCamera)for(var c=0;c<r;c++){var u=e.cameras[c].viewport,d=u.x,p=u.y,f=d+u.z,m=p+u.w;t.bindFramebuffer(36008,s[c]),t.blitFramebuffer(0,0,o,l,d,p,f,m,16384,9728)}else t.bindFramebuffer(36008,s[0]),t.blitFramebuffer(0,0,o,l,0,0,a.x,a.y,16384,9728)}(r))},this.updateCameraProjectionMatricesUniform=function(e,n){for(var i=d(e),r=0;r<i.length;r++)s[r].copy(i[r].projectionMatrix);n.setValue(t,"projectionMatrices",s)},this.updateCameraViewMatricesUniform=function(e,n){for(var i=d(e),r=0;r<i.length;r++)s[r].copy(i[r].matrixWorldInverse);n.setValue(t,"viewMatrices",s)},this.updateObjectMatricesUniforms=function(e,n,i){for(var o=d(n),a=0;a<o.length;a++)s[a].multiplyMatrices(o[a].matrixWorldInverse,e.matrixWorld),r[a].getNormalMatrix(s[a]);i.setValue(t,"modelViewMatrices",s),i.setValue(t,"normalMatrices",r)}}function _v(e){hm.call(this),this.cameras=e||[]}function bv(){hp.call(this),this.type="Group"}function xv(e,t){var n=this,i=null,r=null,s="local-floor",o=null,a=[],l=new Map,c=new hm;c.layers.enable(1),c.viewport=new Nd;var h=new hm;h.layers.enable(2),h.viewport=new Nd;var u=new _v([c,h]);function d(e){var t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type})}function p(){l.forEach(function(e,t){e.dispatchEvent({type:"disconnected",data:t}),e.visible=!1}),l.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),b.stop(),n.dispatchEvent({type:"sessionend"}),n.isPresenting=!1}function f(e){r=e,b.setContext(i),b.start(),n.dispatchEvent({type:"sessionstart"}),n.isPresenting=!0}function m(e){for(var t=i.inputSources,n=0;n<a.length;n++)l.set(t[n],a[n]);for(n=0;n<e.removed.length;n++)(s=l.get(r=e.removed[n]))&&(s.dispatchEvent({type:"disconnected",data:r}),l.delete(r));for(n=0;n<e.added.length;n++){var r,s;(s=l.get(r=e.added[n]))&&s.dispatchEvent({type:"connected",data:r})}}u.layers.enable(1),u.layers.enable(2),this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new bv).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){s=e},this.getReferenceSpace=function(){return r},this.getSession=function(){return i},this.setSession=function(e){if(null!==(i=e)){i.addEventListener("select",d),i.addEventListener("selectstart",d),i.addEventListener("selectend",d),i.addEventListener("squeeze",d),i.addEventListener("squeezestart",d),i.addEventListener("squeezeend",d),i.addEventListener("end",p);var n=t.getContextAttributes(),r=new XRWebGLLayer(i,t,{antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil});i.updateRenderState({baseLayer:r}),i.requestReferenceSpace(s).then(f),i.addEventListener("inputsourceschange",m)}};var g=new Id,v=new Id;function y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){var t=e.parent,n=u.cameras;y(u,t);for(var i=0;i<n.length;i++)y(n[i],t);e.matrixWorld.copy(u.matrixWorld);for(var r=e.children,s=(i=0,r.length);i<s;i++)r[i].updateMatrixWorld(!0);return function(e,t,n){g.setFromMatrixPosition(t.matrixWorld),v.setFromMatrixPosition(n.matrixWorld);var i=g.distanceTo(v),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(s[8]+1)/s[0],d=o*h,p=o*u,f=i/(-h+u),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var y=o+f,_=a+f;e.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/_*y,c*a/_*y,y,_)}(u,c,h),u};var _=null,b=new wm;b.setAnimationLoop(function(t,n){if(null!==(o=n.getViewerPose(r))){var s=o.views,l=i.renderState.baseLayer;e.setFramebuffer(l.framebuffer);for(var c=0;c<s.length;c++){var h=s[c],d=l.getViewport(h),p=u.cameras[c];p.matrix.fromArray(h.transform.inverse.matrix).getInverse(p.matrix),p.projectionMatrix.fromArray(h.projectionMatrix),p.viewport.set(d.x,d.y,d.width,d.height),0===c&&u.matrix.copy(p.matrix)}}var f=i.inputSources;for(c=0;c<a.length;c++){var m=a[c],g=f[c];if(g){var v=n.getPose(g.targetRaySpace,r);if(null!==v){m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}_&&_(t,n)}),this.setAnimationLoop=function(e){_=e},this.dispose=function(){}}function wv(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,u=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=od,this.physicallyCorrectLights=!1,this.toneMapping=Uh,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,g,v,y,_,b,x,w,E,S,M,T,C,A,I,P,L=this,R=!1,O=null,k=0,D=0,N=null,F=null,z=-1,V={geometry:null,program:null,wireframe:!1},B=null,H=null,U=new Nd,G=new Nd,j=null,W=t.width,q=t.height,Y=1,X=null,Z=null,$=new Nd(0,0,W,q),K=new Nd(0,0,W,q),J=!1,Q=new ym,ee=new Im,te=!1,ne=!1,ie=new qd,re=new Id;function se(){return null===N?Y:1}try{var oe={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(t.addEventListener("webglcontextlost",ue,!1),t.addEventListener("webglcontextrestored",de,!1),null===(p=n||t.getContext("webgl",oe)||t.getContext("experimental-webgl",oe)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Se){throw console.error("THREE.WebGLRenderer: "+Se.message),Se}function ae(){f=new Pm(p),!1===(m=new Am(p,f,e)).isWebGL2&&(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),P=new gv(p,f,m),(g=new fv(p,f,m)).scissor(G.copy(K).multiplyScalar(Y).floor()),g.viewport(U.copy($).multiplyScalar(Y).floor()),v=new Om(p),y=new Jg,_=new mv(p,f,g,y,m,P,v),b=new Em(p),x=new Lm(p,b,v),w=new Nm(p,x,b,v),C=new Dm(p),E=new Kg(L,f,m),S=new nv,M=new lv,T=new Tm(L,g,w,a),A=new Cm(p,f,v,m),I=new Rm(p,f,v,m),v.programs=E.programs,L.capabilities=m,L.extensions=f,L.properties=y,L.renderLists=S,L.state=g,L.info=v}ae();var le=new xv(L,p);this.xr=le;var ce=new yv(L,p),he=new pv(L,w,m.maxTextureSize);function ue(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1,ae()}function pe(e){var t=e.target;t.removeEventListener("dispose",pe),function(e){fe(e),y.remove(e)}(t)}function fe(e){var t=y.get(e).program;e.program=void 0,void 0!==t&&E.releaseProgram(t)}this.shadowMap=he,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(W,q,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Md),e.set(W,q)},this.setSize=function(e,n,i){le.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,q=n,t.width=Math.floor(e*Y),t.height=Math.floor(n*Y),!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Md),e.set(W*Y,q*Y).floor()},this.setDrawingBufferSize=function(e,n,i){W=e,q=n,Y=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Nd),e.copy(U)},this.getViewport=function(e){return e.copy($)},this.setViewport=function(e,t,n,i){e.isVector4?$.set(e.x,e.y,e.z,e.w):$.set(e,t,n,i),g.viewport(U.copy($).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(K)},this.setScissor=function(e,t,n,i){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,i),g.scissor(G.copy(K).multiplyScalar(Y).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(e){g.setScissorTest(J=e)},this.setOpaqueSort=function(e){X=e},this.setTransparentSort=function(e){Z=e},this.getClearColor=function(){return T.getClearColor()},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),p.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ue,!1),t.removeEventListener("webglcontextrestored",de,!1),S.dispose(),M.dispose(),y.dispose(),w.dispose(),le.dispose(),ve.stop()},this.renderBufferImmediate=function(e,t){g.initAttributes();var n=y.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var i=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),g.enableAttribute(i.position),p.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),g.enableAttribute(i.normal),p.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),g.enableAttribute(i.uv),p.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),g.enableAttribute(i.color),p.vertexAttribPointer(i.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var me=new up;this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=me);var o=r.isMesh&&r.matrixWorld.determinant()<0,a=xe(e,t,i,r);g.setMaterial(i,o);var l=!1;V.geometry===n.id&&V.program===a.id&&V.wireframe===(!0===i.wireframe)||(V.geometry=n.id,V.program=a.id,V.wireframe=!0===i.wireframe,l=!0),(i.morphTargets||i.morphNormals)&&(C.update(r,n,i,a),l=!0);var c=n.index,h=n.attributes.position;if(null===c){if(void 0===h||0===h.count)return}else if(0===c.count)return;var u,d=1;!0===i.wireframe&&(c=x.getWireframeAttribute(n),d=2);var v=A;null!==c&&(u=b.get(c),(v=I).setIndex(u)),l&&(function(e,t,n,i){if(!1!==m.isWebGL2||!e.isInstancedMesh&&!t.isInstancedBufferGeometry||null!==f.get("ANGLE_instanced_arrays")){g.initAttributes();var r=t.attributes,s=i.getAttributes(),o=n.defaultAttributeValues;for(var a in s){var l=s[a];if(l>=0){var c=r[a];if(void 0!==c){var h=c.normalized,u=c.itemSize;if(void 0===(E=b.get(c)))continue;var d=E.buffer,v=E.type,y=E.bytesPerElement;if(c.isInterleavedBufferAttribute){var _=c.data,x=_.stride,w=c.offset;_&&_.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(l,_.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=_.meshPerAttribute*_.count)):g.enableAttribute(l),p.bindBuffer(34962,d),p.vertexAttribPointer(l,u,v,h,x*y,w*y)}else c.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(l,c.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=c.meshPerAttribute*c.count)):g.enableAttribute(l),p.bindBuffer(34962,d),p.vertexAttribPointer(l,u,v,h,0,0)}else if("instanceMatrix"===a){var E;if(void 0===(E=b.get(e.instanceMatrix)))continue;d=E.buffer,v=E.type,g.enableAttributeAndDivisor(l+0,1),g.enableAttributeAndDivisor(l+1,1),g.enableAttributeAndDivisor(l+2,1),g.enableAttributeAndDivisor(l+3,1),p.bindBuffer(34962,d),p.vertexAttribPointer(l+0,4,v,!1,64,0),p.vertexAttribPointer(l+1,4,v,!1,64,16),p.vertexAttribPointer(l+2,4,v,!1,64,32),p.vertexAttribPointer(l+3,4,v,!1,64,48)}else if(void 0!==o){var S=o[a];if(void 0!==S)switch(S.length){case 2:p.vertexAttrib2fv(l,S);break;case 3:p.vertexAttrib3fv(l,S);break;case 4:p.vertexAttrib4fv(l,S);break;default:p.vertexAttrib1fv(l,S)}}}}g.disableUnusedAttributes()}}(r,n,i,a),null!==c&&p.bindBuffer(34963,u.buffer));var y=null!==c?c.count:h.count,_=n.drawRange.start*d,w=n.drawRange.count*d,E=null!==s?s.start*d:0,S=null!==s?s.count*d:1/0,M=Math.max(_,E),T=Math.min(y,_+w,E+S)-1,P=Math.max(0,T-M+1);if(0!==P){if(r.isMesh)!0===i.wireframe?(g.setLineWidth(i.wireframeLinewidth*se()),v.setMode(1)):v.setMode(4);else if(r.isLine){var L=i.linewidth;void 0===L&&(L=1),g.setLineWidth(L*se()),v.setMode(r.isLineSegments?1:r.isLineLoop?2:3)}else r.isPoints?v.setMode(0):r.isSprite&&v.setMode(4);r.isInstancedMesh?v.renderInstances(n,M,P,r.count):n.isInstancedBufferGeometry?v.renderInstances(n,M,P,n.maxInstancedCount):v.render(M,P)}},this.compile=function(e,t){(d=M.get(e,t)).init(),e.traverse(function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))}),d.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)be(t.material[n],e,t);else be(t.material,e,t)})};var ge=null,ve=new wm;function ye(e,t,n,i){for(var r=0,s=e.length;r<s;r++){var o=e[r],a=o.object,l=o.geometry,c=void 0===i?o.material:i,h=o.group;if(n.isArrayCamera)if(H=n,le.enabled&&ce.isAvailable())_e(a,t,n,l,c,h);else for(var u=n.cameras,p=0,f=u.length;p<f;p++){var m=u[p];a.layers.test(m.layers)&&(g.viewport(U.copy(m.viewport)),d.setupLights(m),_e(a,t,m,l,c,h))}else H=null,_e(a,t,n,l,c,h)}}function _e(e,t,n,i,r,s){if(e.onBeforeRender(L,t,n,i,r,s),d=M.get(t,H||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=xe(n,t,r,e);g.setMaterial(r),V.geometry=null,V.program=null,V.wireframe=!1,function(e,t){e.render(function(e){L.renderBufferImmediate(e,t)})}(e,o)}else L.renderBufferDirect(n,t,i,r,e,s);e.onAfterRender(L,t,n,i,r,s),d=M.get(t,H||n)}function be(e,t,n){var i=y.get(e),r=d.state.lights,s=r.state.version,o=E.getParameters(e,r.state,d.state.shadowsArray,t,ee.numPlanes,ee.numIntersection,n),a=E.getProgramCacheKey(e,o),l=i.program,c=!0;if(void 0===l)e.addEventListener("dispose",pe);else if(l.cacheKey!==a)fe(e);else if(i.lightsStateVersion!==s)i.lightsStateVersion=s,c=!1;else{if(void 0!==o.shaderID)return;c=!1}if(c){if(o.shaderID){var h=xm[o.shaderID];i.shader={name:e.type,uniforms:rm(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,L),a=E.getProgramCacheKey(e,o),l=E.acquireProgram(e,i.shader,o,a),i.program=l,i.environment=e.isMeshStandardMaterial?t.environment:null,i.outputEncoding=L.outputEncoding,e.program=l}var u=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<L.maxMorphTargets;p++)u["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,p=0;p<L.maxMorphNormals;p++)u["morphNormal"+p]>=0&&e.numSupportedMorphNormals++;var f=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ee.numPlanes,i.numIntersection=ee.numIntersection,f.clippingPlanes=ee.uniform),i.fog=t.fog,i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),g=Og.seqWithValue(m.seq,f);i.uniformsList=g}function xe(e,t,n,i){_.resetTextureUnits();var r=t.fog,s=n.isMeshStandardMaterial?t.environment:null,o=y.get(n),a=d.state.lights;te&&(ne||e!==B)&&ee.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,o,e===B&&n.id===z),n.version===o.__version&&(void 0===o.program?n.needsUpdate=!0:n.fog&&o.fog!==r?n.needsUpdate=!0:o.environment!==s?n.needsUpdate=!0:o.needsLights&&o.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===o.numClippingPlanes||o.numClippingPlanes===ee.numPlanes&&o.numIntersection===ee.numIntersection?o.outputEncoding!==L.outputEncoding&&(n.needsUpdate=!0):n.needsUpdate=!0),n.version!==o.__version&&(be(n,t,i),o.__version=n.version);var l,c,h=!1,u=!1,f=!1,v=o.program,b=v.getUniforms(),x=o.shader.uniforms;if(g.useProgram(v.program)&&(h=!0,u=!0,f=!0),n.id!==z&&(z=n.id,u=!0),h||B!==e){if(v.numMultiviewViews>0?ce.updateCameraProjectionMatricesUniform(e,b):b.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),B!==e&&(B=e,u=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var w=b.map.cameraPosition;void 0!==w&&w.setValue(p,re.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(v.numMultiviewViews>0?ce.updateCameraViewMatricesUniform(e,b):b.setValue(p,"viewMatrix",e.matrixWorldInverse))}if(n.skinning){b.setOptional(p,i,"bindMatrix"),b.setOptional(p,i,"bindMatrixInverse");var E=i.skeleton;if(E)if(m.floatVertexTextures){if(void 0===E.boneTexture){var S=Math.sqrt(4*E.bones.length);S=Sd.ceilPowerOfTwo(S),S=Math.max(S,4);var M=new Float32Array(S*S*4);M.set(E.boneMatrices);var T=new mm(M,S,S,Eu,mu);E.boneMatrices=M,E.boneTexture=T,E.boneTextureSize=S}b.setValue(p,"boneTexture",E.boneTexture,_),b.setValue(p,"boneTextureSize",E.boneTextureSize)}else b.setOptional(p,E,"boneMatrices")}return(u||o.receiveShadow!==i.receiveShadow)&&(o.receiveShadow=i.receiveShadow,b.setValue(p,"receiveShadow",i.receiveShadow)),u&&(b.setValue(p,"toneMappingExposure",L.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",L.toneMappingWhitePoint),o.needsLights&&((l=x).ambientLightColor.needsUpdate=c=f,l.lightProbe.needsUpdate=c,l.directionalLights.needsUpdate=c,l.pointLights.needsUpdate=c,l.spotLights.needsUpdate=c,l.rectAreaLights.needsUpdate=c,l.hemisphereLights.needsUpdate=c),r&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(x,r),n.isMeshBasicMaterial?we(x,n):n.isMeshLambertMaterial?(we(x,n),function(e,t){t.emissiveMap&&(x.emissiveMap.value=t.emissiveMap)}(0,n)):n.isMeshToonMaterial?(we(x,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ih&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ih&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshPhongMaterial?(we(x,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ih&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ih&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshStandardMaterial?(we(x,n,s),n.isMeshPhysicalMaterial?function(e,t,n){Ee(e,t,n),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===ih&&e.clearcoatNormalScale.value.negate()),e.transparency.value=t.transparency}(x,n,s):Ee(x,n,s)):n.isMeshMatcapMaterial?(we(x,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ih&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ih&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDepthMaterial?(we(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDistanceMaterial?(we(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(x,n)):n.isMeshNormalMaterial?(we(x,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ih&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ih&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(x,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(x,n)):n.isPointsMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*q,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(x,n):n.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(x,n):n.isShadowMaterial&&(x.color.value.copy(n.color),x.opacity.value=n.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=bm.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=bm.LTC_2),Og.upload(p,o.uniformsList,x,_),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Og.upload(p,o.uniformsList,x,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",i.center),v.numMultiviewViews>0?ce.updateObjectMatricesUniforms(i,e,b):(b.setValue(p,"modelViewMatrix",i.modelViewMatrix),b.setValue(p,"normalMatrix",i.normalMatrix)),b.setValue(p,"modelMatrix",i.matrixWorld),v}function we(e,t,n){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var i,r,s=t.envMap||n;s&&(e.envMap.value=s,e.flipEnvMap.value=s.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=y.get(s).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),t.aoMap?r=t.aoMap:t.lightMap&&(r=t.lightMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uv2Transform.value.copy(r.matrix))}function Ee(e,t,n){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===ih&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===ih&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||n)&&(e.envMapIntensity.value=t.envMapIntensity)}ve.setAnimationLoop(function(e){le.isPresenting||ge&&ge(e)}),"undefined"!=typeof window&&ve.setContext(window),this.setAnimationLoop=function(e){ge=e,le.setAnimationLoop(e),ve.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),t&&t.isCamera){if(!R){V.geometry=null,V.program=null,V.wireframe=!1,z=-1,B=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),le.enabled&&le.isPresenting&&(t=le.getCamera(t)),(d=M.get(e,t)).init(),e.onBeforeRender(L,e,t,n||N),ie.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Q.setFromMatrix(ie),te=ee.init(this.clippingPlanes,ne=this.localClippingEnabled,t),(u=S.get(e,t)).init(),function e(t,n,i,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Q.intersectsSprite(t)){r&&re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ie);var s=w.update(t);(o=t.material).visible&&u.push(t,s,o,i,re.z,null)}}else if(t.isImmediateRenderObject)r&&re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ie),u.push(t,null,t.material,i,re.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==v.render.frame&&(t.skeleton.update(),t.skeleton.frame=v.render.frame),!t.frustumCulled||Q.intersectsObject(t))){r&&re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ie),s=w.update(t);var o=t.material;if(Array.isArray(o))for(var a=s.groups,l=0,c=a.length;l<c;l++){var h=a[l],p=o[h.materialIndex];p&&p.visible&&u.push(t,s,p,i,re.z,h)}else o.visible&&u.push(t,s,o,i,re.z,null)}var f=t.children;for(l=0,c=f.length;l<c;l++)e(f[l],n,i,r)}}(e,t,0,L.sortObjects),!0===L.sortObjects&&u.sort(X,Z),te&&ee.beginShadows(),he.render(d.state.shadowsArray,e,t),d.setupLights(t),te&&ee.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),le.enabled&&ce.isAvailable()&&ce.attachCamera(t),T.render(u,e,t,i);var r=u.opaque,s=u.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;r.length&&ye(r,e,t,o),s.length&&ye(s,e,t,o)}else r.length&&ye(r,e,t),s.length&&ye(s,e,t);e.onAfterRender(L,e,t),null!==N&&(_.updateRenderTargetMipmap(N),_.updateMultisampleRenderTarget(N)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),le.enabled&&ce.isAvailable()&&ce.detachCamera(t),u=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){O!==e&&null===N&&p.bindFramebuffer(36160,e),O=e},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return N},this.setRenderTarget=function(e,t,n){N=e,k=t,D=n,e&&void 0===y.get(e).__webglFramebuffer&&_.setupRenderTarget(e);var i=O,r=!1;if(e){var s=y.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(i=s[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?y.get(e).__webglMultisampledFramebuffer:s,U.copy(e.viewport),G.copy(e.scissor),j=e.scissorTest}else U.copy($).multiplyScalar(Y).floor(),G.copy(K).multiplyScalar(Y).floor(),j=J;if(F!==i&&(p.bindFramebuffer(36160,i),F=i),g.viewport(U),g.scissor(G),g.setScissorTest(j),r){var o=y.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,s,o){if(e&&e.isWebGLRenderTarget){var a=y.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==o&&(a=a[o]),a){var l=!1;a!==F&&(p.bindFramebuffer(36160,a),l=!0);try{var c=e.texture,h=c.format,u=c.type;if(h!==Eu&&P.convert(h)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===cu||P.convert(u)===p.getParameter(35738)||u===mu&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||u===gu&&f.get(m.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&p.readPixels(t,n,i,r,P.convert(h),P.convert(u),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&p.bindFramebuffer(36160,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i),o=P.convert(t.format);_.setTexture2D(t,0),p.copyTexImage2D(3553,n,o,e.x,e.y,r,s,0),g.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,s=t.image.height,o=P.convert(n.format),a=P.convert(n.type);_.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,i||0,e.x,e.y,r,s,o,a,t.image.data):p.texSubImage2D(3553,i||0,e.x,e.y,o,a,t.image),g.unbindTexture()},this.initTexture=function(e){_.setTexture2D(e,0),g.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ev(e,t){this.name="",this.color=new tf(e),this.density=void 0!==t?t:25e-5}function Sv(e,t,n){this.name="",this.color=new tf(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Mv(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=bd,this.updateRange={offset:0,count:-1},this.version=0}vv.prototype=Object.assign(Object.create(Fd.prototype),{constructor:vv,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Fd.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),_v.prototype=Object.assign(Object.create(hm.prototype),{constructor:_v,isArrayCamera:!0}),bv.prototype=Object.assign(Object.create(hp.prototype),{constructor:bv,isGroup:!0}),Object.assign(xv.prototype,xd.prototype),Object.assign(Ev.prototype,{isFogExp2:!0,clone:function(){return new Ev(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Sv.prototype,{isFog:!0,clone:function(){return new Sv(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Mv.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Mv.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var Tv,Cv=new Id;function Av(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Iv(e){lf.call(this),this.type="SpriteMaterial",this.color=new tf(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(Av.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Av.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,n=this.data.count;t<n;t++)Cv.x=this.getX(t),Cv.y=this.getY(t),Cv.z=this.getZ(t),Cv.applyMatrix4(e),this.setXYZ(t,Cv.x,Cv.y,Cv.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),(Iv.prototype=Object.create(lf.prototype)).constructor=Iv,Iv.prototype.isSpriteMaterial=!0,Iv.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Pv=new Id,Lv=new Id,Rv=new Id,Ov=new Md,kv=new Md,Dv=new qd,Nv=new Id,Fv=new Id,zv=new Id,Vv=new Md,Bv=new Md,Hv=new Md;function Uv(e){if(hp.call(this),this.type="Sprite",void 0===Tv){Tv=new Pf;var t=new Mv(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Tv.setIndex([0,1,2,0,2,3]),Tv.setAttribute("position",new Av(t,3,0,!1)),Tv.setAttribute("uv",new Av(t,2,3,!1))}this.geometry=Tv,this.material=void 0!==e?e:new Iv,this.center=new Md(.5,.5)}function Gv(e,t,n,i,r,s){Ov.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(kv.x=s*Ov.x-r*Ov.y,kv.y=r*Ov.x+s*Ov.y):kv.copy(Ov),e.copy(t),e.x+=kv.x,e.y+=kv.y,e.applyMatrix4(Dv)}Uv.prototype=Object.assign(Object.create(hp.prototype),{constructor:Uv,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Lv.setFromMatrixScale(this.matrixWorld),Dv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Lv.multiplyScalar(-Rv.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var s=this.center;Gv(Nv.set(-.5,-.5,0),Rv,s,Lv,n,i),Gv(Fv.set(.5,-.5,0),Rv,s,Lv,n,i),Gv(zv.set(.5,.5,0),Rv,s,Lv,n,i),Vv.set(0,0),Bv.set(1,0),Hv.set(1,1);var o=e.ray.intersectTriangle(Nv,Fv,zv,!1,Pv);if(null!==o||(Gv(Fv.set(-.5,.5,0),Rv,s,Lv,n,i),Bv.set(0,1),null!==(o=e.ray.intersectTriangle(Nv,zv,Fv,!1,Pv)))){var a=e.ray.origin.distanceTo(Pv);a<e.near||a>e.far||t.push({distance:a,point:Pv.clone(),uv:Kp.getUV(Pv,Nv,Fv,zv,Vv,Bv,Hv,new Md),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return hp.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var jv=new Id,Wv=new Id;function qv(){hp.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Yv(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Xf.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qd,this.bindMatrixInverse=new qd}qv.prototype=Object.assign(Object.create(hp.prototype),{constructor:qv,isLOD:!0,copy:function(e){hp.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){jv.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(jv);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){jv.setFromMatrixPosition(e.matrixWorld),Wv.setFromMatrixPosition(this.matrixWorld);var n=jv.distanceTo(Wv);t[0].object.visible=!0;for(var i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){var t=hp.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var s=n[i];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}}),Yv.prototype=Object.assign(Object.create(Xf.prototype),{constructor:Yv,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Nd,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Xf.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Xv=new qd,Zv=new qd;function $v(e,t){if(this.bones=(e=e||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new qd)}}function Kv(){hp.call(this),this.type="Bone"}Object.assign($v.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new qd;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,s=e.length;r<s;r++)Xv.multiplyMatrices(e[r]?e[r].matrixWorld:Zv,t[r]),Xv.toArray(n,16*r);void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new $v(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Kv.prototype=Object.assign(Object.create(hp.prototype),{constructor:Kv,isBone:!0});var Jv=new qd,Qv=new qd,ey=[],ty=new Xf;function ny(e,t,n){Xf.call(this,e,t),this.instanceMatrix=new uf(new Float32Array(16*n),16),this.count=n}function iy(e){lf.call(this),this.type="LineBasicMaterial",this.color=new tf(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}ny.prototype=Object.assign(Object.create(Xf.prototype),{constructor:ny,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var n=this.matrixWorld,i=this.count;if(ty.geometry=this.geometry,ty.material=this.material,void 0!==ty.material)for(var r=0;r<i;r++)this.getMatrixAt(r,Jv),Qv.multiplyMatrices(n,Jv),ty.matrixWorld=Qv,ty.raycast(e,ey),ey.length>0&&(ey[0].instanceId=r,ey[0].object=this,t.push(ey[0]),ey.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),(iy.prototype=Object.create(lf.prototype)).constructor=iy,iy.prototype.isLineBasicMaterial=!0,iy.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var ry=new Id,sy=new Id,oy=new qd,ay=new Np,ly=new Ap;function cy(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),hp.call(this),this.type="Line",this.geometry=void 0!==e?e:new Pf,this.material=void 0!==t?t:new iy({color:16777215*Math.random()})}cy.prototype=Object.assign(Object.create(hp.prototype),{constructor:cy,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)ry.fromBufferAttribute(t,i-1),sy.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=ry.distanceTo(sy);e.setAttribute("lineDistance",new _f(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var s=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=s.length;i<r;i++)n[i]=n[i-1],n[i]+=s[i-1].distanceTo(s[i])}return this},raycast:function(e,t){var n=e.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),ly.copy(i.boundingSphere),ly.applyMatrix4(r),ly.radius+=n,!1!==e.ray.intersectsSphere(ly)){oy.getInverse(r),ay.copy(e.ray).applyMatrix4(oy);var s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new Id,l=new Id,c=new Id,h=new Id,u=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var d=i.index,p=i.attributes.position.array;if(null!==d)for(var f=d.array,m=0,g=f.length-1;m<g;m+=u){var v=f[m+1];a.fromArray(p,3*f[m]),l.fromArray(p,3*v),ay.distanceSqToSegment(a,l,h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(h))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,g=p.length/3-1;m<g;m+=u)a.fromArray(p,3*m),l.fromArray(p,3*m+3),ay.distanceSqToSegment(a,l,h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(h))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(i.isGeometry){var y=i.vertices,_=y.length;for(m=0;m<_-1;m+=u){var b;ay.distanceSqToSegment(y[m],y[m+1],h,c)>o||(h.applyMatrix4(this.matrixWorld),(b=e.ray.origin.distanceTo(h))<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var hy=new Id,uy=new Id;function dy(e,t){cy.call(this,e,t),this.type="LineSegments"}function py(e,t){cy.call(this,e,t),this.type="LineLoop"}function fy(e){lf.call(this),this.type="PointsMaterial",this.color=new tf(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}dy.prototype=Object.assign(Object.create(cy.prototype),{constructor:dy,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)hy.fromBufferAttribute(t,i),uy.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+hy.distanceTo(uy);e.setAttribute("lineDistance",new _f(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var s=e.vertices;for(n=e.lineDistances,i=0,r=s.length;i<r;i+=2)hy.copy(s[i]),uy.copy(s[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+hy.distanceTo(uy)}return this}}),py.prototype=Object.assign(Object.create(cy.prototype),{constructor:py,isLineLoop:!0}),(fy.prototype=Object.create(lf.prototype)).constructor=fy,fy.prototype.isPointsMaterial=!0,fy.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var my=new qd,gy=new Np,vy=new Ap,yy=new Id;function _y(e,t){hp.call(this),this.type="Points",this.geometry=void 0!==e?e:new Pf,this.material=void 0!==t?t:new fy({color:16777215*Math.random()}),this.updateMorphTargets()}function by(e,t,n,i,r,s,o){var a=gy.distanceSqToPoint(e);if(a<n){var l=new Id;gy.closestPointToPoint(e,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}function xy(e,t,n,i,r,s,o,a,l){Dd.call(this,e,t,n,i,r,s,o,a,l),this.format=void 0!==o?o:wu,this.minFilter=void 0!==s?s:ou,this.magFilter=void 0!==r?r:ou,this.generateMipmaps=!1}function wy(e,t,n,i,r,s,o,a,l,c,h,u){Dd.call(this,null,s,o,a,l,c,i,r,h,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ey(e,t,n,i,r,s,o,a,l){Dd.call(this,e,t,n,i,r,s,o,a,l),this.needsUpdate=!0}function Sy(e,t,n,i,r,s,o,a,l,c){if((c=void 0!==c?c:Cu)!==Cu&&c!==Au)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Cu&&(n=du),void 0===n&&c===Au&&(n=bu),Dd.call(this,null,i,r,s,o,a,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:iu,this.minFilter=void 0!==a?a:iu,this.flipY=!1,this.generateMipmaps=!1}function My(e){Pf.call(this),this.type="WireframeGeometry";var t,n,i,r,s,o,a,l,c,h,u=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)a=g[f[n]],l=g[f[(n+1)%3]],d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)u.push((h=e.vertices[(o=p[c]).index1]).x,h.y,h.z),u.push((h=e.vertices[o.index2]).x,h.y,h.z)}else if(e&&e.isBufferGeometry){var v,y,_,b,x;if(h=new Id,null!==e.index){for(v=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),r=0,s=_.length;r<s;++r)for(t=x=(b=_[r]).start,i=x+b.count;t<i;t+=3)for(n=0;n<3;n++)a=y.getX(t+n),l=y.getX(t+(n+1)%3),d[0]=Math.min(a,l),d[1]=Math.max(a,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)h.fromBufferAttribute(v,(o=p[c]).index1),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,o.index2),u.push(h.x,h.y,h.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)h.fromBufferAttribute(v,3*t+n),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,3*t+(n+1)%3),u.push(h.x,h.y,h.z)}this.setAttribute("position",new _f(u,3))}function Ty(e,t,n){tm.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Cy(e,t,n)),this.mergeVertices()}function Cy(e,t,n){Pf.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,s=[],o=[],a=[],l=[],c=new Id,h=new Id,u=new Id,d=new Id,p=new Id;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var g=r/t;e(g,m,h),o.push(h.x,h.y,h.z),g-1e-5>=0?(e(g-1e-5,m,u),d.subVectors(h,u)):(e(g+1e-5,m,u),d.subVectors(u,h)),m-1e-5>=0?(e(g,m-1e-5,u),p.subVectors(h,u)):(e(g,m+1e-5,u),p.subVectors(u,h)),c.crossVectors(d,p).normalize(),a.push(c.x,c.y,c.z),l.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var v=i*f+r+1,y=(i+1)*f+r+1,_=(i+1)*f+r;s.push(i*f+r,v,_),s.push(v,y,_)}this.setIndex(s),this.setAttribute("position",new _f(o,3)),this.setAttribute("normal",new _f(a,3)),this.setAttribute("uv",new _f(l,2))}function Ay(e,t,n,i){tm.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Iy(e,t,n,i)),this.mergeVertices()}function Iy(e,t,n,i){Pf.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],s=[];function o(e,t,n,i){var r,s,o=Math.pow(2,i),l=[];for(r=0;r<=o;r++){l[r]=[];var c=e.clone().lerp(n,r/o),h=t.clone().lerp(n,r/o),u=o-r;for(s=0;s<=u;s++)l[r][s]=0===s&&r===o?c:c.clone().lerp(h,s/u)}for(r=0;r<o;r++)for(s=0;s<2*(o-r)-1;s++){var d=Math.floor(s/2);s%2==0?(a(l[r][d+1]),a(l[r+1][d]),a(l[r][d])):(a(l[r][d+1]),a(l[r+1][d+1]),a(l[r+1][d]))}}function a(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new Id,i=new Id,r=new Id,s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new Id,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new Id,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=h(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);s.push(n,1-i)}var o;(function(){for(var e=new Id,t=new Id,n=new Id,i=new Id,o=new Md,a=new Md,l=new Md,u=0,d=0;u<r.length;u+=9,d+=6){e.set(r[u+0],r[u+1],r[u+2]),t.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=h(i);c(o,d+0,e,p),c(a,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(var e=0;e<s.length;e+=6){var t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new _f(r,3)),this.setAttribute("normal",new _f(r.slice(),3)),this.setAttribute("uv",new _f(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Py(e,t){tm.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ly(e,t)),this.mergeVertices()}function Ly(e,t){Iy.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ry(e,t){tm.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Oy(e,t)),this.mergeVertices()}function Oy(e,t){Iy.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ky(e,t){tm.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Dy(e,t)),this.mergeVertices()}function Dy(e,t){var n=(1+Math.sqrt(5))/2;Iy.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ny(e,t){tm.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Fy(e,t)),this.mergeVertices()}function Fy(e,t){var n=(1+Math.sqrt(5))/2,i=1/n;Iy.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function zy(e,t,n,i,r,s){tm.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Vy(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Vy(e,t,n,i,r){Pf.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},n=n||1,i=i||8;var s=e.computeFrenetFrames(t=t||64,r=r||!1);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var o,a,l=new Id,c=new Id,h=new Md,u=new Id,d=[],p=[],f=[],m=[];function g(r){u=e.getPointAt(r/t,u);var o=s.normals[r],h=s.binormals[r];for(a=0;a<=i;a++){var f=a/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);c.x=g*o.x+m*h.x,c.y=g*o.y+m*h.y,c.z=g*o.z+m*h.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=u.x+n*c.x,l.y=u.y+n*c.y,l.z=u.z+n*c.z,d.push(l.x,l.y,l.z)}}!function(){for(o=0;o<t;o++)g(o);g(!1===r?t:0),function(){for(o=0;o<=t;o++)for(a=0;a<=i;a++)h.x=o/t,h.y=a/i,f.push(h.x,h.y)}(),function(){for(a=1;a<=t;a++)for(o=1;o<=i;o++){var e=(i+1)*a+(o-1),n=(i+1)*a+o,r=(i+1)*(a-1)+o;m.push((i+1)*(a-1)+(o-1),e,r),m.push(e,n,r)}}()}(),this.setIndex(m),this.setAttribute("position",new _f(d,3)),this.setAttribute("normal",new _f(p,3)),this.setAttribute("uv",new _f(f,2))}function By(e,t,n,i,r,s,o){tm.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Hy(e,t,n,i,r,s)),this.mergeVertices()}function Hy(e,t,n,i,r,s){Pf.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,s=s||3;var o,a,l=[],c=[],h=[],u=[],d=new Id,p=new Id,f=new Id,m=new Id,g=new Id,v=new Id,y=new Id;for(o=0;o<=n;++o){var _=o/n*r*Math.PI*2;for(T(_,r,s,e,f),T(_+.01,r,s,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),a=0;a<=i;++a){var b=a/i*Math.PI*2,x=-t*Math.cos(b),w=t*Math.sin(b);d.x=f.x+(x*y.x+w*g.x),d.y=f.y+(x*y.y+w*g.y),d.z=f.z+(x*y.z+w*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),h.push(p.x,p.y,p.z),u.push(o/n),u.push(a/i)}}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var E=(i+1)*a+(o-1),S=(i+1)*a+o,M=(i+1)*(a-1)+o;l.push((i+1)*(a-1)+(o-1),E,M),l.push(E,S,M)}function T(e,t,n,i,r){var s=Math.cos(e),o=Math.sin(e),a=n/t*e,l=Math.cos(a);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(a)*.5}this.setIndex(l),this.setAttribute("position",new _f(c,3)),this.setAttribute("normal",new _f(h,3)),this.setAttribute("uv",new _f(u,2))}function Uy(e,t,n,i,r){tm.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Gy(e,t,n,i,r)),this.mergeVertices()}function Gy(e,t,n,i,r){Pf.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var s,o,a=[],l=[],c=[],h=[],u=new Id,d=new Id,p=new Id;for(s=0;s<=n;s++)for(o=0;o<=i;o++){var f=o/i*r,m=s/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),p.subVectors(d,u).normalize(),c.push(p.x,p.y,p.z),h.push(o/i),h.push(s/n)}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var g=(i+1)*(s-1)+o-1,v=(i+1)*(s-1)+o,y=(i+1)*s+o;a.push((i+1)*s+o-1,g,y),a.push(g,v,y)}this.setIndex(a),this.setAttribute("position",new _f(l,3)),this.setAttribute("normal",new _f(c,3)),this.setAttribute("uv",new _f(h,2))}function jy(e,t,n,i,r){var s,o;if(r===function(e,t,n,i){for(var r=0,s=t,o=n-i;s<n;s+=i)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)o=l_(s,e[s],e[s+1],o);else for(s=n-i;s>=t;s-=i)o=l_(s,e[s],e[s+1],o);return o&&r_(o,o.next)&&(c_(o),o=o.next),o}function Wy(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!r_(i,i.next)&&0!==i_(i.prev,i,i.next))i=i.next;else{if(c_(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function qy(e,t,n,i,r,s,o){if(e){!o&&s&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Qy(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,s);for(var a,l,c=e;e.prev!==e.next;)if(a=e.prev,l=e.next,s?Xy(e,i,r,s):Yy(e))t.push(a.i/n),t.push(e.i/n),t.push(l.i/n),c_(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?qy(e=Zy(e,t,n),t,n,i,r,s,2):2===o&&$y(e,t,n,i,r,s):qy(Wy(e),t,n,i,r,s,1);break}}}function Yy(e){var t=e.prev,n=e,i=e.next;if(i_(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(t_(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&i_(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Xy(e,t,n,i){var r=e.prev,s=e,o=e.next;if(i_(r,s,o)>=0)return!1;for(var a=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=Qy(r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,t,n,i),h=Qy(a,l,t,n,i),u=e.prevZ,d=e.nextZ;u&&u.z>=c&&d&&d.z<=h;){if(u!==e.prev&&u!==e.next&&t_(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&i_(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,d!==e.prev&&d!==e.next&&t_(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&i_(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;u&&u.z>=c;){if(u!==e.prev&&u!==e.next&&t_(r.x,r.y,s.x,s.y,o.x,o.y,u.x,u.y)&&i_(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&t_(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&i_(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Zy(e,t,n){var i=e;do{var r=i.prev,s=i.next.next;!r_(r,s)&&s_(r,i,i.next,s)&&o_(r,s)&&o_(s,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(s.i/n),c_(i),c_(i.next),i=e=s),i=i.next}while(i!==e);return i}function $y(e,t,n,i,r,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&n_(o,a)){var l=a_(o,a);return o=Wy(o,o.next),l=Wy(l,l.next),qy(o,t,n,i,r,s),void qy(l,t,n,i,r,s)}a=a.next}o=o.next}while(o!==e)}function Ky(e,t){return e.x-t.x}function Jy(e,t){if(t=function(e,t){var n,i=t,r=e.x,s=e.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o){if(o=a,a===r){if(s===i.y)return i;if(s===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var l,c=n,h=n.x,u=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=h&&r!==i.x&&t_(s<u?r:o,s,h,u,s<u?o:r,s,i.x,i.y)&&((l=Math.abs(s-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&o_(i,e)&&(n=i,d=l),i=i.next;return n}(e,t)){var n=a_(t,e);Wy(n,n.next)}}function Qy(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function e_(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function t_(e,t,n,i,r,s,o,a){return(r-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(i-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function n_(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&s_(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&o_(e,t)&&o_(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function i_(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function r_(e,t){return e.x===t.x&&e.y===t.y}function s_(e,t,n,i){return!!(r_(e,n)&&r_(t,i)||r_(e,i)&&r_(n,t))||i_(e,t,n)>0!=i_(e,t,i)>0&&i_(n,i,e)>0!=i_(n,i,t)>0}function o_(e,t){return i_(e.prev,e,e.next)<0?i_(e,t,e.next)>=0&&i_(e,e.prev,t)>=0:i_(e,t,e.prev)<0||i_(e,e.next,t)<0}function a_(e,t){var n=new h_(e.i,e.x,e.y),i=new h_(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function l_(e,t,n,i){var r=new h_(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function c_(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function h_(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}_y.prototype=Object.assign(Object.create(hp.prototype),{constructor:_y,isPoints:!0,raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),vy.copy(n.boundingSphere),vy.applyMatrix4(i),vy.radius+=r,!1!==e.ray.intersectsSphere(vy)){my.getInverse(i),gy.copy(e.ray).applyMatrix4(my);var s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){var a=n.index,l=n.attributes.position.array;if(null!==a)for(var c=a.array,h=0,u=c.length;h<u;h++){var d=c[h];yy.fromArray(l,3*d),by(yy,d,o,i,e,t,this)}else{h=0;for(var p=l.length/3;h<p;h++)yy.fromArray(l,3*h),by(yy,h,o,i,e,t,this)}}else{var f=n.vertices;for(h=0,p=f.length;h<p;h++)by(f[h],h,o,i,e,t,this)}}},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,s=Object.keys(r);if(s.length>0){var o=r[s[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xy.prototype=Object.assign(Object.create(Dd.prototype),{constructor:xy,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(wy.prototype=Object.create(Dd.prototype)).constructor=wy,wy.prototype.isCompressedTexture=!0,(Ey.prototype=Object.create(Dd.prototype)).constructor=Ey,Ey.prototype.isCanvasTexture=!0,(Sy.prototype=Object.create(Dd.prototype)).constructor=Sy,Sy.prototype.isDepthTexture=!0,(My.prototype=Object.create(Pf.prototype)).constructor=My,(Ty.prototype=Object.create(tm.prototype)).constructor=Ty,(Cy.prototype=Object.create(Pf.prototype)).constructor=Cy,(Ay.prototype=Object.create(tm.prototype)).constructor=Ay,(Iy.prototype=Object.create(Pf.prototype)).constructor=Iy,(Py.prototype=Object.create(tm.prototype)).constructor=Py,(Ly.prototype=Object.create(Iy.prototype)).constructor=Ly,(Ry.prototype=Object.create(tm.prototype)).constructor=Ry,(Oy.prototype=Object.create(Iy.prototype)).constructor=Oy,(ky.prototype=Object.create(tm.prototype)).constructor=ky,(Dy.prototype=Object.create(Iy.prototype)).constructor=Dy,(Ny.prototype=Object.create(tm.prototype)).constructor=Ny,(Fy.prototype=Object.create(Iy.prototype)).constructor=Fy,(zy.prototype=Object.create(tm.prototype)).constructor=zy,(Vy.prototype=Object.create(Pf.prototype)).constructor=Vy,Vy.prototype.toJSON=function(){var e=Pf.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},(By.prototype=Object.create(tm.prototype)).constructor=By,(Hy.prototype=Object.create(Pf.prototype)).constructor=Hy,(Uy.prototype=Object.create(tm.prototype)).constructor=Uy,(Gy.prototype=Object.create(Pf.prototype)).constructor=Gy;var u_={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return u_.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];d_(e),p_(n,e);var s=e.length;t.forEach(d_);for(var o=0;o<t.length;o++)i.push(s),s+=t[o].length,p_(n,t[o]);var a=function(e,t,n){n=n||2;var i,r,s,o,a,l,c,h=t&&t.length,u=h?t[0]*n:e.length,d=jy(e,0,u,n,!0),p=[];if(!d||d.next===d.prev)return p;if(h&&(d=function(e,t,n,i){var r,s,o,a=[];for(r=0,s=t.length;r<s;r++)(o=jy(e,t[r]*i,r<s-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),a.push(e_(o));for(a.sort(Ky),r=0;r<a.length;r++)Jy(a[r],n),n=Wy(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=s=e[0],r=o=e[1];for(var f=n;f<u;f+=n)(a=e[f])<i&&(i=a),(l=e[f+1])<r&&(r=l),a>s&&(s=a),l>o&&(o=l);c=0!==(c=Math.max(s-i,o-r))?1/c:0}return qy(d,p,n,i,r,c),p}(n,i);for(o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}};function d_(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function p_(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function f_(e,t){tm.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new m_(e,t)),this.mergeVertices()}function m_(e,t){Pf.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],s=0,o=e.length;s<o;s++)a(e[s]);function a(e){var s=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,h=void 0!==t.bevelThickness?t.bevelThickness:6,u=void 0!==t.bevelSize?t.bevelSize:h-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:g_;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var g,v,y,_,b,x,w,E,S=!1;f&&(g=f.getSpacedPoints(a),S=!0,c=!1,v=f.computeFrenetFrames(a,!1),y=new Id,_=new Id,b=new Id),c||(p=0,h=0,u=0,d=0);var M=e.extractPoints(o),T=M.shape,C=M.holes;if(!u_.isClockWise(T))for(T=T.reverse(),w=0,E=C.length;w<E;w++)u_.isClockWise(x=C[w])&&(C[w]=x.reverse());var A=u_.triangulateShape(T,C),I=T;for(w=0,E=C.length;w<E;w++)T=T.concat(x=C[w]);function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,R,O,k,D,N,F=T.length,z=A.length;function V(e,t,n){var i,r,s,o=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,h=o*o+a*a;if(Math.abs(o*c-a*l)>Number.EPSILON){var u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),p=t.x-a/u,f=t.y+o/u,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-a*l),g=(i=p+o*m-e.x)*i+(r=f+a*m-e.y)*r;if(g<=2)return new Md(i,r);s=Math.sqrt(g/2)}else{var v=!1;o>Number.EPSILON?l>Number.EPSILON&&(v=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(v=!0):Math.sign(a)===Math.sign(c)&&(v=!0),v?(i=-a,r=o,s=Math.sqrt(h)):(i=o,r=a,s=Math.sqrt(h/2))}return new Md(i/s,r/s)}for(var B=[],H=0,U=I.length,G=U-1,j=H+1;H<U;H++,G++,j++)G===U&&(G=0),j===U&&(j=0),B[H]=V(I[H],I[G],I[j]);var W,q,Y=[],X=B.concat();for(w=0,E=C.length;w<E;w++){for(W=[],G=(U=(x=C[w]).length)-1,j=1+(H=0);H<U;H++,G++,j++)G===U&&(G=0),j===U&&(j=0),W[H]=V(x[H],x[G],x[j]);Y.push(W),X=X.concat(W)}for(L=0;L<p;L++){for(O=L/p,k=h*Math.cos(O*Math.PI/2),R=u*Math.sin(O*Math.PI/2)+d,H=0,U=I.length;H<U;H++)$((D=P(I[H],B[H],R)).x,D.y,-k);for(w=0,E=C.length;w<E;w++)for(W=Y[w],H=0,U=(x=C[w]).length;H<U;H++)$((D=P(x[H],W[H],R)).x,D.y,-k)}for(R=u+d,H=0;H<F;H++)D=c?P(T[H],X[H],R):T[H],S?(_.copy(v.normals[0]).multiplyScalar(D.x),y.copy(v.binormals[0]).multiplyScalar(D.y),b.copy(g[0]).add(_).add(y),$(b.x,b.y,b.z)):$(D.x,D.y,0);for(q=1;q<=a;q++)for(H=0;H<F;H++)D=c?P(T[H],X[H],R):T[H],S?(_.copy(v.normals[q]).multiplyScalar(D.x),y.copy(v.binormals[q]).multiplyScalar(D.y),b.copy(g[q]).add(_).add(y),$(b.x,b.y,b.z)):$(D.x,D.y,l/a*q);for(L=p-1;L>=0;L--){for(O=L/p,k=h*Math.cos(O*Math.PI/2),R=u*Math.sin(O*Math.PI/2)+d,H=0,U=I.length;H<U;H++)$((D=P(I[H],B[H],R)).x,D.y,l+k);for(w=0,E=C.length;w<E;w++)for(W=Y[w],H=0,U=(x=C[w]).length;H<U;H++)D=P(x[H],W[H],R),S?$(D.x,D.y+g[a-1].y,g[a-1].x+k):$(D.x,D.y,l+k)}function Z(e,t){var n,i;for(H=e.length;--H>=0;){n=H,(i=H-1)<0&&(i=e.length-1);var r=0,s=a+2*p;for(r=0;r<s;r++){var o=F*r,l=F*(r+1);J(t+n+o,t+i+o,t+i+l,t+n+l)}}}function $(e,t,n){s.push(e),s.push(t),s.push(n)}function K(e,t,r){Q(e),Q(t),Q(r);var s=i.length/3,o=m.generateTopUV(n,i,s-3,s-2,s-1);ee(o[0]),ee(o[1]),ee(o[2])}function J(e,t,r,s){Q(e),Q(t),Q(s),Q(t),Q(r),Q(s);var o=i.length/3,a=m.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[3]),ee(a[1]),ee(a[2]),ee(a[3])}function Q(e){i.push(s[3*e+0]),i.push(s[3*e+1]),i.push(s[3*e+2])}function ee(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(c){var t=0,r=F*t;for(H=0;H<z;H++)K((N=A[H])[2]+r,N[1]+r,N[0]+r);for(r=F*(t=a+2*p),H=0;H<z;H++)K((N=A[H])[0]+r,N[1]+r,N[2]+r)}else{for(H=0;H<z;H++)K((N=A[H])[2],N[1],N[0]);for(H=0;H<z;H++)K((N=A[H])[0]+F*a,N[1]+F*a,N[2]+F*a)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(Z(I,t),t+=I.length,w=0,E=C.length;w<E;w++)Z(x=C[w],t),t+=x.length;n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new _f(i,3)),this.setAttribute("uv",new _f(r,2)),this.computeVertexNormals()}(f_.prototype=Object.create(tm.prototype)).constructor=f_,f_.prototype.toJSON=function(){var e=tm.prototype.toJSON.call(this);return v_(this.parameters.shapes,this.parameters.options,e)},(m_.prototype=Object.create(Pf.prototype)).constructor=m_,m_.prototype.toJSON=function(){var e=Pf.prototype.toJSON.call(this);return v_(this.parameters.shapes,this.parameters.options,e)};var g_={generateTopUV:function(e,t,n,i,r){var s=t[3*i],o=t[3*i+1],a=t[3*r],l=t[3*r+1];return[new Md(t[3*n],t[3*n+1]),new Md(s,o),new Md(a,l)]},generateSideWallUV:function(e,t,n,i,r,s){var o=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*i],h=t[3*i+1],u=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(a-h)<.01?[new Md(o,1-l),new Md(c,1-u),new Md(d,1-f),new Md(m,1-v)]:[new Md(a,1-l),new Md(h,1-u),new Md(p,1-f),new Md(g,1-v)]}};function v_(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n.shapes.push(e[i].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function y_(e,t){tm.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new __(e,t)),this.mergeVertices()}function __(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new tm;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),m_.call(this,i,t),this.type="TextBufferGeometry"}function b_(e,t,n,i,r,s,o){tm.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new x_(e,t,n,i,r,s,o)),this.mergeVertices()}function x_(e,t,n,i,r,s,o){Pf.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,s=void 0!==s?s:0,o=void 0!==o?o:Math.PI;var a,l,c=Math.min(s+o,Math.PI),h=0,u=[],d=new Id,p=new Id,f=[],m=[],g=[],v=[];for(l=0;l<=n;l++){var y=[],_=l/n,b=0;for(0==l&&0==s?b=.5/t:l==n&&c==Math.PI&&(b=-.5/t),a=0;a<=t;a++){var x=a/t;d.x=-e*Math.cos(i+x*r)*Math.sin(s+_*o),d.y=e*Math.cos(s+_*o),d.z=e*Math.sin(i+x*r)*Math.sin(s+_*o),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),v.push(x+b,1-_),y.push(h++)}u.push(y)}for(l=0;l<n;l++)for(a=0;a<t;a++){var w=u[l][a],E=u[l+1][a],S=u[l+1][a+1];(0!==l||s>0)&&f.push(u[l][a+1],w,S),(l!==n-1||c<Math.PI)&&f.push(w,E,S)}this.setIndex(f),this.setAttribute("position",new _f(m,3)),this.setAttribute("normal",new _f(g,3)),this.setAttribute("uv",new _f(v,2))}function w_(e,t,n,i,r,s){tm.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},this.fromBufferGeometry(new E_(e,t,n,i,r,s)),this.mergeVertices()}function E_(e,t,n,i,r,s){Pf.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},e=e||.5,t=t||1,r=void 0!==r?r:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,a,l,c=[],h=[],u=[],d=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Id,g=new Md;for(a=0;a<=i;a++){for(l=0;l<=n;l++)o=r+l/n*s,m.x=p*Math.cos(o),m.y=p*Math.sin(o),h.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);p+=f}for(a=0;a<i;a++){var v=a*(n+1);for(l=0;l<n;l++){var y=(o=l+v)+n+1,_=o+n+2,b=o+1;c.push(o,y,b),c.push(y,_,b)}}this.setIndex(c),this.setAttribute("position",new _f(h,3)),this.setAttribute("normal",new _f(u,3)),this.setAttribute("uv",new _f(d,2))}function S_(e,t,n,i){tm.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new M_(e,t,n,i)),this.mergeVertices()}function M_(e,t,n,i){Pf.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Sd.clamp(i,0,2*Math.PI);var r,s,o,a=[],l=[],c=[],h=1/t,u=new Id,d=new Md;for(s=0;s<=t;s++){var p=n+s*h*i,f=Math.sin(p),m=Math.cos(p);for(o=0;o<=e.length-1;o++)u.x=e[o].x*f,u.y=e[o].y,u.z=e[o].x*m,l.push(u.x,u.y,u.z),d.x=s/t,d.y=o/(e.length-1),c.push(d.x,d.y)}for(s=0;s<t;s++)for(o=0;o<e.length-1;o++){var g=(r=o+s*e.length)+e.length,v=r+e.length+1,y=r+1;a.push(r,g,y),a.push(g,v,y)}if(this.setIndex(a),this.setAttribute("position",new _f(l,3)),this.setAttribute("uv",new _f(c,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,b=new Id,x=new Id,w=new Id;for(r=t*e.length*3,s=0,o=0;s<e.length;s++,o+=3)b.x=_[o+0],b.y=_[o+1],b.z=_[o+2],x.x=_[r+o+0],x.y=_[r+o+1],x.z=_[r+o+2],w.addVectors(b,x).normalize(),_[o+0]=_[r+o+0]=w.x,_[o+1]=_[r+o+1]=w.y,_[o+2]=_[r+o+2]=w.z}}function T_(e,t){tm.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new C_(e,t)),this.mergeVertices()}function C_(e,t){Pf.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],s=[],o=0,a=0;if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(o,a,l),o+=a,a=0;function c(e){var o,l,c,h=i.length/3,u=e.extractPoints(t),d=u.shape,p=u.holes;for(!1===u_.isClockWise(d)&&(d=d.reverse()),o=0,l=p.length;o<l;o++)!0===u_.isClockWise(c=p[o])&&(p[o]=c.reverse());var f=u_.triangulateShape(d,p);for(o=0,l=p.length;o<l;o++)d=d.concat(c=p[o]);for(o=0,l=d.length;o<l;o++){var m=d[o];i.push(m.x,m.y,0),r.push(0,0,1),s.push(m.x,m.y)}for(o=0,l=f.length;o<l;o++){var g=f[o];n.push(g[0]+h,g[1]+h,g[2]+h),a+=3}}this.setIndex(n),this.setAttribute("position",new _f(i,3)),this.setAttribute("normal",new _f(r,3)),this.setAttribute("uv",new _f(s,2))}function A_(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}function I_(e,t){Pf.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,s,o=[],a=Math.cos(Sd.DEG2RAD*t),l=[0,0],c={},h=["a","b","c"];e.isBufferGeometry?(s=new tm).fromBufferGeometry(e):s=e.clone(),s.mergeVertices(),s.computeFaceNormals();for(var u=s.vertices,d=s.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[h[g]],i=m[h[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var v=c[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=a){var y=u[v.index1];o.push(y.x,y.y,y.z),o.push((y=u[v.index2]).x,y.y,y.z)}}this.setAttribute("position",new _f(o,3))}function P_(e,t,n,i,r,s,o,a){tm.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new L_(e,t,n,i,r,s,o,a)),this.mergeVertices()}function L_(e,t,n,i,r,s,o,a){Pf.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,s=void 0!==s&&s,o=void 0!==o?o:0,a=void 0!==a?a:2*Math.PI;var c=[],h=[],u=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){var r,s,f,v=new Md,y=new Id,_=0,b=!0===n?e:t,x=!0===n?1:-1;for(s=p,r=1;r<=i;r++)h.push(0,m*x,0),u.push(0,x,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var w=r/i*a+o,E=Math.cos(w),S=Math.sin(w);y.x=b*S,y.y=m*x,y.z=b*E,h.push(y.x,y.y,y.z),u.push(0,x,0),v.x=.5*E+.5,v.y=.5*S*x+.5,d.push(v.x,v.y),p++}for(r=0;r<i;r++){var M=s+r,T=f+r;!0===n?c.push(T,T+1,M):c.push(T+1,T,M),_+=3}l.addGroup(g,_,!0===n?1:2),g+=_}!function(){var s,v,y=new Id,_=new Id,b=0,x=(t-e)/n;for(v=0;v<=r;v++){var w=[],E=v/r,S=E*(t-e)+e;for(s=0;s<=i;s++){var M=s/i,T=M*a+o,C=Math.sin(T),A=Math.cos(T);_.x=S*C,_.y=-E*n+m,_.z=S*A,h.push(_.x,_.y,_.z),y.set(C,x,A).normalize(),u.push(y.x,y.y,y.z),d.push(M,1-E),w.push(p++)}f.push(w)}for(s=0;s<i;s++)for(v=0;v<r;v++){var I=f[v+1][s],P=f[v+1][s+1],L=f[v][s+1];c.push(f[v][s],I,L),c.push(I,P,L),b+=6}l.addGroup(g,b,0),g+=b}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new _f(h,3)),this.setAttribute("normal",new _f(u,3)),this.setAttribute("uv",new _f(d,2))}function R_(e,t,n,i,r,s,o){P_.call(this,0,e,t,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function O_(e,t,n,i,r,s,o){L_.call(this,0,e,t,n,i,r,s,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}function k_(e,t,n,i){tm.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new D_(e,t,n,i)),this.mergeVertices()}function D_(e,t,n,i){Pf.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,s,o=[],a=[],l=[],c=[],h=new Id,u=new Md;for(a.push(0,0,0),l.push(0,0,1),c.push(.5,.5),s=0,r=3;s<=t;s++,r+=3){var d=n+s/t*i;h.x=e*Math.cos(d),h.y=e*Math.sin(d),a.push(h.x,h.y,h.z),l.push(0,0,1),u.x=(a[r]/e+1)/2,u.y=(a[r+1]/e+1)/2,c.push(u.x,u.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.setAttribute("position",new _f(a,3)),this.setAttribute("normal",new _f(l,3)),this.setAttribute("uv",new _f(c,2))}(y_.prototype=Object.create(tm.prototype)).constructor=y_,(__.prototype=Object.create(m_.prototype)).constructor=__,(b_.prototype=Object.create(tm.prototype)).constructor=b_,(x_.prototype=Object.create(Pf.prototype)).constructor=x_,(w_.prototype=Object.create(tm.prototype)).constructor=w_,(E_.prototype=Object.create(Pf.prototype)).constructor=E_,(S_.prototype=Object.create(tm.prototype)).constructor=S_,(M_.prototype=Object.create(Pf.prototype)).constructor=M_,(T_.prototype=Object.create(tm.prototype)).constructor=T_,T_.prototype.toJSON=function(){var e=tm.prototype.toJSON.call(this);return A_(this.parameters.shapes,e)},(C_.prototype=Object.create(Pf.prototype)).constructor=C_,C_.prototype.toJSON=function(){var e=Pf.prototype.toJSON.call(this);return A_(this.parameters.shapes,e)},(I_.prototype=Object.create(Pf.prototype)).constructor=I_,(P_.prototype=Object.create(tm.prototype)).constructor=P_,(L_.prototype=Object.create(Pf.prototype)).constructor=L_,(R_.prototype=Object.create(P_.prototype)).constructor=R_,(O_.prototype=Object.create(L_.prototype)).constructor=O_,(k_.prototype=Object.create(tm.prototype)).constructor=k_,(D_.prototype=Object.create(Pf.prototype)).constructor=D_;var N_=Object.freeze({__proto__:null,WireframeGeometry:My,ParametricGeometry:Ty,ParametricBufferGeometry:Cy,TetrahedronGeometry:Py,TetrahedronBufferGeometry:Ly,OctahedronGeometry:Ry,OctahedronBufferGeometry:Oy,IcosahedronGeometry:ky,IcosahedronBufferGeometry:Dy,DodecahedronGeometry:Ny,DodecahedronBufferGeometry:Fy,PolyhedronGeometry:Ay,PolyhedronBufferGeometry:Iy,TubeGeometry:zy,TubeBufferGeometry:Vy,TorusKnotGeometry:By,TorusKnotBufferGeometry:Hy,TorusGeometry:Uy,TorusBufferGeometry:Gy,TextGeometry:y_,TextBufferGeometry:__,SphereGeometry:b_,SphereBufferGeometry:x_,RingGeometry:w_,RingBufferGeometry:E_,PlaneGeometry:Sm,PlaneBufferGeometry:Mm,LatheGeometry:S_,LatheBufferGeometry:M_,ShapeGeometry:T_,ShapeBufferGeometry:C_,ExtrudeGeometry:f_,ExtrudeBufferGeometry:m_,EdgesGeometry:I_,ConeGeometry:R_,ConeBufferGeometry:O_,CylinderGeometry:P_,CylinderBufferGeometry:L_,CircleGeometry:k_,CircleBufferGeometry:D_,BoxGeometry:nm,BoxBufferGeometry:im});function F_(e){lf.call(this),this.type="ShadowMaterial",this.color=new tf(0),this.transparent=!0,this.setValues(e)}function z_(e){lm.call(this,e),this.type="RawShaderMaterial"}function V_(e){lf.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tf(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gd,this.normalScale=new Md(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function B_(e){V_.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Md(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function H_(e){lf.call(this),this.type="MeshPhongMaterial",this.color=new tf(16777215),this.specular=new tf(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gd,this.normalScale=new Md(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function U_(e){lf.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new tf(16777215),this.specular=new tf(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gd,this.normalScale=new Md(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function G_(e){lf.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gd,this.normalScale=new Md(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function j_(e){lf.call(this),this.type="MeshLambertMaterial",this.color=new tf(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tf(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function W_(e){lf.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new tf(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gd,this.normalScale=new Md(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function q_(e){iy.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}(F_.prototype=Object.create(lf.prototype)).constructor=F_,F_.prototype.isShadowMaterial=!0,F_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this},(z_.prototype=Object.create(lm.prototype)).constructor=z_,z_.prototype.isRawShaderMaterial=!0,(V_.prototype=Object.create(lf.prototype)).constructor=V_,V_.prototype.isMeshStandardMaterial=!0,V_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(B_.prototype=Object.create(V_.prototype)).constructor=B_,B_.prototype.isMeshPhysicalMaterial=!0,B_.prototype.copy=function(e){return V_.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,this.sheen=e.sheen?(this.sheen||new tf).copy(e.sheen):null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},(H_.prototype=Object.create(lf.prototype)).constructor=H_,H_.prototype.isMeshPhongMaterial=!0,H_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(U_.prototype=Object.create(lf.prototype)).constructor=U_,U_.prototype.isMeshToonMaterial=!0,U_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(G_.prototype=Object.create(lf.prototype)).constructor=G_,G_.prototype.isMeshNormalMaterial=!0,G_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(j_.prototype=Object.create(lf.prototype)).constructor=j_,j_.prototype.isMeshLambertMaterial=!0,j_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(W_.prototype=Object.create(lf.prototype)).constructor=W_,W_.prototype.isMeshMatcapMaterial=!0,W_.prototype.copy=function(e){return lf.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(q_.prototype=Object.create(iy.prototype)).constructor=q_,q_.prototype.isLineDashedMaterial=!0,q_.prototype.copy=function(e){return iy.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Y_=Object.freeze({__proto__:null,ShadowMaterial:F_,SpriteMaterial:Iv,RawShaderMaterial:z_,ShaderMaterial:lm,PointsMaterial:fy,MeshPhysicalMaterial:B_,MeshStandardMaterial:V_,MeshPhongMaterial:H_,MeshToonMaterial:U_,MeshNormalMaterial:G_,MeshLambertMaterial:j_,MeshDepthMaterial:cv,MeshDistanceMaterial:hv,MeshBasicMaterial:cf,MeshMatcapMaterial:W_,LineDashedMaterial:q_,LineBasicMaterial:iy,Material:lf}),X_={arraySlice:function(e,t,n){return X_.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),s=0,o=0;o!==i;++s)for(var a=n[s]*t,l=0;l!==t;++l)r[o++]=e[a+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,s=e[0];void 0!==s&&void 0===s[i];)s=e[r++];if(void 0!==s){var o=s[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=s[i])&&(t.push(s.time),n.push.apply(n,o)),s=e[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{void 0!==(o=s[i])&&(t.push(s.time),o.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{void 0!==(o=s[i])&&(t.push(s.time),n.push(o)),s=e[r++]}while(void 0!==s)}},subclip:function(e,t,n,i,r){r=r||30;var s=e.clone();s.name=t;for(var o=[],a=0;a<s.tracks.length;++a){for(var l=s.tracks[a],c=l.getValueSize(),h=[],u=[],d=0;d<l.times.length;++d){var p=l.times[d]*r;if(!(p<n||p>=i)){h.push(l.times[d]);for(var f=0;f<c;++f)u.push(l.values[d*c+f])}}0!==h.length&&(l.times=X_.convertArray(h,l.times.constructor),l.values=X_.convertArray(u,l.values.constructor),o.push(l))}s.tracks=o;var m=1/0;for(a=0;a<s.tracks.length;++a)m>s.tracks[a].times[0]&&(m=s.tracks[a].times[0]);for(a=0;a<s.tracks.length;++a)s.tracks[a].shift(-1*m);return s.resetDuration(),s}};function Z_(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function $_(e,t,n,i){Z_.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function K_(e,t,n,i){Z_.call(this,e,t,n,i)}function J_(e,t,n,i){Z_.call(this,e,t,n,i)}function Q_(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=X_.convertArray(t,this.TimeBufferType),this.values=X_.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function eb(e,t,n){Q_.call(this,e,t,n)}function tb(e,t,n,i){Q_.call(this,e,t,n,i)}function nb(e,t,n,i){Q_.call(this,e,t,n,i)}function ib(e,t,n,i){Z_.call(this,e,t,n,i)}function rb(e,t,n,i){Q_.call(this,e,t,n,i)}function sb(e,t,n,i){Q_.call(this,e,t,n,i)}function ob(e,t,n,i){Q_.call(this,e,t,n,i)}function ab(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Sd.generateUUID(),this.duration<0&&this.resetDuration()}function lb(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return nb;case"vector":case"vector2":case"vector3":case"vector4":return ob;case"color":return tb;case"quaternion":return rb;case"bool":case"boolean":return eb;case"string":return sb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];X_.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Z_.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var s;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}s=t.length;break n}if(e>=r)break e;var a=t[1];for(e<a&&(n=2,r=a),o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,e>=(r=t[--n-1]))break t}s=n,n=0}for(;n<s;){var l=n+s>>>1;e<t[l]?s=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,s=0;s!==i;++s)t[s]=n[r+s];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Z_.prototype,{beforeStart_:Z_.prototype.copySampleValue_,afterEnd_:Z_.prototype.copySampleValue_}),$_.prototype=Object.assign(Object.create(Z_.prototype),{constructor:$_,DefaultSettings_:{endingStart:sd,endingEnd:sd},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,s=e+1,o=i[r],a=i[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=e,o=2*t-n;break;case 2402:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=e,a=2*n-t;break;case 2402:s=1,a=n+i[1]-i[0];break;default:s=e-1,a=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==o;++b)r[b]=g*s[c+b]+v*s[l+b]+y*s[a+b]+_*s[h+b];return r}}),K_.prototype=Object.assign(Object.create(Z_.prototype),{constructor:K_,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(i-t),h=1-c,u=0;u!==o;++u)r[u]=s[l+u]*h+s[a+u]*c;return r}}),J_.prototype=Object.assign(Object.create(Z_.prototype),{constructor:J_,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Q_,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:X_.convertArray(e.times,Array),values:X_.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(Q_.prototype,{constructor:Q_,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new J_(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new K_(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new $_(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,s=i-1;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(r=(s=Math.max(s,1))-1);var o=this.getValueSize();this.times=X_.arraySlice(n,r,s),this.values=X_.arraySlice(this.values,r*o,s*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var s=null,o=0;o!==r;o++){var a=n[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(null!==s&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),e=!1;break}s=a}if(void 0!==i&&X_.isTypedArray(i)){o=0;for(var l=i.length;o!==l;++o){var c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,s=e.length-1,o=1;o<s;++o){var a=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==l[0]))if(i)a=!0;else for(var c=o*n,h=c-n,u=c+n,d=0;d!==n;++d){var p=t[c+d];if(p!==t[h+d]||p!==t[u+d]){a=!0;break}}if(a){if(o!==r){e[r]=e[o];var f=o*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[f+d]}++r}}if(s>0){for(e[r]=e[s],f=s*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[f+d];++r}return r!==e.length&&(this.times=X_.arraySlice(e,0,r),this.values=X_.arraySlice(t,0,r*n)),this},clone:function(){var e=X_.arraySlice(this.times,0),t=X_.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),eb.prototype=Object.assign(Object.create(Q_.prototype),{constructor:eb,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),tb.prototype=Object.assign(Object.create(Q_.prototype),{constructor:tb,ValueTypeName:"color"}),nb.prototype=Object.assign(Object.create(Q_.prototype),{constructor:nb,ValueTypeName:"number"}),ib.prototype=Object.assign(Object.create(Z_.prototype),{constructor:ib,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=(n-t)/(i-t),c=a+o;a!==c;a+=4)Td.slerpFlat(r,0,s,a-o,s,a,l);return r}}),rb.prototype=Object.assign(Object.create(Q_.prototype),{constructor:rb,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ib(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),sb.prototype=Object.assign(Object.create(Q_.prototype),{constructor:sb,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ob.prototype=Object.assign(Object.create(Q_.prototype),{constructor:ob,ValueTypeName:"vector"}),Object.assign(ab,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,s=n.length;r!==s;++r)t.push(lb(n[r]).scale(i));return new ab(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,s=n.length;r!==s;++r)t.push(Q_.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,s=[],o=0;o<r;o++){var a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=X_.getKeyframeOrder(a);a=X_.sortedArray(a,1,c),l=X_.sortedArray(l,1,c),i||0!==a[0]||(a.push(r),l.push(l[0])),s.push(new nb(".morphTargetInfluences["+t[o].name+"]",a,l).scale(1/n))}return new ab(e,-1,s)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,s=0,o=e.length;s<o;s++){var a=e[s],l=a.name.match(r);if(l&&l.length>1){var c=i[u=l[1]];c||(i[u]=c=[]),c.push(a)}}var h=[];for(var u in i)h.push(ab.CreateFromMorphTargetSequence(u,i[u],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var s=[],o=[];X_.flattenJSON(n,s,o,i),0!==s.length&&r.push(new e(t,s,o))}},i=[],r=e.name||"default",s=e.length||-1,o=e.fps||30,a=e.hierarchy||[],l=0;l<a.length;l++){var c=a[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},u=0;u<c.length;u++)if(c[u].morphTargets)for(var d=0;d<c[u].morphTargets.length;d++)h[c[u].morphTargets[d]]=-1;for(var p in h){var f=[],m=[];for(d=0;d!==c[u].morphTargets.length;++d){var g=c[u];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new nb(".morphTargetInfluence["+p+"]",f,m))}s=h.length*(o||1)}else{var v=".bones["+t[l].name+"]";n(ob,v+".position",c,"pos",i),n(rb,v+".quaternion",c,"rot",i),n(ob,v+".scale",c,"scl",i)}}return 0===i.length?null:new ab(r,s,i)}}),Object.assign(ab.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ab(this.name,this.duration,e)}});var cb={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function hb(e,t,n){var i=this,r=!1,s=0,o=0,a=void 0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,s,o),r=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return a?a(e):e},this.setURLModifier=function(e){return a=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var i=l[t],r=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}}var ub=new hb;function db(e){this.manager=void 0!==e?e:ub,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(db.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var pb={};function fb(e){db.call(this,e)}function mb(e){db.call(this,e)}function gb(e){db.call(this,e)}function vb(e){db.call(this,e)}function yb(e){db.call(this,e)}function _b(e){db.call(this,e)}function bb(e){db.call(this,e)}function xb(){this.type="Curve",this.arcLengthDivisions=200}function wb(e,t,n,i,r,s,o,a){xb.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}function Eb(e,t,n,i,r,s){wb.call(this,e,t,n,n,i,r,s),this.type="ArcCurve"}function Sb(){var e=0,t=0,n=0,i=0;function r(r,s,o,a){e=r,t=o,n=-3*r+3*s-2*o-a,i=2*r-2*s+o+a}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,o,a){var l=(t-e)/s-(n-e)/(s+o)+(n-t)/o,c=(n-t)/o-(i-t)/(o+a)+(i-n)/a;r(t,n,l*=o,c*=o)},calc:function(r){var s=r*r;return e+t*r+n*s+i*(s*r)}}}fb.prototype=Object.assign(Object.create(db.prototype),{constructor:fb,load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=cb.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;if(void 0===pb[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var a=o[1],l=!!o[2],c=o[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===u?new Blob([d.buffer],{type:a}):d.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(c,a);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(v){setTimeout(function(){i&&i(v),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{pb[e]=[],pb[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response,i=pb[e];if(delete pb[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),cb.add(e,n);for(var s=0,o=i.length;s<o;s++)(a=i[s]).onLoad&&a.onLoad(n);r.manager.itemEnd(e)}else{for(s=0,o=i.length;s<o;s++){var a;(a=i[s]).onError&&a.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var n=pb[e],i=0,r=n.length;i<r;i++){var s=n[i];s.onProgress&&s.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=pb[e];delete pb[e];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var n=pb[e];delete pb[e];for(var i=0,s=n.length;i<s;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}pb[e].push({onLoad:t,onProgress:n,onError:i})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),mb.prototype=Object.assign(Object.create(db.prototype),{constructor:mb,load:function(e,t,n,i){var r=this,s=new fb(r.manager);s.setPath(r.path),s.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=ab.parse(e[n]);t.push(i)}return t}}),gb.prototype=Object.assign(Object.create(db.prototype),{constructor:gb,load:function(e,t,n,i){var r=this,s=[],o=new wy;o.image=s;var a=new fb(this.manager);function l(l){a.load(e[l],function(e){var n=r.parse(e,!0);s[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(o.minFilter=ou),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(a.setPath(this.path),a.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,h=0,u=e.length;h<u;++h)l(h);else a.load(e,function(e){var n=r.parse(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){s[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),s[a].format=n.format,s[a].width=n.width,s[a].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ou),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}}),vb.prototype=Object.assign(Object.create(db.prototype),{constructor:vb,load:function(e,t,n,i){var r=this,s=new mm,o=new fb(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){var n=r.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:tu,s.wrapT=void 0!==n.wrapT?n.wrapT:tu,s.magFilter=void 0!==n.magFilter?n.magFilter:ou,s.minFilter=void 0!==n.minFilter?n.minFilter:ou,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=lu),1===n.mipmapCount&&(s.minFilter=ou),s.needsUpdate=!0,t&&t(s,n))},n,i),s}}),yb.prototype=Object.assign(Object.create(db.prototype),{constructor:yb,load:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=cb.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),cb.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}),_b.prototype=Object.assign(Object.create(db.prototype),{constructor:_b,load:function(e,t,n,i){var r=new Fm,s=new yb(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;function a(n){s.load(e[n],function(e){r.images[n]=e,6==++o&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var l=0;l<e.length;++l)a(l);return r}}),bb.prototype=Object.assign(Object.create(db.prototype),{constructor:bb,load:function(e,t,n,i){var r=new Dd,s=new yb(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?wu:Eu,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}),Object.assign(xb.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),s=0;for(i.push(0),n=1;n<=e;n++)s+=(t=this.getPoint(n/e)).distanceTo(r),i.push(s),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,s=i.length;n=t||e*i[s-1];for(var o,a=0,l=s-1;a<=l;)if((o=i[r=Math.floor(a+(l-a)/2)]-n)<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(s-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(s-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r=new Id,s=[],o=[],a=[],l=new Id,c=new qd;for(n=0;n<=e;n++)s[n]=this.getTangentAt(n/e),s[n].normalize();o[0]=new Id,a[0]=new Id;var h=Number.MAX_VALUE,u=Math.abs(s[0].x),d=Math.abs(s[0].y),p=Math.abs(s[0].z);for(u<=h&&(h=u,r.set(1,0,0)),d<=h&&(h=d,r.set(0,1,0)),p<=h&&r.set(0,0,1),l.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],l),a[0].crossVectors(s[0],o[0]),n=1;n<=e;n++)o[n]=o[n-1].clone(),a[n]=a[n-1].clone(),l.crossVectors(s[n-1],s[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(Sd.clamp(s[n-1].dot(s[n]),-1,1)),o[n].applyMatrix4(c.makeRotationAxis(l,i))),a[n].crossVectors(s[n],o[n]);if(!0===t)for(i=Math.acos(Sd.clamp(o[0].dot(o[e]),-1,1)),i/=e,s[0].dot(l.crossVectors(o[0],o[e]))>0&&(i=-i),n=1;n<=e;n++)o[n].applyMatrix4(c.makeRotationAxis(s[n],i*n)),a[n].crossVectors(s[n],o[n]);return{tangents:s,normals:o,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),(wb.prototype=Object.create(xb.prototype)).constructor=wb,wb.prototype.isEllipseCurve=!0,wb.prototype.getPoint=function(e,t){for(var n=t||new Md,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)},wb.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},wb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},wb.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},(Eb.prototype=Object.create(wb.prototype)).constructor=Eb,Eb.prototype.isArcCurve=!0;var Mb=new Id,Tb=new Sb,Cb=new Sb,Ab=new Sb;function Ib(e,t,n,i){xb.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Pb(e,t,n,i,r){var s=.5*(i-t),o=.5*(r-n),a=e*e;return(2*n-2*i+s+o)*(e*a)+(-3*n+3*i-2*s-o)*a+s*e+n}function Lb(e,t,n,i){return function(e,n){var i=1-e;return i*i*t}(e)+function(e,t){return 2*(1-e)*e*n}(e)+function(e,t){return e*e*i}(e)}function Rb(e,t,n,i,r){return function(e,n){var i=1-e;return i*i*i*t}(e)+function(e,t){var i=1-e;return 3*i*i*e*n}(e)+function(e,t){return 3*(1-e)*e*e*i}(e)+function(e,t){return e*e*e*r}(e)}function Ob(e,t,n,i){xb.call(this),this.type="CubicBezierCurve",this.v0=e||new Md,this.v1=t||new Md,this.v2=n||new Md,this.v3=i||new Md}function kb(e,t,n,i){xb.call(this),this.type="CubicBezierCurve3",this.v0=e||new Id,this.v1=t||new Id,this.v2=n||new Id,this.v3=i||new Id}function Db(e,t){xb.call(this),this.type="LineCurve",this.v1=e||new Md,this.v2=t||new Md}function Nb(e,t){xb.call(this),this.type="LineCurve3",this.v1=e||new Id,this.v2=t||new Id}function Fb(e,t,n){xb.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Md,this.v1=t||new Md,this.v2=n||new Md}function zb(e,t,n){xb.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Id,this.v1=t||new Id,this.v2=n||new Id}function Vb(e){xb.call(this),this.type="SplineCurve",this.points=e||[]}(Ib.prototype=Object.create(xb.prototype)).constructor=Ib,Ib.prototype.isCatmullRomCurve3=!0,Ib.prototype.getPoint=function(e,t){var n,i,r,s,o=t||new Id,a=this.points,l=a.length,c=(l-(this.closed?0:1))*e,h=Math.floor(c),u=c-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/l)+1)*l:0===u&&h===l-1&&(h=l-2,u=1),this.closed||h>0?n=a[(h-1)%l]:(Mb.subVectors(a[0],a[1]).add(a[0]),n=Mb),i=a[h%l],r=a[(h+1)%l],this.closed||h+2<l?s=a[(h+2)%l]:(Mb.subVectors(a[l-1],a[l-2]).add(a[l-1]),s=Mb),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(s),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Tb.initNonuniformCatmullRom(n.x,i.x,r.x,s.x,p,f,m),Cb.initNonuniformCatmullRom(n.y,i.y,r.y,s.y,p,f,m),Ab.initNonuniformCatmullRom(n.z,i.z,r.z,s.z,p,f,m)}else"catmullrom"===this.curveType&&(Tb.initCatmullRom(n.x,i.x,r.x,s.x,this.tension),Cb.initCatmullRom(n.y,i.y,r.y,s.y,this.tension),Ab.initCatmullRom(n.z,i.z,r.z,s.z,this.tension));return o.set(Tb.calc(u),Cb.calc(u),Ab.calc(u)),o},Ib.prototype.copy=function(e){xb.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ib.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ib.prototype.fromJSON=function(e){xb.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Id).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},(Ob.prototype=Object.create(xb.prototype)).constructor=Ob,Ob.prototype.isCubicBezierCurve=!0,Ob.prototype.getPoint=function(e,t){var n=t||new Md,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Rb(e,i.x,r.x,s.x,o.x),Rb(e,i.y,r.y,s.y,o.y)),n},Ob.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ob.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ob.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(kb.prototype=Object.create(xb.prototype)).constructor=kb,kb.prototype.isCubicBezierCurve3=!0,kb.prototype.getPoint=function(e,t){var n=t||new Id,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Rb(e,i.x,r.x,s.x,o.x),Rb(e,i.y,r.y,s.y,o.y),Rb(e,i.z,r.z,s.z,o.z)),n},kb.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},kb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},kb.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},(Db.prototype=Object.create(xb.prototype)).constructor=Db,Db.prototype.isLineCurve=!0,Db.prototype.getPoint=function(e,t){var n=t||new Md;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Db.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Db.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Db.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Db.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Db.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Nb.prototype=Object.create(xb.prototype)).constructor=Nb,Nb.prototype.isLineCurve3=!0,Nb.prototype.getPoint=function(e,t){var n=t||new Id;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Nb.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Nb.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Nb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Nb.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Fb.prototype=Object.create(xb.prototype)).constructor=Fb,Fb.prototype.isQuadraticBezierCurve=!0,Fb.prototype.getPoint=function(e,t){var n=t||new Md,i=this.v0,r=this.v1,s=this.v2;return n.set(Lb(e,i.x,r.x,s.x),Lb(e,i.y,r.y,s.y)),n},Fb.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Fb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Fb.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(zb.prototype=Object.create(xb.prototype)).constructor=zb,zb.prototype.isQuadraticBezierCurve3=!0,zb.prototype.getPoint=function(e,t){var n=t||new Id,i=this.v0,r=this.v1,s=this.v2;return n.set(Lb(e,i.x,r.x,s.x),Lb(e,i.y,r.y,s.y),Lb(e,i.z,r.z,s.z)),n},zb.prototype.copy=function(e){return xb.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zb.prototype.fromJSON=function(e){return xb.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},(Vb.prototype=Object.create(xb.prototype)).constructor=Vb,Vb.prototype.isSplineCurve=!0,Vb.prototype.getPoint=function(e,t){var n=t||new Md,i=this.points,r=(i.length-1)*e,s=Math.floor(r),o=r-s,a=i[0===s?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(Pb(o,a.x,l.x,c.x,h.x),Pb(o,a.y,l.y,c.y,h.y)),n},Vb.prototype.copy=function(e){xb.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this},Vb.prototype.toJSON=function(){var e=xb.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e},Vb.prototype.fromJSON=function(e){xb.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Md).fromArray(i))}return this};var Bb=Object.freeze({__proto__:null,ArcCurve:Eb,CatmullRomCurve3:Ib,CubicBezierCurve:Ob,CubicBezierCurve3:kb,EllipseCurve:wb,LineCurve:Db,LineCurve3:Nb,QuadraticBezierCurve:Fb,QuadraticBezierCurve3:zb,SplineCurve:Vb});function Hb(){xb.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ub(e){Hb.call(this),this.type="Path",this.currentPoint=new Md,e&&this.setFromPoints(e)}function Gb(e){Ub.call(this,e),this.uuid=Sd.generateUUID(),this.type="Shape",this.holes=[]}function jb(e,t){hp.call(this),this.type="Light",this.color=new tf(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Wb(e,t,n){jb.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(hp.DefaultUp),this.updateMatrix(),this.groundColor=new tf(t)}function qb(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Md(512,512),this.map=null,this.mapPass=null,this.matrix=new qd,this._frustum=new ym,this._frameExtents=new Md(1,1),this._viewportCount=1,this._viewports=[new Nd(0,0,1,1)]}function Yb(){qb.call(this,new hm(50,1,.5,500))}function Xb(e,t,n,i,r,s){jb.call(this,e,t),this.type="SpotLight",this.position.copy(hp.DefaultUp),this.updateMatrix(),this.target=new hp,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==s?s:1,this.shadow=new Yb}function Zb(){qb.call(this,new hm(90,1,.5,500)),this._frameExtents=new Md(4,2),this._viewportCount=6,this._viewports=[new Nd(2,1,1,1),new Nd(0,1,1,1),new Nd(3,1,1,1),new Nd(1,1,1,1),new Nd(3,0,1,1),new Nd(1,0,1,1)],this._cubeDirections=[new Id(1,0,0),new Id(-1,0,0),new Id(0,0,1),new Id(0,0,-1),new Id(0,1,0),new Id(0,-1,0)],this._cubeUps=[new Id(0,1,0),new Id(0,1,0),new Id(0,1,0),new Id(0,1,0),new Id(0,0,1),new Id(0,0,-1)]}function $b(e,t,n,i){jb.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Zb}function Kb(e,t,n,i,r,s){cm.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()}function Jb(){qb.call(this,new Kb(-5,5,5,-5,.5,500))}function Qb(e,t){jb.call(this,e,t),this.type="DirectionalLight",this.position.copy(hp.DefaultUp),this.updateMatrix(),this.target=new hp,this.shadow=new Jb}function ex(e,t){jb.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function tx(e,t,n,i){jb.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function nx(e){db.call(this,e),this.textures={}}Hb.prototype=Object.assign(Object.create(xb.prototype),{constructor:Hb,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Db(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,s=this.curves[i],o=s.getLength();return s.getPointAt(0===o?0:1-r/o)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var s=r[i],o=s.getPoints(s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e),a=0;a<o.length;a++){var l=o[a];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){xb.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=xb.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){xb.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new Bb[i.type]).fromJSON(i))}return this}}),Ub.prototype=Object.assign(Object.create(Hb.prototype),{constructor:Ub,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Db(this.currentPoint.clone(),new Md(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){var r=new Fb(this.currentPoint.clone(),new Md(e,t),new Md(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,s){var o=new Ob(this.currentPoint.clone(),new Md(e,t),new Md(n,i),new Md(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this},splineThru:function(e){var t=new Vb([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,s){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,s),this},absarc:function(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this},ellipse:function(e,t,n,i,r,s,o,a){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,i,r,s,o,a),this},absellipse:function(e,t,n,i,r,s,o,a){var l=new wb(e,t,n,i,r,s,o,a);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);return this.currentPoint.copy(h),this},copy:function(e){return Hb.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Hb.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Hb.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Gb.prototype=Object.assign(Object.create(Ub.prototype),{constructor:Gb,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ub.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Ub.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Ub.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Ub).fromJSON(i))}return this}}),jb.prototype=Object.assign(Object.create(hp.prototype),{constructor:jb,isLight:!0,copy:function(e){return hp.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=hp.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Wb.prototype=Object.assign(Object.create(jb.prototype),{constructor:Wb,isHemisphereLight:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(qb.prototype,{_projScreenMatrix:new qd,_lightPositionWorld:new Id,_lookTarget:new Id,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(e.matrixWorld),t.position.copy(s),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Yb.prototype=Object.assign(Object.create(qb.prototype),{constructor:Yb,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Sd.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),qb.prototype.updateMatrices.call(this,e)}}),Xb.prototype=Object.assign(Object.create(jb.prototype),{constructor:Xb,isSpotLight:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zb.prototype=Object.assign(Object.create(qb.prototype),{constructor:Zb,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,s=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),s.copy(n.position),s.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(s),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(o)}}),$b.prototype=Object.assign(Object.create(jb.prototype),{constructor:$b,isPointLight:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Kb.prototype=Object.assign(Object.create(cm.prototype),{constructor:Kb,isOrthographicCamera:!0,copy:function(e,t){return cm.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,s=n+e,o=i+t,a=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;s=(r+=h*(this.view.offsetX/l))+h*(this.view.width/l),a=(o-=u*(this.view.offsetY/c))-u*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=hp.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Jb.prototype=Object.assign(Object.create(qb.prototype),{constructor:Jb,isDirectionalLightShadow:!0,updateMatrices:function(e){qb.prototype.updateMatrices.call(this,e)}}),Qb.prototype=Object.assign(Object.create(jb.prototype),{constructor:Qb,isDirectionalLight:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ex.prototype=Object.assign(Object.create(jb.prototype),{constructor:ex,isAmbientLight:!0}),tx.prototype=Object.assign(Object.create(jb.prototype),{constructor:tx,isRectAreaLight:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=jb.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),nx.prototype=Object.assign(Object.create(db.prototype),{constructor:nx,load:function(e,t,n,i){var r=this,s=new fb(r.manager);s.setPath(r.path),s.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Y_[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=(new tf).setHex(e.sheen)),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(i.morphNormals=e.morphNormals),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var s=e.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=n(s.value);break;case"c":i.uniforms[r].value=(new tf).setHex(s.value);break;case"v2":i.uniforms[r].value=(new Md).fromArray(s.value);break;case"v3":i.uniforms[r].value=(new Id).fromArray(s.value);break;case"v4":i.uniforms[r].value=(new Nd).fromArray(s.value);break;case"m3":i.uniforms[r].value=(new Rd).fromArray(s.value);case"m4":i.uniforms[r].value=(new qd).fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)i.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new Md).fromArray(a)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Md).fromArray(e.clearcoatNormalScale)),i},setTextures:function(e){return this.textures=e,this}});var ix=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function rx(){Pf.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function sx(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),uf.call(this,e,t,n),this.meshPerAttribute=i||1}function ox(e){db.call(this,e)}rx.prototype=Object.assign(Object.create(Pf.prototype),{constructor:rx,isInstancedBufferGeometry:!0,copy:function(e){return Pf.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Pf.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),sx.prototype=Object.assign(Object.create(uf.prototype),{constructor:sx,isInstancedBufferAttribute:!0,copy:function(e){return uf.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=uf.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),ox.prototype=Object.assign(Object.create(db.prototype),{constructor:ox,load:function(e,t,n,i){var r=this,s=new fb(r.manager);s.setPath(r.path),s.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=e.isInstancedBufferGeometry?new rx:new Pf,n=e.data.index;if(void 0!==n){var i=new ax[n.type](n.array);t.setIndex(new uf(i,1))}var r=e.data.attributes;for(var s in r){i=new ax[(d=r[s]).type](d.array);var o=new(d.isInstancedBufferAttribute?sx:uf)(i,d.itemSize,d.normalized);void 0!==d.name&&(o.name=d.name),t.setAttribute(s,o)}var a=e.data.morphAttributes;if(a)for(var s in a){for(var l=a[s],c=[],h=0,u=l.length;h<u;h++){var d;o=new uf(i=new ax[(d=l[h]).type](d.array),d.itemSize,d.normalized),void 0!==d.name&&(o.name=d.name),c.push(o)}t.morphAttributes[s]=c}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var g=e.data.boundingSphere;if(void 0!==g){var v=new Id;void 0!==g.center&&v.fromArray(g.center),t.boundingSphere=new Ap(v,g.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var ax={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lx(e){db.call(this,e)}lx.prototype=Object.assign(Object.create(db.prototype),{constructor:lx,load:function(e,t,n,i){var r=this,s=""===this.path?ix(e):this.path;this.resourcePath=this.resourcePath||s;var o=new fb(r.manager);o.setPath(this.path),o.load(e,function(n){var s=null;try{s=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}var o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e)},n,i)},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),s=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,s),a=this.parseObject(e.object,i,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new Gb).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new ox,r=0,s=e.length;r<s;r++){var o,a=e[r];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new N_[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new N_[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new N_[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new N_[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new N_[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new N_[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new N_[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new N_[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new N_[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new N_[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new N_[a.type]((new Bb[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new N_[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new N_[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,h=a.shapes.length;c<h;c++)l.push(t[a.shapes[c]]);o=new N_[a.type](l,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=a.shapes.length;c<h;c++)l.push(t[a.shapes[c]]);var u=a.options.extrudePath;void 0!==u&&(a.options.extrudePath=(new Bb[u.type]).fromJSON(u)),o=new N_[a.type](l,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(a,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new nx;r.setTextures(t);for(var s=0,o=e.length;s<o;s++){var a=e[s];if("MultiMaterial"===a.type){for(var l=[],c=0;c<a.materials.length;c++){var h=a.materials[c];void 0===n[h.uuid]&&(n[h.uuid]=r.parse(h)),l.push(n[h.uuid])}i[a.uuid]=l}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=ab.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),s.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var s=new yb(new hb(t));s.setCrossOrigin(this.crossOrigin);for(var o=0,a=e.length;o<a;o++){var l=e[o],c=l.url;if(Array.isArray(c)){i[l.uuid]=[];for(var h=0,u=c.length;h<u;h++){var d=c[h],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[l.uuid].push(r(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url,i[l.uuid]=r(p)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,s=e.length;r<s;r++){var o,a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image),(o=Array.isArray(t[a.image])?new Fm(t[a.image]):new Dd(t[a.image])).needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=n(a.mapping,hx)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=n(a.wrap[0],ux),o.wrapT=n(a.wrap[1],ux)),void 0!==a.format&&(o.format=a.format),void 0!==a.type&&(o.type=a.type),void 0!==a.encoding&&(o.encoding=a.encoding),void 0!==a.minFilter&&(o.minFilter=n(a.minFilter,dx)),void 0!==a.magFilter&&(o.magFilter=n(a.magFilter,dx)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment),i[a.uuid]=o}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var s=e[i];void 0===n[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(n[s])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new up,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new tf(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Sv(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Ev(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new hm(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Kb(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new ex(e.color,e.intensity);break;case"DirectionalLight":i=new Qb(e.color,e.intensity);break;case"PointLight":i=new $b(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new tx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Xb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Wb(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(e.geometry),a=s(e.material);i=o.bones&&o.bones.length>0?new Yv(o,a):new Xf(o,a);break;case"InstancedMesh":o=r(e.geometry),a=s(e.material);var l=e.instanceMatrix;(i=new ny(o,a,e.count)).instanceMatrix=new uf(new Float32Array(l.array),16);break;case"LOD":i=new qv;break;case"Line":i=new cy(r(e.geometry),s(e.material),e.mode);break;case"LineLoop":i=new py(r(e.geometry),s(e.material));break;case"LineSegments":i=new dy(r(e.geometry),s(e.material));break;case"PointCloud":case"Points":i=new _y(r(e.geometry),s(e.material));break;case"Sprite":i=new Uv(s(e.material));break;case"Group":i=new bv;break;default:i=new hp}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,h=0;h<c.length;h++)i.add(this.parseObject(c[h],t,n));if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);for(var u=e.levels,d=0;d<u.length;d++){var p=u[d],f=i.getObjectByProperty("uuid",p.object);void 0!==f&&i.addLevel(f,p.distance)}}return i}});var cx,hx={UVMapping:300,CubeReflectionMapping:Yh,CubeRefractionMapping:Xh,EquirectangularReflectionMapping:Zh,EquirectangularRefractionMapping:$h,SphericalReflectionMapping:Kh,CubeUVReflectionMapping:Jh,CubeUVRefractionMapping:Qh},ux={RepeatWrapping:eu,ClampToEdgeWrapping:tu,MirroredRepeatWrapping:nu},dx={NearestFilter:iu,NearestMipmapNearestFilter:ru,NearestMipmapLinearFilter:su,LinearFilter:ou,LinearMipmapNearestFilter:au,LinearMipmapLinearFilter:lu};function px(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),db.call(this,e),this.options=void 0}function fx(){this.type="ShapePath",this.color=new tf,this.subPaths=[],this.currentPath=null}function mx(e){this.type="Font",this.data=e}function gx(e,t,n,i,r){var s=r.glyphs[e]||r.glyphs["?"];if(s){var o,a,l,c,h,u,d,p,f=new fx;if(s.o)for(var m=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*t+n,a=m[g++]*t+i,f.moveTo(o,a);break;case"l":o=m[g++]*t+n,a=m[g++]*t+i,f.lineTo(o,a);break;case"q":l=m[g++]*t+n,c=m[g++]*t+i,h=m[g++]*t+n,u=m[g++]*t+i,f.quadraticCurveTo(h,u,l,c);break;case"b":l=m[g++]*t+n,c=m[g++]*t+i,h=m[g++]*t+n,u=m[g++]*t+i,d=m[g++]*t+n,p=m[g++]*t+i,f.bezierCurveTo(h,u,d,p,l,c)}return{offsetX:s.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}function vx(e){db.call(this,e)}px.prototype=Object.assign(Object.create(db.prototype),{constructor:px,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,s=cb.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;fetch(e).then(function(e){return e.blob()}).then(function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)}).then(function(n){cb.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}),Object.assign(fx.prototype,{moveTo:function(e,t){return this.currentPath=new Ub,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],s=new Gb;s.curves=r.curves,t.push(s)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,s=0;s<n;r=s++){var o=t[r],a=t[s],l=a.x-o.x,c=a.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[s],l=-l,a=t[r],c=-c),e.y<o.y||e.y>a.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var h=c*(e.x-o.x)-l*(e.y-o.y);if(0===h)return!0;if(h<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(a.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=a.x)return!0}}return i}var r=u_.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return n(s);var o,a,l,c=[];if(1===s.length)return a=s[0],(l=new Gb).curves=a.curves,c.push(l),c;var h=!r(s[0].getPoints());h=e?!h:h;var u,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=s.length;v<y;v++)o=r(u=(a=s[v]).getPoints()),(o=e?!o:o)?(!h&&f[g]&&g++,f[g]={s:new Gb,p:u},f[g].s.curves=a.curves,h&&g++,m[g]=[]):m[g].push({h:a,p:u[0]});if(!f[0])return n(s);if(f.length>1){for(var _=!1,b=[],x=0,w=f.length;x<w;x++)p[x]=[];for(x=0,w=f.length;x<w;x++)for(var E=m[x],S=0;S<E.length;S++){for(var M=E[S],T=!0,C=0;C<f.length;C++)i(M.p,f[C].p)&&(x!==C&&b.push({froms:x,tos:C,hole:S}),T?(T=!1,p[C].push(M)):_=!0);T&&p[x].push(M)}b.length>0&&(_||(m=p))}v=0;for(var A=f.length;v<A;v++){c.push(l=f[v].s);for(var I=0,P=(d=m[v]).length;I<P;I++)l.holes.push(d[I].h)}return c}}),Object.assign(mx.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],a=0,l=0,c=0;c<i.length;c++){var h=i[c];if("\n"===h)a=0,l-=s;else{var u=gx(h,r,a,l,n);a+=u.offsetX,o.push(u.path)}}return o}(e,t,this.data),r=0,s=i.length;r<s;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),vx.prototype=Object.assign(Object.create(db.prototype),{constructor:vx,load:function(e,t,n,i){var r=this,s=new fb(this.manager);s.setPath(this.path),s.load(e,function(e){var n;try{n=JSON.parse(e)}catch(s){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new mx(e)}});var yx={getContext:function(){return void 0===cx&&(cx=new(window.AudioContext||window.webkitAudioContext)),cx},setContext:function(e){cx=e}};function _x(e){db.call(this,e)}function bx(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Id)}function xx(e,t){jb.call(this,void 0,t),this.sh=void 0!==e?e:new bx}function wx(e,t,n){xx.call(this,void 0,n);var i=(new tf).set(e),r=(new tf).set(t),s=new Id(i.r,i.g,i.b),o=new Id(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}function Ex(e,t){xx.call(this,void 0,t);var n=(new tf).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}_x.prototype=Object.assign(Object.create(db.prototype),{constructor:_x,load:function(e,t,n,i){var r=new fb(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(e){var n=e.slice(0);yx.getContext().decodeAudioData(n,function(e){t(e)})},n,i)}}),Object.assign(bx.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScale(s[1],.488603*i),t.addScale(s[2],.488603*r),t.addScale(s[3],.488603*n),t.addScale(s[4],n*i*1.092548),t.addScale(s[5],i*r*1.092548),t.addScale(s[6],.315392*(3*r*r-1)),t.addScale(s[7],n*r*1.092548),t.addScale(s[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScale(s[1],1.023328*i),t.addScale(s[2],1.023328*r),t.addScale(s[3],1.023328*n),t.addScale(s[4],.858086*n*i),t.addScale(s[5],.858086*i*r),t.addScale(s[6],.743125*r*r-.247708),t.addScale(s[7],.858086*n*r),t.addScale(s[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(bx,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),xx.prototype=Object.assign(Object.create(jb.prototype),{constructor:xx,isLightProbe:!0,copy:function(e){return jb.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return jb.prototype.toJSON.call(this,e)}}),wx.prototype=Object.assign(Object.create(xx.prototype),{constructor:wx,isHemisphereLightProbe:!0,copy:function(e){return xx.prototype.copy.call(this,e),this},toJSON:function(e){return xx.prototype.toJSON.call(this,e)}}),Ex.prototype=Object.assign(Object.create(xx.prototype),{constructor:Ex,isAmbientLightProbe:!0,copy:function(e){return xx.prototype.copy.call(this,e),this},toJSON:function(e){return xx.prototype.toJSON.call(this,e)}});var Sx=new qd,Mx=new qd;function Tx(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign((function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hm,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hm,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}).prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var n,i,r=e.projectionMatrix.clone(),s=t.eyeSep/2,o=s*t.near/t.focus,a=t.near*Math.tan(Sd.DEG2RAD*t.fov*.5)/t.zoom;Mx.elements[12]=-s,Sx.elements[12]=s,r.elements[0]=2*t.near/((i=a*t.aspect+o)-(n=-a*t.aspect+o)),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*t.near/((i=a*t.aspect-o)-(n=-a*t.aspect-o)),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Mx),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Sx)}}),Object.assign(Tx.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Cx=new Id,Ax=new Td,Ix=new Id,Px=new Id;function Lx(){hp.call(this),this.type="AudioListener",this.context=yx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Tx}function Rx(e){hp.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Lx.prototype=Object.assign(Object.create(hp.prototype),{constructor:Lx,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){hp.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cx,Ax,Ix),Px.set(0,0,-1).applyQuaternion(Ax),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Cx.x,i),t.positionY.linearRampToValueAtTime(Cx.y,i),t.positionZ.linearRampToValueAtTime(Cx.z,i),t.forwardX.linearRampToValueAtTime(Px.x,i),t.forwardY.linearRampToValueAtTime(Px.y,i),t.forwardZ.linearRampToValueAtTime(Px.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Cx.x,Cx.y,Cx.z),t.setOrientation(Px.x,Px.y,Px.z,n.x,n.y,n.z)}}),Rx.prototype=Object.assign(Object.create(hp.prototype),{constructor:Rx,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Ox=new Id,kx=new Td,Dx=new Id,Nx=new Id;function Fx(e){Rx.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function zx(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Vx(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Fx.prototype=Object.assign(Object.create(Rx.prototype),{constructor:Fx,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(hp.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Ox,kx,Dx),Nx.set(0,0,1).applyQuaternion(kx);var t=this.panner;if(t.positionX){var n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ox.x,n),t.positionY.linearRampToValueAtTime(Ox.y,n),t.positionZ.linearRampToValueAtTime(Ox.z,n),t.orientationX.linearRampToValueAtTime(Nx.x,n),t.orientationY.linearRampToValueAtTime(Nx.y,n),t.orientationZ.linearRampToValueAtTime(Nx.z,n)}else t.setPosition(Ox.x,Ox.y,Ox.z),t.setOrientation(Nx.x,Nx.y,Nx.z)}}}),Object.assign(zx.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Vx.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,s=this.cumulativeWeight;if(0===s){for(var o=0;o!==i;++o)n[r+o]=n[o];s=t}else this._mixBufferRegion(n,r,0,t/(s+=t),i);this.cumulativeWeight=s},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.binding;this.cumulativeWeight=0,r<1&&this._mixBufferRegion(n,i,3*t,1-r,t);for(var o=t,a=t+t;o!==a;++o)if(n[o]!==n[o+t]){s.setValue(n,i);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,n=3*t;this.binding.getValue(e,n);for(var i=t,r=n;i!==r;++i)e[i]=e[n+i%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,n,i,r){if(i>=.5)for(var s=0;s!==r;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,i){Td.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var s=1-i,o=0;o!==r;++o){var a=t+o;e[a]=e[a]*s+e[n+o]*i}}});var Bx=new RegExp("[\\[\\]\\.:\\/]","g"),Hx="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ux=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Gx=/(WCOD+)?/.source.replace("WCOD",Hx),jx=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Wx=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),qx=new RegExp("^"+Ux+Gx+jx+Wx+"$"),Yx=["material","materials","bones"];function Xx(e,t,n){var i=n||Zx.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Zx(e,t,n){this.path=t,this.parsedPath=n||Zx.parseTrackName(t),this.node=Zx.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function $x(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,s=new Array(r),o={endingStart:sd,endingEnd:sd},a=0;a!==r;++a){var l=i[a].createInterpolant(null);s[a]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rd,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Kx(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Jx(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Qx(e,t,n){Mv.call(this,e,t),this.meshPerAttribute=n||1}function ew(e,t){return e.distance-t.distance}function tw(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,s=0,o=r.length;s<o;s++)tw(r[s],t,n,!0)}Object.assign(Xx.prototype,{getValue:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Zx,{Composite:Xx,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Zx.Composite(e,t,n):new Zx(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Bx,"")},parseTrackName:function(e){var t=qx.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Yx.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var s=i(r.children);if(s)return s}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Zx.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Zx.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var s=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===s){s=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==s){if(void 0===e[s])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[s]}}var a=e[i];if(void 0!==a){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Zx.prototype,{_getValue_unbound:Zx.prototype.getValue,_setValue_unbound:Zx.prototype.setValue}),Object.assign((function(){this.uuid=Sd.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}).prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=i[d];if(void 0===p){p=t++,i[d]=p,e.push(u);for(var f=0,m=a;f!==m;++f)o[f].push(new Zx(u,r[f],s[f]))}else if(p<n){l=e[p];var g=--n,v=e[g];for(i[v.uuid]=p,e[p]=v,i[d]=g,e[g]=u,f=0,m=a;f!==m;++f){var y=o[f],_=y[p];y[p]=y[g],void 0===_&&(_=new Zx(u,r[f],s[f])),y[g]=_}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,s=0,o=arguments.length;s!==o;++s){var a=arguments[s],l=a.uuid,c=n[l];if(void 0!==c&&c>=t){var h=t++,u=e[h];n[u.uuid]=c,e[c]=u,n[l]=h,e[h]=a;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[c];f[c]=f[h],f[h]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,s=r.length,o=0,a=arguments.length;o!==a;++o){var l=arguments[o].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){var h=--n,u=e[h],d=e[g=--t];i[u.uuid]=c,e[c]=u,i[d.uuid]=h,e[h]=d,e.pop();for(var p=0,f=s;p!==f;++p){var m=(v=r[p])[g];v[c]=v[h],v[h]=m,v.pop()}}else{var g;for(i[(d=e[g=--t]).uuid]=c,e[c]=d,e.pop(),p=0,f=s;p!==f;++p){var v;(v=r[p])[c]=v[g],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var s=this._paths,o=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=new Array(a.length);n[e]=i=r.length,s.push(e),o.push(t),r.push(c);for(var h=l,u=a.length;h!==u;++h)c[h]=new Zx(a[h],e,t);return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];t[e[o]]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign($x.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,s=i/r;e.warp(1,r/i,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,s=this._timeScaleInterpolant,o=this.timeScale;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var s=(e-r)*n;if(s<0||0===n)return;this._startTime=null,t=n*s}t*=this._updateTimeScale(e);var o=this._updateTime(t),a=this._updateWeight(e);if(a>0)for(var l=this._interpolants,c=this._propertyBindings,h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(i,a)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,s=2202===i;if(0===e)return-1===r?t:s&&1==(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,r+=Math.abs(o);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){var l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=t;if(s&&1==(1&r))return n-t}return t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:sd:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:sd:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);var o=s.parameterPositions,a=s.sampleValues;return o[0]=r,a[0]=t,o[1]=r+e,a[1]=n,this}}),Kx.prototype=Object.assign(Object.create(xd.prototype),{constructor:Kx,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(l[a]=c={});for(var h=0;h!==r;++h){var u=i[h],d=u.name,p=c[d];if(void 0!==p)s[h]=p;else{if(void 0!==(p=s[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,d));continue}++(p=new Vx(Zx.create(n,d,t&&t._propertyBindings[h].binding.parsedPath),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(p,a,d),s[h]=p}o[h].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,s=0,o=r.length;s!==o;++s){var a=r[s];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{var o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],s=this._bindings;void 0===r&&(i[t]=r={}),r[n]=e,e._cacheIndex=s.length,s.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[r],0===Object.keys(o).length&&delete s[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new K_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?ab.findByName(n,e):e,s=null!==r?r.uuid:e,o=this._actionsByClip[s],a=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;a=o.knownActions[0],null===r&&(r=a._clip)}if(null===r)return null;var c=new $x(this,r,t);return this._bindAction(c,a),this._addInactiveAction(c,s,i),c},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?ab.findByName(n,e):e,s=this._actionsByClip[r?r.uuid:e];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){for(var t=this._actions,n=this._nActiveActions,i=this.time+=e*=this.timeScale,r=Math.sign(e),s=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(i,e,r,s);var a=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)a[o].apply(s);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var s=r.knownActions,o=0,a=s.length;o!==a;++o){var l=s[o];this._deactivateAction(l);var c=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var s=this._bindingsByRootAndName[t];if(void 0!==s)for(var o in s){var a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Jx.prototype.clone=function(){return new Jx(void 0===this.value.clone?this.value:this.value.clone())},Qx.prototype=Object.assign(Object.create(Mv.prototype),{constructor:Qx,isInstancedInterleavedBuffer:!0,copy:function(e){return Mv.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign((function(e,t,n,i){this.ray=new Np(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}).prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return tw(e,this,i,t),i.sort(ew),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,s=e.length;r<s;r++)tw(e[r],this,i,t);return i.sort(ew),i}}),Object.assign((function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}).prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Sd.clamp(t/this.radius,-1,1))),this}}),Object.assign((function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}).prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var nw=new Md;function iw(e,t){this.min=void 0!==e?e:new Md(1/0,1/0),this.max=void 0!==t?t:new Md(-1/0,-1/0)}Object.assign(iw.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=nw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Md),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Md),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Md),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Md),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return nw.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var rw=new Id,sw=new Id;function ow(e,t){this.start=void 0!==e?e:new Id,this.end=void 0!==t?t:new Id}function aw(e){hp.call(this),this.material=e,this.render=function(){}}Object.assign(ow.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Id),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Id),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Id),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){rw.subVectors(e,this.start),sw.subVectors(this.end,this.start);var n=sw.dot(sw),i=sw.dot(rw)/n;return t&&(i=Sd.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Id),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),(aw.prototype=Object.create(hp.prototype)).constructor=aw,aw.prototype.isImmediateRenderObject=!0;var lw=new Id;function cw(e,t){hp.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Pf,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,s=1;r<32;r++,s++){var o=r/32*Math.PI*2,a=s/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(a),Math.sin(a),1)}n.setAttribute("position",new _f(i,3));var l=new iy({fog:!1});this.cone=new dy(n,l),this.add(this.cone),this.update()}(cw.prototype=Object.create(hp.prototype)).constructor=cw,cw.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},cw.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lw),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var hw=new Id,uw=new qd,dw=new qd;function pw(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Pf,i=[],r=[],s=new tf(0,0,1),o=new tf(0,1,0),a=0;a<t.length;a++){var l=t[a];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new _f(i,3)),n.setAttribute("color",new _f(r,3));var c=new iy({vertexColors:ah,depthTest:!1,depthWrite:!1,transparent:!0});dy.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function fw(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new x_(t,4,2),r=new cf({wireframe:!0,fog:!1});Xf.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}(pw.prototype=Object.create(dy.prototype)).constructor=pw,pw.prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,i=n.getAttribute("position");dw.getInverse(this.root.matrixWorld);for(var r=0,s=0;r<t.length;r++){var o=t[r];o.parent&&o.parent.isBone&&(uw.multiplyMatrices(dw,o.matrixWorld),hw.setFromMatrixPosition(uw),i.setXYZ(s,hw.x,hw.y,hw.z),uw.multiplyMatrices(dw,o.parent.matrixWorld),hw.setFromMatrixPosition(uw),i.setXYZ(s+1,hw.x,hw.y,hw.z),s+=2)}n.getAttribute("position").needsUpdate=!0,hp.prototype.updateMatrixWorld.call(this,e)},(fw.prototype=Object.create(Xf.prototype)).constructor=fw,fw.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},fw.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var mw=new Id,gw=new tf,vw=new tf;function yw(e,t,n){hp.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Oy(t);i.rotateY(.5*Math.PI),this.material=new cf({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ah);var r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new uf(s,3)),this.add(new Xf(i,this.material)),this.update()}function _w(e,t,n,i){e=e||10,t=t||10,n=new tf(void 0!==n?n:4473924),i=new tf(void 0!==i?i:8947848);for(var r=t/2,s=e/t,o=e/2,a=[],l=[],c=0,h=0,u=-o;c<=t;c++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);var d=c===r?n:i;d.toArray(l,h),d.toArray(l,h+=3),d.toArray(l,h+=3),d.toArray(l,h+=3),h+=3}var p=new Pf;p.setAttribute("position",new _f(a,3)),p.setAttribute("color",new _f(l,3));var f=new iy({vertexColors:ah});dy.call(this,p,f)}function bw(e,t,n,i,r,s){e=e||10,t=t||16,n=n||8,i=i||64,r=new tf(void 0!==r?r:4473924),s=new tf(void 0!==s?s:8947848);var o,a,l,c,h,u,d,p=[],f=[];for(c=0;c<=t;c++)l=c/t*(2*Math.PI),o=Math.sin(l)*e,a=Math.cos(l)*e,p.push(0,0,0),p.push(o,0,a),f.push((d=1&c?r:s).r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:s,u=e-e/n*c,h=0;h<i;h++)l=h/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b),l=(h+1)/i*(2*Math.PI),o=Math.sin(l)*u,a=Math.cos(l)*u,p.push(o,0,a),f.push(d.r,d.g,d.b);var m=new Pf;m.setAttribute("position",new _f(p,3)),m.setAttribute("color",new _f(f,3));var g=new iy({vertexColors:ah});dy.call(this,m,g)}(yw.prototype=Object.create(hp.prototype)).constructor=yw,yw.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},yw.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");gw.copy(this.light.color),vw.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?gw:vw;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(mw.setFromMatrixPosition(this.light.matrixWorld).negate())},_w.prototype=Object.assign(Object.create(dy.prototype),{constructor:_w,copy:function(e){return dy.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),(bw.prototype=Object.create(dy.prototype)).constructor=bw;var xw=new Id,ww=new Id,Ew=new Id;function Sw(e,t,n){hp.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Pf;i.setAttribute("position",new _f([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new iy({fog:!1});this.lightPlane=new cy(i,r),this.add(this.lightPlane),(i=new Pf).setAttribute("position",new _f([0,0,0,0,0,1],3)),this.targetLine=new cy(i,r),this.add(this.targetLine),this.update()}(Sw.prototype=Object.create(hp.prototype)).constructor=Sw,Sw.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Sw.prototype.update=function(){xw.setFromMatrixPosition(this.light.matrixWorld),ww.setFromMatrixPosition(this.light.target.matrixWorld),Ew.subVectors(ww,xw),this.lightPlane.lookAt(ww),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ww),this.targetLine.scale.z=Ew.length()};var Mw=new Id,Tw=new cm;function Cw(e){var t=new Pf,n=new iy({color:16777215,vertexColors:oh}),i=[],r=[],s={},o=new tf(16755200),a=new tf(16711680),l=new tf(43775),c=new tf(16777215),h=new tf(3355443);function u(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",a),u("p","n2",a),u("p","n3",a),u("p","n4",a),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),t.setAttribute("position",new _f(i,3)),t.setAttribute("color",new _f(r,3)),dy.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Aw(e,t,n,i,r,s,o){Mw.set(r,s,o).unproject(i);var a=t[e];if(void 0!==a)for(var l=n.getAttribute("position"),c=0,h=a.length;c<h;c++)l.setXYZ(a[c],Mw.x,Mw.y,Mw.z)}(Cw.prototype=Object.create(dy.prototype)).constructor=Cw,Cw.prototype.update=function(){var e=this.geometry,t=this.pointMap;Tw.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Aw("c",t,e,Tw,0,0,-1),Aw("t",t,e,Tw,0,0,1),Aw("n1",t,e,Tw,-1,-1,-1),Aw("n2",t,e,Tw,1,-1,-1),Aw("n3",t,e,Tw,-1,1,-1),Aw("n4",t,e,Tw,1,1,-1),Aw("f1",t,e,Tw,-1,-1,1),Aw("f2",t,e,Tw,1,-1,1),Aw("f3",t,e,Tw,-1,1,1),Aw("f4",t,e,Tw,1,1,1),Aw("u1",t,e,Tw,.7,1.1,-1),Aw("u2",t,e,Tw,-.7,1.1,-1),Aw("u3",t,e,Tw,0,2,-1),Aw("cf1",t,e,Tw,-1,0,1),Aw("cf2",t,e,Tw,1,0,1),Aw("cf3",t,e,Tw,0,-1,1),Aw("cf4",t,e,Tw,0,1,1),Aw("cn1",t,e,Tw,-1,0,-1),Aw("cn2",t,e,Tw,1,0,-1),Aw("cn3",t,e,Tw,0,-1,-1),Aw("cn4",t,e,Tw,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Iw=new Mp;function Pw(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Pf;r.setIndex(new uf(n,1)),r.setAttribute("position",new uf(i,3)),dy.call(this,r,new iy({color:t})),this.matrixAutoUpdate=!1,this.update()}function Lw(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Pf;i.setIndex(new uf(n,1)),i.setAttribute("position",new _f([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),dy.call(this,i,new iy({color:t})),this.geometry.computeBoundingSphere()}function Rw(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Pf;r.setAttribute("position",new _f([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),cy.call(this,r,new iy({color:i}));var s=new Pf;s.setAttribute("position",new _f([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new Xf(s,new cf({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}(Pw.prototype=Object.create(dy.prototype)).constructor=Pw,Pw.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Iw.setFromObject(this.object),!Iw.isEmpty()){var t=Iw.min,n=Iw.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Pw.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Pw.prototype.copy=function(e){return dy.prototype.copy.call(this,e),this.object=e.object,this},Pw.prototype.clone=function(){return(new this.constructor).copy(this)},(Lw.prototype=Object.create(dy.prototype)).constructor=Lw,Lw.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),hp.prototype.updateMatrixWorld.call(this,e))},(Rw.prototype=Object.create(cy.prototype)).constructor=Rw,Rw.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ih:nh,this.lookAt(this.plane.normal),hp.prototype.updateMatrixWorld.call(this,e)};var Ow,kw,Dw=new Id;function Nw(e,t,n,i,r,s){hp.call(this),void 0===e&&(e=new Id(0,0,1)),void 0===t&&(t=new Id(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===s&&(s=.2*r),void 0===Ow&&((Ow=new Pf).setAttribute("position",new _f([0,0,0,0,1,0],3)),(kw=new L_(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new cy(Ow,new iy({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xf(kw,new cf({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}function Fw(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Pf;n.setAttribute("position",new _f(t,3)),n.setAttribute("color",new _f([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new iy({vertexColors:ah});dy.call(this,n,i)}(Nw.prototype=Object.create(hp.prototype)).constructor=Nw,Nw.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Dw.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Dw,t)}},Nw.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Nw.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Nw.prototype.copy=function(e){return hp.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Nw.prototype.clone=function(){return(new this.constructor).copy(this)},(Fw.prototype=Object.create(dy.prototype)).constructor=Fw;var zw,Vw,Bw=4,Hw=8,Uw=Math.pow(2,Hw),Gw=[.125,.215,.35,.446,.526,.582],jw=Hw-Bw+1+Gw.length,Ww=20,qw={[od]:0,[ad]:1,[cd]:2,[ud]:3,[dd]:4,[pd]:5,[ld]:6},Yw=new Kb,Xw=((Vw=new z_({defines:{n:zw=Ww},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(zw)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Id(0,1,0)},inputEncoding:{value:qw[od]},outputEncoding:{value:qw[od]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:lh,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",Vw),Zw=null,$w=null,{_lodPlanes:Kw,_sizeLods:Jw,_sigmas:Qw}=function(){for(var e=[],t=[],n=[],i=Hw,r=0;r<jw;r++){var s=Math.pow(2,i);t.push(s);var o=1/s;r>Hw-Bw?o=Gw[r-Hw+Bw-1]:0==r&&(o=0),n.push(o);for(var a=1/(s-1),l=-a/2,c=1+a/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],u=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,g=f>2?0:-1;u.set([m,g,0,m+2/3,g,0,m+2/3,g+1,0,m,g,0,m+2/3,g+1,0,m,g+1,0],18*f),d.set(h,12*f),p.set([f,f,f,f,f,f],6*f)}var v=new Pf;v.setAttribute("position",new uf(u,3)),v.setAttribute("uv",new uf(d,2)),v.setAttribute("faceIndex",new uf(p,1)),e.push(v),i>Bw&&i--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}(),eE=null,tE=null,nE=(1+Math.sqrt(5))/2,iE=1/nE,rE=[new Id(1,1,1),new Id(-1,1,1),new Id(1,1,-1),new Id(-1,1,-1),new Id(0,nE,iE),new Id(0,nE,-iE),new Id(iE,0,nE),new Id(-iE,0,nE),new Id(nE,iE,0),new Id(-nE,iE,0)];function sE(e){tE=e,lE(Xw)}function oE(e){var t={magFilter:iu,minFilter:iu,generateMipmaps:!1,type:e?e.type:cu,format:e?e.format:Tu,encoding:e?e.encoding:cd,depthBuffer:!1,stencilBuffer:!1},n=cE(t);return n.depthBuffer=!e,eE=cE(t),n}function aE(){eE.dispose(),tE.setRenderTarget(null);var e=tE.getSize(new Md);tE.setViewport(0,0,e.x,e.y)}function lE(e){var t=new up;t.add(new Xf(Kw[0],e)),tE.compile(t,Yw)}function cE(e){var t=new Fd(3*Uw,3*Uw,e);return t.texture.mapping=Jh,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function hE(e,t,n,i){var r=1/tE.getPixelRatio();tE.setViewport(e*=r,t*=r,n*=r,i*=r),tE.setScissor(e,t,n,i)}function uE(e){var t=tE.autoClear;tE.autoClear=!1;for(var n=1;n<jw;n++)dE(e,n-1,n,Math.sqrt(Qw[n]*Qw[n]-Qw[n-1]*Qw[n-1]),rE[(n-1)%rE.length]);tE.autoClear=t}function dE(e,t,n,i,r){pE(e,eE,t,n,i,"latitudinal",r),pE(eE,e,n,n,i,"longitudinal",r)}function pE(e,t,n,i,r,s,o){"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");var a=new up;a.add(new Xf(Kw[i],Xw));var l=Xw.uniforms,c=Jw[n]-1,h=isFinite(r)?Math.PI/(2*c):2*Math.PI/(2*Ww-1),u=r/h,d=isFinite(r)?1+Math.floor(3*u):Ww;d>Ww&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${d} samples when the maximum is set to ${Ww}`);for(var p=[],f=0,m=0;m<Ww;++m){var g=m/u,v=Math.exp(-g*g/2);p.push(v),0==m?f+=v:m<d&&(f+=2*v)}for(m=0;m<p.length;m++)p[m]=p[m]/f;l.envMap.value=e.texture,l.samples.value=d,l.weights.value=p,l.latitudinal.value="latitudinal"===s,o&&(l.poleAxis.value=o),l.dTheta.value=h,l.mipInt.value=Hw-n,l.inputEncoding.value=qw[e.texture.encoding],l.outputEncoding.value=qw[e.texture.encoding];var y=Jw[i],_=(g=3*Math.max(0,Uw-2*y),(0===i?0:2*Uw)+2*y*(i>Hw-Bw?i-Hw+Bw:0));tE.setRenderTarget(t),hE(g,_,3*y,2*y),tE.render(a,Yw)}function fE(){var e=new z_({uniforms:{envMap:{value:null},texelSize:{value:new Md(1,1)},inputEncoding:{value:qw[od]},outputEncoding:{value:qw[od]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:lh,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function mE(){var e=new z_({uniforms:{envMap:{value:null},inputEncoding:{value:qw[od]},outputEncoding:{value:qw[od]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:lh,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function gE(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ib.call(this,e),this.type="catmullrom"}sE.prototype={constructor:sE,fromScene:function(e,t=0,n=.1,i=100){var r=oE();return function(e,t,n,i){var r=new hm(90,1,t,n),s=[1,1,1,1,-1,1],o=[1,1,-1,-1,-1,1],a=tE.outputEncoding,l=tE.toneMapping,c=tE.toneMappingExposure,h=tE.getClearColor(),u=tE.getClearAlpha();tE.toneMapping=Uh,tE.toneMappingExposure=1,tE.outputEncoding=od,e.scale.z*=-1;var d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();var p=Math.max(d.r,d.g,d.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);d=d.multiplyScalar(Math.pow(2,-f)),tE.setClearColor(d,(f+128)/255),e.background=null}tE.setRenderTarget(i);for(var m=0;m<6;m++){var g=m%3;0==g?(r.up.set(0,s[m],0),r.lookAt(o[m],0,0)):1==g?(r.up.set(0,0,s[m]),r.lookAt(0,o[m],0)):(r.up.set(0,s[m],0),r.lookAt(0,0,o[m])),hE(g*Uw,m>2?Uw:0,Uw,Uw),tE.render(e,r)}tE.toneMapping=l,tE.toneMappingExposure=c,tE.outputEncoding=a,tE.setClearColor(h,u),e.scale.z*=-1}(e,n,i,r),t>0&&dE(r,0,0,t),uE(r),aE(),r.scissorTest=!1,r},fromEquirectangular:function(e){return e.magFilter=iu,e.minFilter=iu,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){var t=oE(e);return function(e,t){var n=new up;e.isCubeTexture?null==$w&&($w=mE()):null==Zw&&(Zw=fE());var i=e.isCubeTexture?$w:Zw;n.add(new Xf(Kw[0],i));var r=i.uniforms;r.envMap.value=e,e.isCubeTexture||r.texelSize.value.set(1/e.image.width,1/e.image.height),r.inputEncoding.value=qw[e.encoding],r.outputEncoding.value=qw[e.encoding],tE.setRenderTarget(t),hE(0,0,3*Uw,2*Uw),tE.render(n,Yw)}(e,t),uE(t),aE(),t.scissorTest=!1,t},compileCubemapShader:function(){null==$w&&lE($w=mE())},compileEquirectangularShader:function(){null==Zw&&lE(Zw=fE())},dispose:function(){Xw.dispose(),null!=$w&&$w.dispose(),null!=Zw&&Zw.dispose();for(var e=0;e<Kw.length;e++)Kw[e].dispose()}},xb.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(xb.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Hb.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new tm,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Id(r.x,r.y,r.z||0))}return t}}),Object.assign(Ub.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Ib.prototype),Object.create(Ib.prototype),gE.prototype=Object.create(Ib.prototype),Object.assign(gE.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),_w.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},pw.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(db.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ix(e)}}),db.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(lx.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(iw.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Mp.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),ow.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Sd,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Sd.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Sd.ceilPowerOfTwo(e)}}),Object.assign(Rd.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(qd.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Id).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,s)}}),Bp.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Td.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Np.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Kp.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Kp,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kp.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kp.getNormal(e,t,n,i)}}),Object.assign(Gb.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new f_(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new T_(this,e)}}),Object.assign(Md.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Id.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Nd.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(tm.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(hp.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(hp.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Xf.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Xf.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(qv.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($v.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Yv.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(xb.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),hm.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(jb.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(uf.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(uf.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:bd),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Pf.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new uf(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)}}),Object.defineProperties(Pf.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Mv.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Mv.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?35048:bd),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(m_.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Jx.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(lf.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new tf}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(H_.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(lm.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(wv.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(wv.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?ad:od}}}),Object.defineProperties(pv.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(fm.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Fd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Rx.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new _x).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),zx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},pm.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Od.crossOrigin=void 0,Od.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new bb;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s},Od.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new _b;r.setCrossOrigin(this.crossOrigin);var s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s},Od.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Od.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"112"}}));const vE=(()=>{class e{constructor(){}GetPackSolution(e,t,n,i){return new wE(e,t,n,i).GetBestPackSolution()}}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e})();class yE{constructor(e,t){this.length=e,this.width=t,this.x=0,this.y=0}}class _E extends yE{constructor(e,t){super(e,t)}}class bE extends yE{constructor(e,t){super(e,t),this.isHorizontal=!0}}class xE{constructor(e,t){this.box=new _E(e,t),this.packages=[]}get maxNumber(){return this.packages.length}}class wE{constructor(e,t,n,i){this.boxLength=e,this.boxWidth=t,this.packageLength=n,this.packageWidth=i}GetCase0Solution(){let e=new xE(this.boxLength,this.boxWidth),t=Math.floor(this.boxLength/this.packageLength),n=Math.floor(this.boxWidth/this.packageWidth);for(let o=0;o<t;o++)for(let t=0;t<n;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=o*this.packageLength,n.y=t*this.packageWidth,n.isHorizontal=!0,e.packages.push(n)}let i=t*this.packageLength,r=Math.floor((this.boxLength-i)/this.packageWidth),s=Math.floor(this.boxWidth/this.packageLength);for(let o=0;o<r;o++)for(let t=0;t<s;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=i+o*this.packageWidth,n.y=0+t*this.packageLength,n.isHorizontal=!1,e.packages.push(n)}return e}GetCase1Solution(){let e=new xE(this.boxLength,this.boxWidth),t=Math.floor(this.boxLength/this.packageWidth),n=Math.floor(this.boxWidth/this.packageLength);for(let o=0;o<t;o++)for(let t=0;t<n;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=o*this.packageWidth,n.y=t*this.packageLength,n.isHorizontal=!1,e.packages.push(n)}let i=n*this.packageLength,r=Math.floor(this.boxLength/this.packageLength),s=Math.floor((this.boxWidth-i)/this.packageWidth);for(let o=0;o<r;o++)for(let t=0;t<s;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=0+o*this.packageLength,n.y=i+t*this.packageWidth,n.isHorizontal=!0,e.packages.push(n)}return e}GetCase2Solution(){let e=new xE(this.boxLength,this.boxWidth),t=(()=>{let e=this.boxLength,t={lenCount:0,widCount:0},n=Math.floor(this.boxLength/this.packageLength);for(let i=0;i<=n;i++){let n=Math.floor((this.boxLength-this.packageLength*i)/this.packageWidth),r=this.boxLength-this.packageLength*i-this.packageWidth*n;e>r&&(t={lenCount:i,widCount:n},e=r)}return t})(),n=t.lenCount,i=Math.floor(this.boxWidth/this.packageWidth),r=t.widCount,s=Math.floor(this.boxWidth/this.packageLength);for(let h=0;h<n;h++)for(let t=0;t<i;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=h*this.packageLength,n.y=t*this.packageWidth,n.isHorizontal=!0,e.packages.push(n)}for(let h=0;h<r;h++)for(let t=0;t<s;t++){let i=new bE(this.packageLength,this.packageWidth);i.x=n*this.packageLength+h*this.packageWidth,i.y=t*this.packageLength,i.isHorizontal=!1,e.packages.push(i)}let o=n*this.packageLength,a=s*this.packageLength,l=Math.floor((this.boxLength-o)/this.packageLength),c=Math.floor((this.boxWidth-a)/this.packageWidth);for(let h=0;h<l;h++)for(let t=0;t<c;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=o+h*this.packageLength,n.y=a+t*this.packageWidth,n.isHorizontal=!0,e.packages.push(n)}return e}GetCase3Solution(){let e=new xE(this.boxLength,this.boxWidth),t=(()=>{let e=this.boxWidth,t={lenCount:0,widCount:0},n=Math.floor(this.boxWidth/this.packageLength);for(let i=0;i<=n;i++){let n=Math.floor((this.boxWidth-this.packageLength*i)/this.packageWidth),r=this.boxWidth-this.packageLength*i-this.packageWidth*n;e>r&&(t={lenCount:i,widCount:n},e=r)}return t})(),n=Math.floor(this.boxLength/this.packageWidth),i=t.lenCount,r=Math.floor(this.boxLength/this.packageLength),s=t.widCount;for(let h=0;h<n;h++)for(let t=0;t<i;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=h*this.packageWidth,n.y=t*this.packageLength,n.isHorizontal=!1,e.packages.push(n)}for(let h=0;h<r;h++)for(let t=0;t<s;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=h*this.packageLength,n.y=i*this.packageLength+t*this.packageWidth,n.isHorizontal=!0,e.packages.push(n)}let o=n*this.packageWidth,a=i*this.packageLength,l=Math.floor((this.boxLength-o)/this.packageWidth),c=Math.floor((this.boxWidth-a)/this.packageLength);for(let h=0;h<l;h++)for(let t=0;t<c;t++){let n=new bE(this.packageLength,this.packageWidth);n.x=o+h*this.packageWidth,n.y=a+t*this.packageLength,n.isHorizontal=!1,e.packages.push(n)}return e}GetBestPackSolution(){let e=this.GetCase0Solution(),t=this.GetCase1Solution(),n=this.GetCase2Solution(),i=this.GetCase3Solution(),r=e;return t.maxNumber>r.maxNumber&&(r=t),n.maxNumber>r.maxNumber&&(r=n),i.maxNumber>r.maxNumber&&(r=i),r}}const EE={showError:!0};class SE{constructor(e,t){this._formBuilder=e,this.packer=t,this.containerIndex=0,this.trayIndex=0,this.packageLength=180,this.packageWidth=105,this.packageHeight=205,this.showLayout=!1,this.isLoadingLayout=!1,this.isInResultPage=!1}get PackSolution(){if(this.isInResultPage)return this.packer.GetPackSolution(this.TraySize.length,this.TraySize.width,this.packageLength,this.packageWidth)}get NumTray(){if(this.isInResultPage)return 1==this.trayIndex?1==this.containerIndex?10:22:1==this.containerIndex?15:33}get NumPackageLevel(){if(this.isInResultPage)return Math.floor(1900/this.packageHeight)}get NumPackagePerLevel(){if(this.isInResultPage)return this.PackSolution.maxNumber}get NumPackagePerTray(){if(this.isInResultPage)return this.NumPackageLevel*this.NumPackagePerLevel}get NumPackage(){if(this.isInResultPage)return this.NumTray*this.NumPackagePerTray}get TraySize(){if(this.isInResultPage)return 1==this.trayIndex?{length:1200,width:1e3}:2==this.trayIndex?{length:1200,width:800}:3==this.trayIndex?{length:1e3,width:800}:{length:0,width:0}}showResult(){this.showLayout=!0,setTimeout(()=>{this.DisplayLayout()})}DisplayLayout(){this.isLoadingLayout=!0,setTimeout(()=>{try{this.DisplayPanelLayout()}catch(e){console.error(e)}try{this.DisplayGeoLayout()}catch(e){console.error(e)}this.isLoadingLayout=!1},200)}DisplayPanelLayout(){if(!this.isInResultPage||!this.showLayout)return;this.canvasEle=document.getElementById("plane-display");const e=this.canvasEle.width;this.canvasEle.width=this.PackSolution.box.length,this.canvasEle.height=this.PackSolution.box.width;let t=this.canvasEle.getContext("2d");t.fillStyle="#008000",t.fillRect(0,0,this.PackSolution.box.length,this.PackSolution.box.width),t.strokeRect(0,0,this.PackSolution.box.length,this.PackSolution.box.width),t.fillStyle="#f8c363",this.PackSolution.packages.forEach(e=>{e.isHorizontal?(t.fillRect(e.x,e.y,e.length,e.width),t.strokeRect(e.x,e.y,e.length,e.width)):(t.fillRect(e.x,e.y,e.width,e.length),t.strokeRect(e.x,e.y,e.width,e.length))}),t.stroke();let n=Math.floor(e)/Math.floor(this.canvasEle.width);t.scale(n,n)}DisplayGeoLayout(){var e,t,n,i=document.getElementById("geo-display");if(!i)return;i.innerHTML="";const r=(e,n,i,r,s,o)=>{var a=new Xf(new nm(e,i,n),new j_({color:16302947,wireframe:!1}));a.position.set(r,o,s),t.add(a);var l=new Pw(a,new tf(0));t.add(l)};(()=>{t=new up,(e=new hm(30,i.offsetWidth/i.offsetHeight,1,8e3)).position.set(4e3,3e3,4e3),e.lookAt(new Id(0,0,0)),(n=new wv({antialias:!0})).setClearColor(new tf(15790320)),n.setSize(i.offsetWidth,i.offsetHeight),i.appendChild(n.domElement);var s=new ex(6316128);t.add(s);var o=new Qb(16777215);let a,l,c,h,u,d;o.position.set(1,.75,.5).normalize(),t.add(o),((e,n,i,r,s,o)=>{var a=new Xf(new nm(this.PackSolution.box.length,this.PackSolution.box.width,100,30,30,30),new j_({color:32768,wireframe:!0}));a.position.set(0,-1e3,0),a.rotation.x=-.5*Math.PI,t.add(a)})(),d=.5*this.packageHeight-950;for(let e=0;e<this.NumPackageLevel;e++)this.PackSolution.packages.forEach(e=>{e.isHorizontal?(a=e.length,l=e.width):(a=e.width,l=e.length),r(a,l,c=this.packageHeight,h=e.x-this.PackSolution.box.length/2+.5*a,u=e.y-this.PackSolution.box.width/2+.5*l,d)}),d+=this.packageHeight})(),n.render(t,e)}onSelectChange(e){3!==e.selectedIndex&&(this.showLayout=!1,this.isInResultPage=!1),3==e.selectedIndex&&(this.isInResultPage=!0)}ngOnInit(){this.firstFormGroup=this._formBuilder.group({firstCtrl:["",tc.required]}),this.secondFormGroup=this._formBuilder.group({secondCtrl:["",tc.required]}),this.thridFormGroup=this._formBuilder.group({thridCtrl1:["",tc.min(80)],thridCtrl2:["",tc.min(80)],thridCtrl3:["",tc.min(80)]}),window.onresize=(()=>{this.DisplayLayout()})}}function ME(e){const t=new _(t=>{t.next(e),t.complete()});return t._isScalar=!0,t.value=e,t}function TE(...e){let t=e[e.length-1];switch(C(t)?e.pop():t=void 0,e.length){case 0:return zl(t);case 1:return t?G(e,t):ME(e[0]);default:return G(e,t)}}const CE=9,AE=37,IE=38,PE=39,LE=40,RE=48,OE=57,kE=65,DE=90;function NE(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function FE(e,t,n){return function(i){return i.lift(new zE(e,t,n))}}class zE{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new VE(e,this.nextOrObserver,this.error,this.complete))}}class VE extends m{constructor(e,t,n,r){super(e),this._tapNext=y,this._tapError=y,this._tapComplete=y,this._tapError=n||y,this._tapComplete=r||y,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||y,this._tapError=t.error||y,this._tapComplete=t.complete||y)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class BE extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class HE extends BE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i=void 0;try{this.work(e)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}const UE=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=(()=>Date.now()),e})();class GE extends UE{constructor(e,t=UE.now){super(e,()=>GE.delegate&&GE.delegate!==this?GE.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return GE.delegate&&GE.delegate!==this?GE.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const jE=new GE(HE);function WE(e,t=jE){return n=>n.lift(new qE(e,t))}class qE{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new YE(e,this.dueTime,this.scheduler))}}class YE extends m{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(XE,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function XE(e){e.debouncedNext()}function ZE(e,t){return function(n){return n.lift(new $E(e,t))}}class $E{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new KE(e,this.predicate,this.thisArg))}}class KE extends m{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function JE(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}JE.prototype=Object.create(Error.prototype);const QE=JE;function eS(e){return t=>0===e?zl():t.lift(new tS(e))}class tS{constructor(e){if(this.total=e,this.total<0)throw new QE}call(e,t){return t.subscribe(new nS(e,this.total))}}class nS extends m{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}let iS;try{iS="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(ZL){iS=!1}const rS=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===Ma:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!iS)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(Ir,8))},token:e,providedIn:"root"}),e})(),sS=(()=>(class{}))();let oS;const aS=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lS(){if(oS)return oS;if("object"!=typeof document||!document)return oS=new Set(aS);let e=document.createElement("input");return oS=new Set(aS.filter(t=>(e.setAttribute("type",t),e.type===t)))}let cS;function hS(e){return function(){if(null==cS&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cS=!0}))}finally{cS=cS||!1}return cS}()?e:!!e.capture}function uS(e){return null!=e&&"false"!==`${e}`}function dS(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function pS(e){return Array.isArray(e)?e:[e]}function fS(e){return null==e?"":"string"==typeof e?e:`${e}px`}function mS(e){return e instanceof Qt?e.nativeElement:e}class gS{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new M,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=(e=>e.disabled),this._pressedLetters=[],this.tabOut=new M,this.change=new M,e instanceof wr&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){if(this._items.length&&this._items.some(e=>"function"!=typeof e.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(FE(e=>this._pressedLetters.push(e)),WE(e),ZE(()=>this._pressedLetters.length>0),B(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const i=(this._activeItemIndex+n)%t.length,r=t[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}setActiveItem(e){const t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case CE:return void this.tabOut.next();case LE:if(this._vertical&&n){this.setNextItemActive();break}return;case IE:if(this._vertical&&n){this.setPreviousItemActive();break}return;case PE:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case AE:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||NE(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=kE&&t<=DE||t>=RE&&t<=OE)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),i=t[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}updateActiveItemIndex(e){this.updateActiveItem(e)}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const i=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof wr?this._items.toArray():this._items}}class vS extends gS{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class yS extends gS{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}const _S=new Ce("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),bS=new Ce("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),xS=(()=>{class e{constructor(e,t,n,i){this._ngZone=t,this._defaultOptions=i,this._document=n,this._liveElement=e||this._createLiveElement()}announce(e,...t){const n=this._defaultOptions;let i,r;return 1===t.length&&"number"==typeof t[0]?r=t[0]:[i,r]=t,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(_S,8),Me(Yr),Me(Sa),Me(bS,8))},token:e,providedIn:"root"}),e})(),wS=650,ES=hS({passive:!0,capture:!0}),SS=(()=>{class e{constructor(e,t){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=(()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")}),this._documentMousedownListener=(()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")}),this._documentTouchstartListener=(e=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=e.composedPath?e.composedPath()[0]:e.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,wS)}),this._windowFocusListener=(()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)})}monitor(e,t=!1){if(!this._platform.isBrowser)return TE(null);const n=mS(e);if(this._elementInfo.has(n)){let e=this._elementInfo.get(n);return e.checkChildren=t,e.subject.asObservable()}let i={unlisten:()=>{},checkChildren:t,subject:new M};this._elementInfo.set(n,i),this._incrementMonitoredElementCount();let r=e=>this._onFocus(e,n),s=e=>this._onBlur(e,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",r,!0),n.addEventListener("blur",s,!0)}),i.unlisten=(()=>{n.removeEventListener("focus",r,!0),n.removeEventListener("blur",s,!0)}),i.subject.asObservable()}stopMonitoring(e){const t=mS(e),n=this._elementInfo.get(t);n&&(n.unlisten(),n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}focusVia(e,t,n){const i=mS(e);this._setOriginForCurrentEventQueue(t),"function"==typeof i.focus&&i.focus(n)}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_setClasses(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(e){let t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const n=this._elementInfo.get(t);if(!n||!n.checkChildren&&t!==e.target)return;let i=this._origin;i||(i=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{document.addEventListener("keydown",this._documentKeydownListener,ES),document.addEventListener("mousedown",this._documentMousedownListener,ES),document.addEventListener("touchstart",this._documentTouchstartListener,ES),window.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,ES),document.removeEventListener("mousedown",this._documentMousedownListener,ES),document.removeEventListener("touchstart",this._documentTouchstartListener,ES),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(Yr),Me(rS))},token:e,providedIn:"root"}),e})();function MS(...e){return t=>{let n=e[e.length-1];C(n)?e.pop():n=null;const i=e.length;return function(...e){return Z(1)(TE(...e))}(1!==i||n?i>0?G(e,n):zl(n):ME(e[0]),t)}}function TS(e){return t=>t.lift(new CS(e))}class CS{constructor(e){this.notifier=e}call(e,t){const n=new AS(e),i=z(n,this.notifier);return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class AS extends V{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}const IS=(()=>(class{constructor(e){this._elementRef=e}focus(){this._elementRef.nativeElement.focus()}}))(),PS=(()=>(class{constructor(e){this.template=e}}))();let LS=0;const RS=new Ce("STEPPER_GLOBAL_OPTIONS"),OS=(()=>(class{constructor(e,t){this._stepper=e,this.interacted=!1,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=t||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType,this._showError=!!this._stepperOptions.showError}get editable(){return this._editable}set editable(e){this._editable=uS(e)}get optional(){return this._optional}set optional(e){this._optional=uS(e)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(e){this._completedOverride=uS(e)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(e){this._customError=uS(e)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}}))(),kS=(()=>(class{constructor(e,t,n,i){this._dir=e,this._changeDetectorRef=t,this._elementRef=n,this._destroyed=new M,this._linear=!1,this._selectedIndex=0,this.selectionChange=new xr,this._orientation="horizontal",this._groupId=LS++,this._document=i}get steps(){return this._steps}get linear(){return this._linear}set linear(e){this._linear=uS(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const t=dS(e);if(this.steps){if(t<0||t>this.steps.length-1)throw Error("cdkStepper: Cannot assign out-of-bounds value to `selectedIndex`.");this._selectedIndex!=t&&!this._anyControlsInvalidOrPending(t)&&(t>=this._selectedIndex||this.steps.toArray()[t].editable)&&this._updateSelectedItemIndex(e)}else this._selectedIndex=t}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=this.steps?this.steps.toArray().indexOf(e):-1}ngAfterViewInit(){this._keyManager=new yS(this._stepHeader).withWrap().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:TE()).pipe(MS(this._layoutDirection()),TS(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.updateActiveItemIndex(this._selectedIndex),this.steps.changes.pipe(TS(this._destroyed)).subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`cdk-step-label-${this._groupId}-${e}`}_getStepContentId(e){return`cdk-step-content-${this._groupId}-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){const t=e-this._selectedIndex;return t<0?"rtl"===this._layoutDirection()?"next":"previous":t>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(e,t="number"){const n=this.steps.toArray()[e],i=this._isCurrentStep(e);return n._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(n,i):this._getGuidelineLogic(n,i,t)}_getDefaultIndicatorLogic(e,t){return e._showError&&e.hasError&&!t?"error":!e.completed||t?"number":e.editable?"edit":"done"}_getGuidelineLogic(e,t,n="number"){return e._showError&&e.hasError&&!t?"error":e.completed&&!t?"done":e.completed&&t?n:e.editable&&t?"edit":n}_isCurrentStep(e){return this._selectedIndex===e}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(e){const t=this.steps.toArray();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:this._selectedIndex,selectedStep:t[e],previouslySelectedStep:t[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItemIndex(e),this._selectedIndex=e,this._stateChanged()}_onKeydown(e){const t=NE(e),n=e.keyCode,i=this._keyManager;null==i.activeItemIndex||t||32!==n&&13!==n?36===n?(i.setFirstItemActive(),e.preventDefault()):35===n?(i.setLastItemActive(),e.preventDefault()):i.onKeydown(e):(this.selectedIndex=i.activeItemIndex,e.preventDefault())}_anyControlsInvalidOrPending(e){const t=this.steps.toArray();return t[this._selectedIndex].interacted=!0,!!(this._linear&&e>=0)&&t.slice(0,e).some(e=>{const t=e.stepControl;return(t?t.invalid||t.pending||!e.interacted:!e.completed)&&!e.optional&&!e._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){if(!this._document||!this._elementRef)return!1;const e=this._elementRef.nativeElement,t=this._document.activeElement;return e===t||e.contains(t)}}))(),DS=(()=>(class{constructor(e){this._stepper=e,this.type="submit"}_handleClick(){this._stepper.next()}}))(),NS=(()=>(class{constructor(e){this._stepper=e,this.type="button"}_handleClick(){this._stepper.previous()}}))(),FS=(()=>(class{}))();class zS{}class VS{}const BS="*";function HS(e,t=null){return{type:2,steps:e,options:t}}function US(e){return{type:6,styles:e,offset:null}}function GS(e){Promise.resolve(null).then(e)}class jS{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){GS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class WS{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,i=0;const r=this.players.length;0==r?GS(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==r&&this._onFinish()}),e.onDestroy(()=>{++n==r&&this._onDestroy()}),e.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){let e=0;return this.players.forEach(t=>{const n=t.getPosition();e=Math.min(n,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const qS="!";function YS(e,t){return n=>n.lift(new XS(e,t))}class XS{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ZS(e,this.compare,this.keySelector))}}class ZS extends m{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}const $S=(()=>(class extends PS{}))(),KS=(()=>{class e{constructor(){this.changes=new M,this.optionalLabel="Optional"}}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e})();function JS(e){return e||new KS}const QS=(()=>(class extends IS{constructor(e,t,n,i){super(n),this._intl=e,this._focusMonitor=t,t.monitor(n,!0),this._intlSubscription=e.changes.subscribe(()=>i.markForCheck())}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(){this._focusMonitor.focusVia(this._elementRef,"program")}_stringLabel(){return this.label instanceof $S?null:this.label}_templateLabel(){return this.label instanceof $S?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(e){return"number"==e?`${this.index+1}`:"edit"==e?"create":"error"==e?"warning":e}}))(),eM=(()=>(class extends OS{constructor(e,t,n){super(e,n),this._errorStateMatcher=t}isErrorState(e,t){return this._errorStateMatcher.isErrorState(e,t)||!!(e&&e.invalid&&this.interacted)}}))(),tM=(()=>(class extends kS{constructor(){super(...arguments),this.animationDone=new xr,this._iconOverrides={},this._animationDone=new M}ngAfterContentInit(){this._icons.forEach(({name:e,templateRef:t})=>this._iconOverrides[e]=t),this._steps.changes.pipe(TS(this._destroyed)).subscribe(()=>this._stateChanged()),this._animationDone.pipe(YS((e,t)=>e.fromState===t.fromState&&e.toState===t.toState),TS(this._destroyed)).subscribe(e=>{"current"===e.toState&&this.animationDone.emit()})}}))(),nM=(()=>(class extends tM{constructor(){super(...arguments),this.labelPosition="end"}}))(),iM=(()=>(class extends DS{}))(),rM=(()=>(class extends NS{}))(),sM=(()=>(class{}))(),oM=new an("8.2.3"),aM=new an("8.2.3"),lM=new Ce("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),cM=(()=>(class{constructor(e,t){this._sanityChecksEnabled=e,this._hammerLoader=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&it()&&!this._isTestEnv()}_isTestEnv(){const e=this._window;return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){aM.full!==oM.full&&console.warn("The Angular Material version ("+aM.full+") does not match the Angular CDK version ("+oM.full+").\nPlease ensure the versions of these two packages exactly match.")}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}))();function hM(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=uS(e)}}}function uM(e,t){return class extends e{get color(){return this._color}set color(e){const n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.color=t}}}function dM(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=uS(e)}}}function pM(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?e:t}}}function fM(e){return class extends e{constructor(...e){super(...e),this.errorState=!1,this.stateChanges=new M}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}let mM;try{mM="undefined"!=typeof Intl}catch(ZL){mM=!1}const gM=(()=>{class e{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e})(),vM=function(){var e={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return e[e.FADING_IN]="FADING_IN",e[e.VISIBLE]="VISIBLE",e[e.FADING_OUT]="FADING_OUT",e[e.HIDDEN]="HIDDEN",e}();class yM{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=vM.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const _M={enterDuration:450,exitDuration:400},bM=800,xM=hS({passive:!0});class wM{constructor(e,t,n,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=(e=>{const t=function(e){return 0===e.buttons}(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+bM;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}),this._onTouchStart=(e=>{if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}),this._onPointerUp=(()=>{this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(e.state===vM.VISIBLE||e.config.terminateOnPointerUp&&e.state===vM.FADING_IN)&&e.fadeOut()}))}),i.isBrowser&&(this._containerElement=mS(n),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}fadeInRipple(e,t,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign({},_M,n.animation);n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=n.radius||function(e,t,n){const i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}(e,t,i),o=e-i.left,a=t-i.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=`${o-s}px`,c.style.top=`${a-s}px`,c.style.height=`${2*s}px`,c.style.width=`${2*s}px`,c.style.backgroundColor=n.color||null,c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new yM(this,c,n);return h.state=vM.FADING_IN,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const e=h===this._mostRecentTransientRipple;h.state=vM.VISIBLE,n.persistent||e&&this._isPointerDown||h.fadeOut()},l),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,i=Object.assign({},_M,e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=vM.FADING_OUT,this._runTimeoutOutsideZone(()=>{e.state=vM.HIDDEN,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}setupTriggerEvents(e){const t=mS(e);t&&t!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(()=>{this._triggerEvents.forEach((e,n)=>{t.addEventListener(n,e,xM)})}),this._triggerElement=t)}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_removeTriggerEvents(){this._triggerElement&&this._triggerEvents.forEach((e,t)=>{this._triggerElement.removeEventListener(t,e,xM)})}}const EM=new Ce("mat-ripple-global-options"),SM=(()=>(class{constructor(e,t,n,i,r){this._elementRef=e,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new wM(this,t,e,n),"NoopAnimations"===r&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,e))}}))(),MM=(()=>(class{}))(),TM=(()=>(class{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}))(),CM=(()=>(class{}))();class AM{}const IM=hM(AM);let PM=0;const LM=(()=>(class extends IM{constructor(){super(...arguments),this._labelId=`mat-optgroup-label-${PM++}`}}))();let RM=0;class OM{constructor(e,t=!1){this.source=e,this.isUserInput=t}}const kM=new Ce("MAT_OPTION_PARENT_COMPONENT"),DM=(()=>(class{constructor(e,t,n,i){this._element=e,this._changeDetectorRef=t,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${RM++}`,this.onSelectionChange=new xr,this._stateChanges=new M}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=uS(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,t){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){13!==e.keyCode&&32!==e.keyCode||NE(e)||(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new OM(this,e))}}))();function NM(e,t,n){if(n.length){let i=t.toArray(),r=n.toArray(),s=0;for(let t=0;t<e+1;t++)i[t].group&&i[t].group===r[s]&&s++;return s}return 0}const FM=(()=>(class{}))(),zM=new Ce("mat-label-global-options"),VM=new Ce("cdk-dir-doc",{providedIn:"root",factory:function(){return Te(Sa)}}),BM=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new xr,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(VM,8))},token:e,providedIn:"root"}),e})(),HM=(()=>(class{}))();function UM(){throw Error("Host already has a portal attached")}class GM{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&UM(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class jM extends GM{constructor(e,t,n,i){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i}}class WM extends GM{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class qM{constructor(){this._isDisposed=!1}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&UM(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof jM?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof WM?(this._attachedPortal=e,this.attachTemplatePortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class YM extends qM{constructor(e,t,n,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.detectChanges(),n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}const XM=(()=>(class{}))(),ZM=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class $M{constructor(e){this._elementRef=e}}const KM=uM(hM(dM($M))),JM=(()=>(class extends KM{constructor(e,t,n){super(e),this._focusMonitor=t,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of ZM)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);e.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color="accent")}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",t){this._focusMonitor.focusVia(this._getHostElement(),e,t)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(e=>this._getHostElement().hasAttribute(e))}}))(),QM=(()=>(class{}))();class eT{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),r=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof eT?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new eT;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof eT?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const r=e.value;if(r){let e=this.headers.get(t);if(!e)return;0===(e=e.filter(e=>-1===r.indexOf(e))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class tT{encodeKey(e){return nT(e)}encodeValue(e){return nT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function nT(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class iT{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tT,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const i=e.indexOf("="),[r,s]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).join("&")}clone(e){const t=new iT({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function rT(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function sT(e){return"undefined"!=typeof Blob&&e instanceof Blob}function oT(e){return"undefined"!=typeof FormData&&e instanceof FormData}class aT{constructor(e,t,n,i){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new eT),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new iT,this.urlWithParams=t}serializeBody(){return null===this.body?null:rT(this.body)||sT(this.body)||oT(this.body)||"string"==typeof this.body?this.body:this.body instanceof iT?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:oT(this.body)?null:sT(this.body)?this.body.type||null:rT(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iT?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,r=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new aT(t,n,r,{params:l,headers:a,reportProgress:o,responseType:i,withCredentials:s})}}const lT=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class cT{constructor(e,t=200,n="OK"){this.headers=e.headers||new eT,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hT extends cT{constructor(e={}){super(e),this.type=lT.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function uT(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}const dT=(()=>(class{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof aT)i=e;else{let r=void 0;r=n.headers instanceof eT?n.headers:new eT(n.headers);let s=void 0;n.params&&(s=n.params instanceof iT?n.params:new iT({fromObject:n.params})),i=new aT(e,t,void 0!==n.body?n.body:null,{headers:r,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=TE(i).pipe(W(e=>this.handler.handle(e),void 0,1));if(e instanceof aT||"events"===n.observe)return r;const s=r.pipe(ZE(e=>e instanceof hT));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return s.pipe(B(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return s.pipe(B(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return s.pipe(B(e=>e.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new iT).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,uT(n,t))}post(e,t,n={}){return this.request("POST",e,uT(n,t))}put(e,t,n={}){return this.request("PUT",e,uT(n,t))}}))();class pT{constructor(e){this.selector=e}call(e,t){return t.subscribe(new fT(e,this.selector,this.caught))}}class fT extends V{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new A(this,void 0,void 0);this.add(i),z(this,n,void 0,void 0,i)}}}class mT{constructor(e){this.callback=e}call(e,t){return t.subscribe(new gT(e,this.callback))}}class gT extends m{constructor(e,t){super(e),this.add(new d(t))}}function vT(e){return Error(`Unable to find icon with the name "${e}"`)}function yT(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+`via Angular's DomSanitizer. Attempted URL was "${e}".`)}function _T(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+`Angular's DomSanitizer. Attempted literal was "${e}".`)}class bT{constructor(e,t){this.options=t,e.nodeName?this.svgElement=e:this.url=e}}const xT=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this._sanitizer=t,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,i){return this._addSvgIconConfig(e,t,new bT(n,i))}addSvgIconLiteralInNamespace(e,t,n,i){const r=this._sanitizer.sanitize(Mt.HTML,n);if(!r)throw _T(n);const s=this._createSvgElementForSingleIcon(r,i);return this._addSvgIconConfig(e,t,new bT(s,i))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new bT(t,n))}addSvgIconSetLiteralInNamespace(e,t,n){const i=this._sanitizer.sanitize(Mt.HTML,t);if(!i)throw _T(t);const r=this._svgElementFromString(i);return this._addSvgIconSetConfig(e,new bT(r,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(Mt.RESOURCE_URL,e);if(!t)throw yT(e);const n=this._cachedIconsByUrl.get(t);return n?TE(wT(n)):this._loadSvgIconFromConfig(new bT(e)).pipe(FE(e=>this._cachedIconsByUrl.set(t,e)),B(e=>wT(e)))}getNamedSvgIcon(e,t=""){const n=ET(t,e),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(t);return r?this._getSvgFromIconSetConfigs(e,r):(s=vT(n),new _(e=>e.error(s)));var s}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgElement?TE(wT(e.svgElement)):this._loadSvgIconFromConfig(e).pipe(FE(t=>e.svgElement=t),B(e=>wT(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);return n?TE(n):Vl(t.filter(e=>!e.svgElement).map(e=>this._loadSvgIconSetFromConfig(e).pipe(function(e){return function(t){const n=new pT(e),i=t.lift(n);return n.caught=i}}(t=>{const n=`Loading icon set URL: ${this._sanitizer.sanitize(Mt.RESOURCE_URL,e.url)} failed: ${t.message}`;return this._errorHandler?this._errorHandler.handleError(new Error(n)):console.error(n),TE(null)})))).pipe(B(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw vT(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.svgElement){const t=this._extractSvgIconFromSet(i.svgElement,e,i.options);if(t)return t}}return null}_loadSvgIconFromConfig(e){return this._fetchUrl(e.url).pipe(B(t=>this._createSvgElementForSingleIcon(t,e.options)))}_loadSvgIconSetFromConfig(e){return e.svgElement?TE(e.svgElement):this._fetchUrl(e.url).pipe(B(t=>(e.svgElement||(e.svgElement=this._svgElementFromString(t)),e.svgElement)))}_createSvgElementForSingleIcon(e,t){const n=this._svgElementFromString(e);return this._setSvgAttributes(n,t),n}_extractSvgIconFromSet(e,t,n){const i=e.querySelector(`[id="${t}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){const t=this._svgElementFromString("<svg></svg>"),n=e.attributes;for(let i=0;i<n.length;i++){const{name:e,value:r}=n[i];"id"!==e&&t.setAttribute(e,r)}for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[i].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchUrl(e){if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==e)throw Error(`Cannot fetch icon from URL "${e}".`);const t=this._sanitizer.sanitize(Mt.RESOURCE_URL,e);if(!t)throw yT(e);const n=this._inProgressUrlFetches.get(t);if(n)return n;const i=this._httpClient.get(t,{responseType:"text"}).pipe((r=(()=>this._inProgressUrlFetches.delete(t)),e=>e.lift(new mT(r))),re());var r;return this._inProgressUrlFetches.set(t,i),i}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(ET(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(dT,8),Me(Tl),Me(Sa,8),Me(et,8))},token:e,providedIn:"root"}),e})();function wT(e){return e.cloneNode(!0)}function ET(e,t){return e+":"+t}class ST{constructor(e){this._elementRef=e}}const MT=uM(ST),TT=new Ce("mat-icon-location",{providedIn:"root",factory:function(){const e=Te(Sa),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),CT=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],AT=CT.map(e=>`[${e}]`).join(", "),IT=/^url\(['"]?#(.*?)['"]?\)$/,PT=(()=>(class extends MT{constructor(e,t,n,i,r){super(e),this._iconRegistry=t,this._location=i,this._errorHandler=r,this._inline=!1,n||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=uS(e)}get fontSet(){return this._fontSet}set fontSet(e){this._fontSet=this._cleanupFontValue(e)}get fontIcon(){return this._fontIcon}set fontIcon(e){this._fontIcon=this._cleanupFontValue(e)}_splitIconName(e){if(!e)return["",""];const t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnChanges(e){const t=e.svgIcon;if(t)if(this.svgIcon){const[e,t]=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(t,e).pipe(eS(1)).subscribe(e=>this._setSvgElement(e),n=>{const i=`Error retrieving icon ${e}:${t}! ${n.message}`;this._errorHandler?this._errorHandler.handleError(new Error(i)):console.error(i)})}else t.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}ngOnInit(){this._usingFontIcon()&&this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&this._location&&e.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const t=e.querySelectorAll("style");for(let n=0;n<t.length;n++)t[n].textContent+=" ";if(this._location){const t=this._location.getPathname();this._previousPath=t,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(t)}this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){const n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const t=this._elementsWithExternalReferences;t&&t.forEach((t,n)=>{t.forEach(t=>{n.setAttribute(t.name,`url('${e}#${t.value}')`)})})}_cacheChildrenWithExternalReferences(e){const t=e.querySelectorAll(AT),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<t.length;i++)CT.forEach(e=>{const r=t[i],s=r.getAttribute(e),o=s?s.match(IT):null;if(o){let t=n.get(r);t||n.set(r,t=[]),t.push({name:e,value:o[1]})}})}}))(),LT=(()=>(class{}))();var RT=qn({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function OT(e){return Gs(2,[zs(null,0)],null,null)}function kT(){return"undefined"!=typeof process}function DT(e){switch(e.length){case 0:return new jS;case 1:return e[0];default:return new WS(e)}}function NT(e,t,n,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(e=>{const n=e.offset,i=n==l,h=i&&c||{};Object.keys(e).forEach(n=>{let i=n,a=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,o),a){case qS:a=r[n];break;case BS:a=s[n];break;default:a=t.normalizeStyleValue(n,i,a,o)}h[i]=a}),i||a.push(h),c=h,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function FT(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&zT(n,"start",e)));break;case"done":e.onDone(()=>i(n&&zT(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&zT(n,"destroy",e)))}}function zT(e,t,n){const i=n.totalTime,r=VT(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),s=e._data;return null!=s&&(r._data=s),r}function VT(e,t,n,i,r="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function BT(e,t,n){let i;return e instanceof Map?(i=e.get(t))||e.set(t,i=n):(i=e[t])||(i=e[t]=n),i}function HT(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let UT=(e,t)=>!1,GT=(e,t)=>!1,jT=(e,t,n)=>[];const WT=kT();(WT||"undefined"!=typeof Element)&&(UT=((e,t)=>e.contains(t)),GT=(()=>{if(WT||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):GT}})(),jT=((e,t,n)=>{let i=[];if(n)i.push(...e.querySelectorAll(t));else{const n=e.querySelector(t);n&&i.push(n)}return i}));let qT=null,YT=!1;function XT(e){qT||(qT=("undefined"!=typeof document?document.body:null)||{},YT=!!qT.style&&"WebkitAppearance"in qT.style);let t=!0;return qT.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in qT.style)&&YT&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in qT.style),t}const ZT=GT,$T=UT,KT=jT;function JT(e){const t={};return Object.keys(e).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=e[n]}),t}const QT=(()=>(class{validateStyleProperty(e){return XT(e)}matchesElement(e,t){return ZT(e,t)}containsElement(e,t){return $T(e,t)}query(e,t,n){return KT(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,i,r,s=[],o){return new jS(n,i)}}))(),eC=(()=>{class e{}return e.NOOP=new QT,e})(),tC=1e3,nC="{{",iC="ng-enter",rC="ng-leave",sC="ng-trigger",oC=".ng-trigger",aC="ng-animating",lC=".ng-animating";function cC(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:hC(parseFloat(t[1]),t[2])}function hC(e,t){switch(t){case"s":return e*tC;default:return e}}function uC(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let i,r=0,s="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=hC(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=hC(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=e;if(!n){let n=!1,s=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(s,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:r,easing:s}}(e,t,n)}function dC(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function pC(e,t,n={}){if(t)for(let i in e)n[i]=e[i];else dC(e,n);return n}function fC(e,t,n){return n?t+":"+n+";":""}function mC(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=fC(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=fC(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function gC(e,t,n){e.style&&(Object.keys(t).forEach(i=>{const r=SC(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[r]),e.style[r]=t[i]}),kT()&&mC(e))}function vC(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=SC(t);e.style[n]=""}),kT()&&mC(e))}function yC(e){return Array.isArray(e)?1==e.length?e[0]:HS(e):e}const _C=new RegExp(`${nC}\\s*(.+?)\\s*}}`,"g");function bC(e){let t=[];if("string"==typeof e){const n=e.toString();let i;for(;i=_C.exec(n);)t.push(i[1]);_C.lastIndex=0}return t}function xC(e,t,n){const i=e.toString(),r=i.replace(_C,(e,i)=>{let r=t[i];return t.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?e:r}function wC(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const EC=/-+([a-z0-9])/g;function SC(e){return e.replace(EC,(...e)=>e[1].toUpperCase())}function MC(e,t){return 0===e||0===t}function TC(e,t,n){const i=Object.keys(n);if(i.length&&t.length){let s=t[0],o=[];if(i.forEach(e=>{s.hasOwnProperty(e)||o.push(e),s[e]=n[e]}),o.length)for(var r=1;r<t.length;r++){let n=t[r];o.forEach(function(t){n[t]=AC(e,t)})}}return t}function CC(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function AC(e,t){return window.getComputedStyle(e)[t]}const IC="*";function PC(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,t,n){if(":"==e[0]){const i=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof i)return void t.push(i);e=i}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const r=i[1],s=i[2],o=i[3];t.push(OC(r,o)),"<"!=s[0]||r==IC&&o==IC||t.push(OC(o,r))})(e,n,t)):n.push(e),n}const LC=new Set(["true","1"]),RC=new Set(["false","0"]);function OC(e,t){const n=LC.has(e)||RC.has(e),i=LC.has(t)||RC.has(t);return(r,s)=>{let o=e==IC||e==r,a=t==IC||t==s;return!o&&n&&"boolean"==typeof r&&(o=r?LC.has(e):RC.has(e)),!a&&i&&"boolean"==typeof s&&(a=s?LC.has(t):RC.has(t)),o&&a}}const kC=":self",DC=new RegExp(`s*${kC}s*,?`,"g");function NC(e,t,n){return new zC(e).build(t,n)}const FC="";class zC{constructor(e){this._driver=e}build(e,t){const n=new VC(t);return this._resetContextStyleTimingState(n),CC(this,yC(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector=FC,e.collectedStyles={},e.collectedStyles[FC]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const r=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,i=n.name;i.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,r.push(this.visitState(n,t))}),n.name=i}else if(1==e.type){const r=this.visitTransition(e,t);n+=r.queryCount,i+=r.depCount,s.push(r)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(e=>{if(BC(e)){const t=e;Object.keys(t).forEach(e=>{bC(t[e]).forEach(e=>{s.hasOwnProperty(e)||r.add(e)})})}}),r.size){const n=wC(r.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=CC(this,yC(e.animation),t);return{type:1,matchers:PC(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:HC(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>CC(this,e,t)),options:HC(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const r=e.steps.map(e=>{t.currentTime=n;const r=CC(this,e,t);return i=Math.max(i,t.currentTime),r});return t.currentTime=i,{type:3,steps:r,options:HC(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return UC(uC(e,t).duration,0,"");const i=e;if(i.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=UC(0,0,"");return e.dynamic=!0,e.strValue=i,e}return UC((n=n||uC(i,t)).duration,n.delay,n.easing)}(e.timings,t.errors);let i;t.currentAnimateTimings=n;let r=e.styles?e.styles:US({});if(5==r.type)i=this.visitKeyframes(r,t);else{let r=e.styles,s=!1;if(!r){s=!0;const e={};n.easing&&(e.easing=n.easing),r=US(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,t);o.isEmptyStep=s,i=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==BS?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let i=!1,r=null;return n.forEach(e=>{if(BC(e)){const t=e,n=t.easing;if(n&&(r=n,delete t.easing),!i)for(let e in t)if(t[e].toString().indexOf(nC)>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,r=t.currentTime;n&&r>0&&(r-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=t.collectedStyles[t.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),t.options&&function(i,r,s){const o=t.options.params||{},a=bC(e[n]);a.length&&a.forEach(e=>{o.hasOwnProperty(e)||s.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(0,0,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(BC(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(BC(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,r.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let h=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));const u=c-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,i)=>{const s=h>0?i==u?1:h*i:r[i],o=s*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=s,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:CC(this,yC(e.animation),t),options:HC(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:HC(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:HC(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[r,s]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>e==kC);return t&&(e=e.replace(DC,"")),[e=e.replace(/@\*/g,oC).replace(/@\w+/g,e=>oC+"-"+e.substr(1)).replace(/:animating/g,lC),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+r:r,BT(t.collectedStyles,t.currentQuerySelector,{});const o=CC(this,yC(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:e.selector,options:HC(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:uC(e.timings,t.errors,!0);return{type:12,animation:CC(this,yC(e.animation),t),timings:n,options:null}}}class VC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function BC(e){return!Array.isArray(e)&&"object"==typeof e}function HC(e){var t;return e?(e=dC(e)).params&&(e.params=(t=e.params)?dC(t):null):e={},e}function UC(e,t,n){return{duration:e,delay:t,easing:n}}function GC(e,t,n,i,r,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class jC{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const WC=1,qC=new RegExp(":enter","g"),YC=new RegExp(":leave","g");function XC(e,t,n,i,r,s={},o={},a,l,c=[]){return(new ZC).buildKeyframes(e,t,n,i,r,s,o,a,l,c)}class ZC{buildKeyframes(e,t,n,i,r,s,o,a,l,c=[]){l=l||new jC;const h=new KC(e,t,l,i,r,c,[]);h.options=a,h.currentTimeline.setStyles([s],null,h.errors,a),CC(this,n,h);const u=h.timelines.filter(e=>e.containsAnimation());if(u.length&&Object.keys(o).length){const e=u[u.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,h.errors,a)}return u.length?u.map(e=>e.buildKeyframes()):[GC(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const i=t.createSubContext(e.options),r=t.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let i=t.currentTimeline.currentTime;const r=null!=n.duration?cC(n.duration):null,s=null!=n.delay?cC(n.delay):null;return 0!==r&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),CC(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const r=e.options;if(r&&(r.params||r.delay)&&((i=t.createSubContext(r)).transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=$C);const e=cC(r.delay);i.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>CC(this,e,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const r=e.options&&e.options.delay?cC(e.options.delay):0;e.steps.forEach(s=>{const o=t.createSubContext(e.options);r&&o.delayNextStep(r),CC(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return uC(t.params?xC(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const r=e.style;5==r.type?this.visitKeyframes(r,t):(t.incrementTime(n.duration),this.visitStyle(r,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(r):n.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,r=n.duration,s=t.createSubContext().currentTimeline;s.easing=n.easing,e.styles.forEach(e=>{s.forwardTime((e.offset||0)*r),s.setStyles(e.styles,e.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(i+r),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},r=i.delay?cC(i.delay):0;r&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=$C);let s=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{t.currentQueryIndex=i;const o=t.createSubContext(e.options,n);r&&o.delayNextStep(r),n===t.element&&(a=o.currentTimeline),CC(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,r=e.timings,s=Math.abs(r.duration),o=s*(t.currentQueryTotal-1);let a=s*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;CC(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const $C={};class KC{constructor(e,t,n,i,r,s,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=$C,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new JC(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=cC(n.duration)),null!=n.delay&&(i.delay=cC(n.delay));const r=n.params;if(r){let e=i.params;e||(e=this.options.params={}),Object.keys(r).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=xC(r[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,r=new KC(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=$C,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},r=new QC(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,r,s){let o=[];if(i&&o.push(this.element),e.length>0){e=(e=e.replace(qC,"."+this._enterClassName)).replace(YC,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return r||0!=o.length||s.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class JC{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new JC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=WC,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||BS,this._currentKeyframe[e]=BS}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&(this._previousKeyframe.easing=t);const r=i&&i.params||{},s=function(e,t){const n={};let i;return e.forEach(e=>{"*"===e?(i=i||Object.keys(t)).forEach(e=>{n[e]=BS}):pC(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(s).forEach(e=>{const t=xC(s[e],r,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:BS),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],i=e._styleSummary[t];(!n||i.time>n.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=pC(r,!0);Object.keys(o).forEach(n=>{const i=o[n];i==qS?e.add(n):i==BS&&t.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=e.size?wC(e.values()):[],s=t.size?wC(t.values()):[];if(n){const e=i[0],t=dC(e);e.offset=0,t.offset=1,i=[e,t]}return GC(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class QC extends JC{constructor(e,t,n,i,r,s,o=!1){super(e,t,s.delay),this.element=t,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const r=[],s=n+t,o=t/s,a=pC(e[0],!1);a.offset=0,r.push(a);const l=pC(e[0],!1);l.offset=eA(o),r.push(l);const c=e.length-1;for(let i=1;i<=c;i++){let o=pC(e[i],!1);o.offset=eA((t+o.offset*n)/s),r.push(o)}n=s,t=0,i="",e=r}return GC(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function eA(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class tA{}class nA extends tA{normalizePropertyName(e,t){return SC(e)}normalizeStyleValue(e,t,n,i){let r="";const s=n.toString().trim();if(iA[t]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&i.push(`Please provide a CSS unit value for ${e}:${n}`)}return s+r}}const iA=(()=>(function(e){const t={};return e.forEach(e=>t[e]=!0),t})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function rA(e,t,n,i,r,s,o,a,l,c,h,u,d){return{type:0,element:e,triggerName:t,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const sA={};class oA{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function(e,t,n,i,r){return e.some(e=>e(t,n,i,r))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){const i=this._stateStyles["*"],r=this._stateStyles[e],s=i?i.buildStyles(t,n):{};return r?r.buildStyles(t,n):s}build(e,t,n,i,r,s,o,a,l,c){const h=[],u=this.ast.options&&this.ast.options.params||sA,d=this.buildStyles(n,o&&o.params||sA,h),p=a&&a.params||sA,f=this.buildStyles(i,p,h),m=new Set,g=new Map,v=new Map,y="void"===i,_={params:Object.assign({},u,p)},b=c?[]:XC(e,t,this.ast.animation,r,s,d,f,_,l,h);let x=0;if(b.forEach(e=>{x=Math.max(e.duration+e.delay,x)}),h.length)return rA(t,this._triggerName,n,i,y,d,f,[],[],g,v,x,h);b.forEach(e=>{const n=e.element,i=BT(g,n,{});e.preStyleProps.forEach(e=>i[e]=!0);const r=BT(v,n,{});e.postStyleProps.forEach(e=>r[e]=!0),n!==t&&m.add(n)});const w=wC(m.values());return rA(t,this._triggerName,n,i,y,d,f,b,w,g,v,x)}}class aA{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},i=dC(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const r=e;Object.keys(r).forEach(e=>{let s=r[e];s.length>1&&(s=xC(s,i,t)),n[e]=s})}}),n}}class lA{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new aA(e.style,e.options&&e.options.params||{})}),cA(this.states,"true","1"),cA(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new oA(e,t,this.states))}),this.fallbackTransition=new oA(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(r=>r.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function cA(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const hA=new jC;class uA{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],i=NC(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,n){const i=e.element,r=NT(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],r=this._animations[e];let s;const o=new Map;if(r?(s=XC(this._driver,t,r,iC,rC,{},{},n,hA,i)).forEach(e=>{const t=BT(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)}):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,BS)})});const a=DT(s.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,i){const r=VT(t,"","","");return FT(this._getPlayer(e),n,r,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const r=this._getPlayer(e);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const dA="ng-animate-queued",pA=".ng-animate-queued",fA="ng-animate-disabled",mA=".ng-animate-disabled",gA="ng-star-inserted",vA=".ng-star-inserted",yA=[],_A={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bA={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xA="__ng_removed";class wA{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(n?e.value:e),n){const t=dC(e);delete t.value,this.options=t}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const EA="void",SA=new wA(EA);class MA{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,OA(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var r;const s=BT(this._elementListeners,e,[]),o={name:t,phase:n,callback:i};s.push(o);const a=BT(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(OA(e,sC),OA(e,sC+"-"+t),a[t]=SA),()=>{this._engine.afterFlush(()=>{const e=s.indexOf(o);e>=0&&s.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,i=!0){const r=this._getTrigger(t),s=new CA(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(OA(e,sC),OA(e,sC+"-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new wA(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=SA),l.value!==EA&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(a.params,l.params)){const t=[],n=r.matchStyles(a.value,a.params,t),i=r.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{vC(e,n),gC(e,i)})}return}const c=BT(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let h=r.matchTransition(a.value,l.value,e,l.params),u=!1;if(!h){if(!i)return;h=r.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:a,toState:l,player:s,isFallbackTransition:u}),u||(OA(e,dA),s.onStart(()=>{kA(e,dA)})),s.onDone(()=>{let t=this.players.indexOf(s);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(s);e>=0&&n.splice(e,1)}}),this.players.push(s),c.push(s),s}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t,n=!1){this._engine.driver.query(e,oC,!0).forEach(e=>{if(e[xA])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,t,n,i){const r=this._engine.statesByElement.get(e);if(r){const s=[];if(Object.keys(r).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,EA,i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&DT(s).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const n=new Set;t.forEach(t=>{const i=t.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,s=this._engine.statesByElement.get(e)[i]||SA,o=new wA(EA),a=new CA(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:r,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)i=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){i=!0;break}}}this.prepareLeaveAnimationListeners(e),i?n.markElementAsRemoved(this.id,e,!1,t):(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}insertNode(e,t){OA(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(t=>{if(t.name==n.triggerName){const i=VT(r,n.triggerName,n.fromState.value,n.toState.value);i._data=e,FT(n.player,t.phase,i,t.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,i=t.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find(t=>t.element===e)||t}}class TA{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=((e,t)=>{})}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new MA(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,t)){this._namespaceList.splice(r+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=n[e[i]].namespaceId;if(r){const e=this._fetchNamespace(r);e&&t.add(e)}}}return t}trigger(e,t,n,i){if(AA(t)){const r=this._fetchNamespace(e);if(r)return r.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!AA(t))return;const r=t[xA];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const i=this._fetchNamespace(e);i&&i.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),OA(e,fA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),kA(e,fA))}removeNode(e,t,n,i){if(AA(t)){const r=e?this._fetchNamespace(e):null;if(r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,n,i){this.collectedLeaveElements.push(t),t[xA]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,i,r){return AA(t)?this._fetchNamespace(e).listen(t,n,i,r):()=>{}}_buildInstruction(e,t,n,i,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,oC,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,lC,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return DT(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[xA];if(t&&t.setForRemoval){if(e[xA]=_A,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,mA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,mA,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)OA(this.collectedEnterElements[n],gA);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?DT(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new jC,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,pA,!0);for(let n=0;n<t.length;n++)c.add(t[n])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=LA(u,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=iC+f++;p.set(t,n),e.forEach(e=>OA(e,n))});const m=[],g=new Set,v=new Set;for(let P=0;P<this.collectedLeaveElements.length;P++){const e=this.collectedLeaveElements[P],t=e[xA];t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,vA,!0).forEach(e=>g.add(e)):v.add(e))}const y=new Map,_=LA(u,Array.from(g));_.forEach((e,t)=>{const n=rC+f++;y.set(t,n),e.forEach(e=>OA(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>kA(e,n))}),_.forEach((e,t)=>{const n=y.get(t);e.forEach(e=>kA(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const b=[],x=[];for(let P=this._namespaceList.length-1;P>=0;P--)this._namespaceList[P].drainQueuedTransitions(t).forEach(e=>{const t=e.player,r=e.element;if(b.push(t),this.collectedEnterElements.length){const e=r[xA];if(e&&e.setForMove)return void t.destroy()}const c=!h||!this.driver.containsElement(h,r),u=y.get(r),d=p.get(r),f=this._buildInstruction(e,n,d,u,c);if(!f.errors||!f.errors.length)return c?(t.onStart(()=>vC(r,f.fromStyles)),t.onDestroy(()=>gC(r,f.toStyles)),void i.push(t)):e.isFallbackTransition?(t.onStart(()=>vC(r,f.fromStyles)),t.onDestroy(()=>gC(r,f.toStyles)),void i.push(t)):(f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(r,f.timelines),s.push({instruction:f,player:t,element:r}),f.queriedElements.forEach(e=>BT(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),void f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let i=l.get(t);i||l.set(t,i=new Set),n.forEach(e=>i.add(e))}));x.push(f)});if(x.length){const e=[];x.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),b.forEach(e=>e.destroy()),this.reportError(e)}const w=new Map,E=new Map;s.forEach(e=>{const t=e.element;n.has(t)&&(E.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,w))}),i.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{BT(w,t,[]).push(e),e.destroy()})});const S=m.filter(e=>NA(e,a,l)),M=new Map;PA(M,this.driver,v,l,BS).forEach(e=>{NA(e,a,l)&&S.push(e)});const T=new Map;d.forEach((e,t)=>{PA(T,this.driver,new Set(e),a,qS)}),S.forEach(e=>{const t=M.get(e),n=T.get(e);M.set(e,Object.assign({},t,n))});const C=[],A=[],I={};s.forEach(e=>{const{element:t,player:s,instruction:o}=e;if(n.has(t)){if(c.has(t))return s.onDestroy(()=>gC(t,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let e=I;if(E.size>1){let n=t;const i=[];for(;n=n.parentNode;){const t=E.get(n);if(t){e=t;break}i.push(n)}i.forEach(t=>E.set(t,e))}const n=this._buildAnimation(s.namespaceId,o,w,r,T,M);if(s.setRealPlayer(n),e===I)C.push(s);else{const t=this.playersByElement.get(e);t&&t.length&&(s.parentPlayer=DT(t)),i.push(s)}}else vC(t,o.fromStyles),s.onDestroy(()=>gC(t,o.toStyles)),A.push(s),c.has(t)&&i.push(s)}),A.forEach(e=>{const t=r.get(e.element);if(t&&t.length){const n=DT(t);e.setRealPlayer(n)}}),i.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let P=0;P<m.length;P++){const e=m[P],t=e[xA];if(kA(e,rC),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let i=this.driver.query(e,lC,!0);for(let e=0;e<i.length;e++){let t=o.get(i[e]);t&&t.length&&n.push(...t)}}const i=n.filter(e=>!e.destroyed);i.length?DA(this,e,i):this.processLeaveNode(e)}return m.length=0,C.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),C}elementContainsData(e,t){let n=!1;const i=t[xA];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,r){let s=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(s=t)}else{const t=this.playersByElement.get(e);if(t){const e=!r||r==EA;t.forEach(t=>{t.queued||(e||t.triggerName==i)&&s.push(t)})}}return(n||i)&&(s=s.filter(e=>!(n&&n!=e.namespaceId||i&&i!=e.triggerName))),s}_beforeAnimationBuild(e,t,n){const i=t.element,r=t.isRemovalTransition?void 0:e,s=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==i,l=BT(n,e,[]);this._getPreviousPlayers(e,a,r,s,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}vC(i,t.fromStyles)}_buildAnimation(e,t,n,i,r,s){const o=t.triggerName,a=t.element,l=[],c=new Set,h=new Set,u=t.timelines.map(t=>{const u=t.element;c.add(u);const d=u[xA];if(d&&d.removedBeforeQueried)return new jS(t.duration,t.delay);const p=u!==a,f=function(e){const t=[];return function e(t,n){for(let i=0;i<t.length;i++){const r=t[i];r instanceof WS?e(r.players,n):n.push(r)}}((n.get(u)||yA).map(e=>e.getRealPlayer()),t),t}().filter(e=>!!e.element&&e.element===u),m=r.get(u),g=s.get(u),v=NT(0,this._normalizer,0,t.keyframes,m,g),y=this._buildPlayer(t,v,f);if(t.subTimeline&&i&&h.add(u),p){const t=new CA(e,o,u);t.setRealPlayer(y),l.push(t)}return y});l.forEach(e=>{BT(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,t,n){let i;if(e instanceof Map){if(i=e.get(t)){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&e.delete(t)}}else if(i=e[t]){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&delete e[t]}return i})(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>OA(e,aC));const d=DT(u);return d.onDestroy(()=>{c.forEach(e=>kA(e,aC)),gC(a,t.toStyles)}),h.forEach(e=>{BT(i,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new jS(e.duration,e.delay)}}class CA{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new jS,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>FT(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){BT(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function AA(e){return e&&1===e.nodeType}function IA(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function PA(e,t,n,i,r){const s=[];n.forEach(e=>s.push(IA(e)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(e=>{const n=s[e]=t.computeStyle(i,e,r);n&&0!=n.length||(i[xA]=bA,o.push(i))}),e.set(i,s)});let a=0;return n.forEach(e=>IA(e,s[a++])),o}function LA(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const i=new Set(t),r=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return 1;let s=r.get(t);if(s)return s;const o=t.parentNode;return s=n.has(o)?o:i.has(o)?1:e(o),r.set(t,s),s}(e);1!==t&&n.get(t).push(e)}),n}const RA="$$classes";function OA(e,t){if(e.classList)e.classList.add(t);else{let n=e[RA];n||(n=e[RA]={}),n[t]=!0}}function kA(e,t){if(e.classList)e.classList.remove(t);else{let n=e[RA];n&&delete n[t]}}function DA(e,t,n){DT(n).onDone(()=>e.processLeaveNode(t))}function NA(e,t,n){const i=n.get(e);if(!i)return!1;let r=t.get(e);return r?i.forEach(e=>r.add(e)):t.set(e,i),n.delete(e),!0}class FA{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=((e,t)=>{}),this._transitionEngine=new TA(e,t,n),this._timelineEngine=new uA(e,t,n),this._transitionEngine.onRemovalComplete=((e,t)=>this.onRemovalComplete(e,t))}registerTrigger(e,t,n,i,r){const s=e+"-"+i;let o=this._triggerCache[s];if(!o){const e=[],t=NC(this._driver,r,e);if(e.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new lA(e,t)}(i,t),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,i,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[e,r]=HT(n);this._timelineEngine.command(e,t,r,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,r){if("@"==n.charAt(0)){const[e,i]=HT(n);return this._timelineEngine.listen(e,t,i,r)}return this._transitionEngine.listen(e,t,n,i,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function zA(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=BA(t[0]),t.length>1&&(i=BA(t[t.length-1]))):t&&(n=BA(t)),n||i?new VA(e,n,i):null}const VA=(()=>{class e{constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;let r=e.initialStylesByElement.get(t);r||e.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&gC(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gC(this._element,this._initialStyles),this._endStyles&&(gC(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(vC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vC(this._element,this._endStyles),this._endStyles=null),gC(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function BA(e){let t=null;const n=Object.keys(e);for(let i=0;i<n.length;i++){const r=n[i];HA(r)&&((t=t||{})[r]=e[r])}return t}function HA(e){return"display"===e||"position"===e}const UA=3,GA="animation",jA="animationend",WA=1e3;class qA{constructor(e,t,n,i,r,s,o){this._element=e,this._name=t,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=(e=>this._handleCallback(e))}apply(){!function(e,t){const n=JA(e,"").trim();n.length&&(function(e,t){let n=0;for(let i=0;i<e.length;i++)","===e.charAt(i)&&n++}(n),t=`${n}, ${t}`),KA(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),$A(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){YA(this._element,this._name,"paused")}resume(){YA(this._element,this._name,"running")}setPosition(e){const t=XA(this._element,this._name);this._position=e*this._duration,KA(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=parseFloat(e.elapsedTime.toFixed(UA))*WA;e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),$A(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=JA(e,"").split(","),i=ZA(n,t);i>=0&&(n.splice(i,1),KA(e,"",n.join(",")))}(this._element,this._name))}}function YA(e,t,n){KA(e,"PlayState",n,XA(e,t))}function XA(e,t){const n=JA(e,"");return n.indexOf(",")>0?ZA(n.split(","),t):ZA([n],t)}function ZA(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function $A(e,t,n){n?e.removeEventListener(jA,t):e.addEventListener(jA,t)}function KA(e,t,n,i){const r=GA+t;if(null!=i){const t=e.style[r];if(t.length){const e=t.split(",");e[i]=n,n=e.join(",")}}e.style[r]=n}function JA(e,t){return e.style[GA+t]}const QA="forwards",eI="linear";class tI{constructor(e,t,n,i,r,s,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||eI,this.totalTime=i+r,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new qA(this.element,this.animationName,this._duration,this._delay,this.easing,QA,()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:AC(this.element,n))})}this.currentSnapshot=e}}class nI extends jS{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=JT(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}const iI="gen_css_kf_",rI=" ";class sI{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return XT(e)}matchesElement(e,t){return ZT(e,t)}containsElement(e,t){return $T(e,t)}query(e,t,n){return KT(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>JT(e));let i=`@keyframes ${t} {\n`,r="";n.forEach(e=>{r=rI;const t=parseFloat(e.offset);i+=`${r}${100*t}% {\n`,r+=rI,Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${t}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.innerHTML=i,s}animate(e,t,n,i,r,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(e=>e instanceof tI),l={};MC(n,i)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=TC(e,t,l));if(0==n)return new nI(e,c);const h=`${iI}${this._count++}`,u=this.buildKeyframeElement(e,h,t);document.querySelector("head").appendChild(u);const d=zA(e,t),p=new tI(e,t,h,n,i,r,c,d);return p.onDestroy(()=>(function(e){u.parentNode.removeChild(u)})()),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class oI{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:AC(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class aI{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(lI().toString()),this._cssKeyframesDriver=new sI}validateStyleProperty(e){return XT(e)}matchesElement(e,t){return ZT(e,t)}containsElement(e,t){return $T(e,t)}query(e,t,n){return KT(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=s.filter(e=>e instanceof oI);MC(n,i)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const h=zA(e,t=TC(e,t=t.map(e=>pC(e,!1)),l));return new oI(e,t,a,h)}}function lI(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}const cI=(()=>(class extends zS{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:Ze.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?HS(e):e;return dI(this._renderer,null,t,"register",[n]),new hI(t,this._renderer)}}))();class hI extends VS{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new uI(this._id,e,t||{},this._renderer)}}class uI{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return dI(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function dI(e,t,n,i,r){return e.setProperty(t,`@@${n}:${i}`,r)}const pI="@",fI="@.disabled",mI=(()=>(class{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=((e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)})}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new gI("",n,this.engine),this._rendererCache.set(n,e)),e}const i=t.id,r=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(r,e),t.data.animation.forEach(t=>this.engine.registerTrigger(i,r,e,t.name,t)),new vI(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}))();class gI{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==pI&&t==fI?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class vI extends gI{constructor(e,t,n,i){super(t,n,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==pI?"."==t.charAt(1)&&t==fI?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==pI){const i=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let r=t.substr(1),s="";return r.charAt(0)!=pI&&([r,s]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}const yI=(()=>(class extends FA{constructor(e,t,n){super(e.body,t,n)}}))();function _I(){return"function"==typeof lI()?new aI:new sI}function bI(){return new nA}function xI(e,t,n){return new mI(e,t,n)}const wI=new Ce("AnimationModuleType"),EI=(()=>(class{}))();var SI=qn({encapsulation:2,styles:[],data:{}});function MI(e){return Gs(0,[zs(null,0),(e()(),Cs(0,null,null,0))],null,null)}function TI(e){return Gs(2,[Os(402653184,1,{content:0}),(e()(),Cs(0,[[1,2]],null,0,null,MI))],null,null)}var CI=qn({encapsulation:2,styles:[".mat-stepper-horizontal,.mat-stepper-vertical{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:36px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{border-top-width:1px;border-top-style:solid;content:'';display:inline-block;height:0;position:absolute;top:36px;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto;padding:24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;padding:24px;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:'';position:absolute;top:-16px;bottom:-16px;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}"],data:{animation:[{type:7,name:"stepTransition",definitions:[{type:0,name:"previous",styles:{type:6,styles:{transform:"translate3d(-100%, 0, 0)",visibility:"hidden"},offset:null},options:void 0},{type:0,name:"current",styles:{type:6,styles:{transform:"none",visibility:"visible"},offset:null},options:void 0},{type:0,name:"next",styles:{type:6,styles:{transform:"translate3d(100%, 0, 0)",visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"* => *",animation:{type:4,styles:null,timings:"500ms cubic-bezier(0.35, 0, 0.25, 1)"},options:null}],options:{}}]}});function AI(e){return Gs(0,[(e()(),As(0,0,null,null,0,"div",[["class","mat-stepper-horizontal-line"]],null,null,null,null,null))],null,null)}function II(e){return Gs(0,[(e()(),As(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),As(1,0,null,null,1,"mat-step-header",[["class","mat-horizontal-stepper-header mat-step-header"],["role","tab"]],[[8,"tabIndex",0],[8,"id",0],[1,"aria-posinset",0],[1,"aria-setsize",0],[1,"aria-controls",0],[1,"aria-selected",0],[1,"aria-label",0],[1,"aria-labelledby",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==e.context.$implicit.select()&&i),"keydown"===t&&(i=!1!==r._onKeydown(n)&&i),i},HI,RI)),rr(2,180224,[[1,4]],0,QS,[KS,SS,Qt,xn],{state:[0,"state"],label:[1,"label"],errorMessage:[2,"errorMessage"],iconOverrides:[3,"iconOverrides"],index:[4,"index"],selected:[5,"selected"],active:[6,"active"],optional:[7,"optional"],disableRipple:[8,"disableRipple"]},null),(e()(),Cs(16777216,null,null,1,null,AI)),rr(4,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(0,null,null,0))],function(e,t){var n=t.component;e(t,2,0,n._getIndicatorType(t.context.index,t.context.$implicit.state),t.context.$implicit.stepLabel||t.context.$implicit.label,t.context.$implicit.errorMessage,n._iconOverrides,t.context.index,n.selectedIndex===t.context.index,t.context.$implicit.completed||n.selectedIndex===t.context.index||!n.linear,t.context.$implicit.optional,n.disableRipple),e(t,4,0,!t.context.last)},function(e,t){var n=t.component;e(t,1,0,n._getFocusIndex()===t.context.index?0:-1,n._getStepLabelId(t.context.index),t.context.index+1,n.steps.length,n._getStepContentId(t.context.index),n.selectedIndex==t.context.index,t.context.$implicit.ariaLabel||null,!t.context.$implicit.ariaLabel&&t.context.$implicit.ariaLabelledby?t.context.$implicit.ariaLabelledby:null)})}function PI(e){return Gs(0,[(e()(),As(0,0,null,null,2,"div",[["class","mat-horizontal-stepper-content"],["role","tabpanel"]],[[1,"tabindex",0],[24,"@stepTransition",0],[8,"id",0],[1,"aria-labelledby",0],[1,"aria-expanded",0]],[[null,"@stepTransition.done"]],function(e,t,n){var i=!0;return"@stepTransition.done"===t&&(i=!1!==e.component._animationDone.next(n)&&i),i},null,null)),(e()(),As(1,16777216,null,null,1,null,null,null,null,null,null,null)),rr(2,540672,null,0,wa,[An],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(e,t){e(t,2,0,t.context.$implicit.content)},function(e,t){var n=t.component;e(t,0,0,n.selectedIndex===t.context.index?0:null,n._getAnimationDirection(t.context.index),n._getStepContentId(t.context.index),n._getStepLabelId(t.context.index),n.selectedIndex===t.context.index)})}function LI(e){return Gs(2,[Os(671088640,1,{_stepHeader:1}),(e()(),As(1,0,null,null,2,"div",[["class","mat-horizontal-stepper-header-container"]],null,null,null,null,null)),(e()(),Cs(16777216,null,null,1,null,II)),rr(3,278528,null,0,pa,[An,Tn,_n],{ngForOf:[0,"ngForOf"]},null),(e()(),As(4,0,null,null,2,"div",[["class","mat-horizontal-content-container"]],null,null,null,null,null)),(e()(),Cs(16777216,null,null,1,null,PI)),rr(6,278528,null,0,pa,[An,Tn,_n],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,3,0,n.steps),e(t,6,0,n.steps)},null)}var RI=qn({encapsulation:2,styles:[".mat-step-header{overflow:hidden;outline:0;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon .mat-icon,.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}"],data:{}});function OI(e){return Gs(0,[(e()(),As(0,16777216,null,null,1,null,null,null,null,null,null,null)),rr(1,540672,null,0,wa,[An],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(e()(),Cs(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,n._getIconContext(),n.iconOverrides[n.state])},null)}function kI(e){return Gs(0,[(e()(),As(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){var n=t.component;e(t,1,0,n._getDefaultTextForState(n.state))})}function DI(e){return Gs(0,[(e()(),As(0,0,null,null,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,OT,RT)),rr(1,9158656,null,0,PT,[Qt,xT,[8,null],[2,TT],[2,et]],null,null),(e()(),Bs(2,0,["",""]))],function(e,t){e(t,1,0)},function(e,t){var n=t.component;e(t,0,0,Wi(t,1).inline,"primary"!==Wi(t,1).color&&"accent"!==Wi(t,1).color&&"warn"!==Wi(t,1).color),e(t,2,0,n._getDefaultTextForState(n.state))})}function NI(e){return Gs(0,[(e()(),As(0,0,null,null,5,null,null,null,null,null,null,null)),rr(1,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Cs(16777216,null,null,1,null,kI)),rr(3,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,DI)),rr(5,16384,null,0,xa,[An,Tn,_a],null,null),(e()(),Cs(0,null,null,0))],function(e,t){e(t,1,0,t.component.state),e(t,3,0,"number")},null)}function FI(e){return Gs(0,[(e()(),As(0,16777216,null,null,1,null,null,null,null,null,null,null)),rr(1,540672,null,0,wa,[An],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),Cs(0,null,null,0))],function(e,t){e(t,1,0,t.component._templateLabel().template)},null)}function zI(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-step-text-label"]],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.label)})}function VI(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-step-optional"]],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component._intl.optionalLabel)})}function BI(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-step-sub-label-error"]],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.errorMessage)})}function HI(e){return Gs(2,[(e()(),As(0,0,null,null,1,"div",[["class","mat-step-header-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),rr(1,212992,null,0,SM,[Qt,Yr,rS,[2,EM],[2,wI]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null),(e()(),As(2,0,null,null,6,"div",[],[[8,"className",0],[2,"mat-step-icon-selected",null]],null,null,null,null)),(e()(),As(3,0,null,null,5,"div",[["class","mat-step-icon-content"]],null,null,null,null,null)),rr(4,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Cs(16777216,null,null,1,null,OI)),rr(6,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,NI)),rr(8,16384,null,0,xa,[An,Tn,_a],null,null),(e()(),As(9,0,null,null,8,"div",[["class","mat-step-label"]],[[2,"mat-step-label-active",null],[2,"mat-step-label-selected",null],[2,"mat-step-label-error",null]],null,null,null,null)),(e()(),Cs(16777216,null,null,1,null,FI)),rr(11,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,zI)),rr(13,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,VI)),rr(15,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,BI)),rr(17,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.disableRipple,n._getHostElement()),e(t,4,0,!(!n.iconOverrides||!n.iconOverrides[n.state])),e(t,6,0,!0),e(t,11,0,n._templateLabel()),e(t,13,0,n._stringLabel()),e(t,15,0,n.optional&&"error"!=n.state),e(t,17,0,"error"==n.state)},function(e,t){var n=t.component;e(t,0,0,Wi(t,1).unbounded),e(t,2,0,_i(1,"mat-step-icon-state-",n.state," mat-step-icon"),n.selected),e(t,9,0,n.active,n.selected,"error"==n.state)})}function UI(e,t,n,r){return i(n)&&(r=n,n=void 0),r?UI(e,t,n).pipe(B(e=>l(e)?r(...e):r(e))):new _(i=>{!function e(t,n,i,r,s){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(n,i,s),o=(()=>e.removeEventListener(n,i,s))}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(n,i),o=(()=>e.off(n,i))}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(n,i),o=(()=>e.removeListener(n,i))}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)e(t[o],n,i,r,s)}r.add(o)}(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}class GI{}function jI(e){return Error(`A hint was already declared for 'align="${e}"'.`)}const WI=(()=>(class{}))();let qI=0;class YI{constructor(e){this._elementRef=e}}const XI=uM(YI,"primary"),ZI=new Ce("MAT_FORM_FIELD_DEFAULT_OPTIONS"),$I=(()=>(class extends XI{constructor(e,t,n,i,r,s,o,a){super(e),this._elementRef=e,this._changeDetectorRef=t,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new M,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${qI++}`,this._labelId=`mat-form-field-label-${qI++}`,this._previousDirection="ltr",this._labelOptions=n||{},this.floatLabel=this._labelOptions.float||"auto",this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=uS(e)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(MS(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(TS(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(TS(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),$(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(MS(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(MS(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(TS(this._destroyed)).subscribe(()=>{this.updateOutlineGap(),this._previousDirection=this._dir.value})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,UI(this._label.nativeElement,"transitionend").pipe(eS(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let e,t;this._hintChildren.forEach(n=>{if("start"===n.align){if(e||this.hintLabel)throw jI("start");e=n}else if("end"===n.align){if(t)throw jI("end");t=n}})}}_syncDescribedByIds(){if(this._control){let e=[];if("hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,n=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&(e=this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(!this._platform.isBrowser)return;if(!document.documentElement.contains(this._elementRef.nativeElement))return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=this._getStartEnd(e.children[0].getBoundingClientRect());let a=0;for(const t of e.children)a+=t.offsetWidth;t=o-s-5,n=a>0?.75*a+10:0}for(let o=0;o<r.length;o++)r.item(o).style.width=`${t}px`;for(let o=0;o<s.length;o++)s.item(o).style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return"rtl"===this._previousDirection?e.right:e.left}}))(),KI=(()=>(class{}))(),JI=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e})(),QI=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=mS(e);return new _(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new M,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(JI))},token:e,providedIn:"root"}),e})(),eP=(()=>(class{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new xr,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=uS(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=dS(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(WE(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}))(),tP=(()=>(class{}))();var nP=qn({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function iP(e){return Gs(0,[(e()(),As(0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),As(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(e()(),As(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),As(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),As(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(e()(),As(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(e()(),As(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),As(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),As(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function rP(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),zs(null,0)],null,null)}function sP(e){return Gs(0,[(e()(),As(0,0,null,null,3,null,null,null,null,null,null,null)),zs(null,2),(e()(),As(2,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Bs(3,null,["",""]))],null,function(e,t){e(t,3,0,t.component._control.placeholder)})}function oP(e){return Gs(0,[zs(null,3),(e()(),Cs(0,null,null,0))],null,null)}function aP(e){return Gs(0,[(e()(),As(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(e()(),Bs(-1,null,[" *"]))],null,null)}function lP(e){return Gs(0,[(e()(),As(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],function(e,t,n){var i=!0;return"cdkObserveContent"===t&&(i=!1!==e.component.updateOutlineGap()&&i),i},null,null)),rr(1,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),rr(2,1196032,null,0,eP,[QI,Qt,Yr],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(e()(),Cs(16777216,null,null,1,null,sP)),rr(4,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,oP)),rr(6,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,aP)),rr(8,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n._hasLabel()),e(t,2,0,"outline"!=n.appearance),e(t,4,0,!1),e(t,6,0,!0),e(t,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(e,t){var n=t.component;e(t,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function cP(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),zs(null,4)],null,null)}function hP(e){return Gs(0,[(e()(),As(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(e()(),As(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,1,0,"accent"==n.color,"warn"==n.color)})}function uP(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),zs(null,5)],null,function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function dP(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,n._hintLabelId),e(t,1,0,n.hintLabel)})}function pP(e){return Gs(0,[(e()(),As(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(e()(),Cs(16777216,null,null,1,null,dP)),rr(2,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),zs(null,6),(e()(),As(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),zs(null,7)],function(e,t){e(t,2,0,t.component.hintLabel)},function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function fP(e){return Gs(2,[Os(671088640,1,{underlineRef:0}),Os(402653184,2,{_connectionContainerRef:0}),Os(671088640,3,{_inputContainerRef:0}),Os(671088640,4,{_label:0}),(e()(),As(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(e()(),As(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],function(e,t,n){var i=!0,r=e.component;return"click"===t&&(i=!1!==(r._control.onContainerClick&&r._control.onContainerClick(n))&&i),i},null,null)),(e()(),Cs(16777216,null,null,1,null,iP)),rr(7,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,rP)),rr(9,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),As(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),zs(null,1),(e()(),As(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(e()(),Cs(16777216,null,null,1,null,lP)),rr(14,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,cP)),rr(16,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),Cs(16777216,null,null,1,null,hP)),rr(18,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),As(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),rr(20,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Cs(16777216,null,null,1,null,uP)),rr(22,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,pP)),rr(24,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,t){var n=t.component;e(t,7,0,"outline"==n.appearance),e(t,9,0,n._prefixChildren.length),e(t,14,0,n._hasFloatingLabel()),e(t,16,0,n._suffixChildren.length),e(t,18,0,"outline"!=n.appearance),e(t,20,0,n._getDisplayedMessages()),e(t,22,0,"error"),e(t,24,0,"hint")},null)}class mP{constructor(e=!1,t,n=!0){this._multiple=e,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new M,this.onChange=this.changed,t&&t.length&&(e?t.forEach(e=>this._markSelected(e)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){if(e.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}class gP{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new vP(e,this.durationSelector))}}class vP extends V{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:i}=this;n=i(e)}catch(t){return this.destination.error(t)}const i=z(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function yP(e){return!l(e)&&e-parseFloat(e)+1>=0}function _P(e){const{index:t,period:n,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}function bP(e,t=jE){return n=(()=>(function(e=0,t,n){let i=-1;return yP(t)?i=Number(t)<1?1:Number(t):C(t)&&(n=t),C(n)||(n=jE),new _(t=>{const r=yP(e)?e:+e-n.now();return n.schedule(_P,r,{index:0,period:i,subscriber:t})})})(e,t)),function(e){return e.lift(new gP(n))};var n}function xP(e,t){return"function"==typeof t?n=>n.pipe(xP((n,i)=>j(e(n,i)).pipe(B((e,r)=>t(n,e,i,r))))):t=>t.lift(new wP(e))}class wP{constructor(e){this.project=e}call(e,t){return t.subscribe(new EP(e,this.project))}}class EP extends V{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)}_innerSub(e,t,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new A(this,void 0,void 0);this.destination.add(r),this.innerSubscription=z(this,e,t,n,r)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,i,r){this.destination.next(t)}}const SP=20,MP=(()=>{class e{constructor(e,t){this._ngZone=e,this._platform=t,this._scrolled=new M,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=SP){return this._platform.isBrowser?new _(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(bP(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):TE()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(ZE(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_scrollableContainsElement(e,t){let n=t.nativeElement,i=e.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>UI(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(Yr),Me(rS))},token:e,providedIn:"root"}),e})(),TP=(()=>(class{}))(),CP=20,AP=(()=>{class e{constructor(e,t){this._platform=e,t.runOutsideAngular(()=>{this._change=e.isBrowser?$(UI(window,"resize"),UI(window,"orientationchange")):TE(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}change(e=CP){return e>0?this._change.pipe(bP(e)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(rS),Me(Yr))},token:e,providedIn:"root"}),e})();class IP{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=fS(-this._previousScrollPosition.left),e.style.top=fS(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,i=t.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=i,n.scrollBehavior=r}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}function PP(){return Error("Scroll strategy has already been attached.")}class LP{constructor(e,t,n,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=(()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())})}attach(e){if(this._overlayRef)throw PP();this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class RP{enable(){}disable(){}attach(){}}function OP(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function kP(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class DP{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(e){if(this._overlayRef)throw PP();this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();OP(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}const NP=(()=>{class e{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=(()=>new RP),this.close=(e=>new LP(this._scrollDispatcher,this._ngZone,this._viewportRuler,e)),this.block=(()=>new IP(this._viewportRuler,this._document)),this.reposition=(e=>new DP(this._scrollDispatcher,this._viewportRuler,this._ngZone,e)),this._document=i}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(MP),Me(AP),Me(Yr),Me(Sa))},token:e,providedIn:"root"}),e})();class FP{constructor(e){if(this.scrollStrategy=new RP,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class zP{constructor(e,t,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}const VP=(()=>(class{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}))();function BP(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". `+'Expected "top", "bottom" or "center".')}function HP(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". `+'Expected "start", "end" or "center".')}const UP=(()=>{class e{constructor(e){this._attachedOverlays=[],this._keydownListener=(e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEventSubscriptions>0){t[n]._keydownEvents.next(e);break}}),this._document=e}ngOnDestroy(){this._detach()}add(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(Sa))},token:e,providedIn:"root"}),e})(),GP=(()=>{class e{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.getElementsByClassName("cdk-overlay-container");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);const t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(Sa))},token:e,providedIn:"root"}),e})();class jP{constructor(e,t,n,i,r,s,o,a){this._portalOutlet=e,this._host=t,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=o,this._location=a,this._backdropElement=null,this._backdropClick=new M,this._attachments=new M,this._detachments=new M,this._locationChanges=d.EMPTY,this._backdropClickHandler=(e=>this._backdropClick.next(e)),this._keydownEventsObservable=new _(e=>{const t=this._keydownEvents.subscribe(e);return this._keydownEventSubscriptions++,()=>{t.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new M,this._keydownEventSubscriptions=0,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(eS(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign({},this._config,e),this._updateElementSize()}setDirection(e){this._config=Object.assign({},this._config,{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=fS(this._config.width),e.height=fS(this._config.height),e.minWidth=fS(this._config.minWidth),e.minHeight=fS(this._config.minHeight),e.maxWidth=fS(this._config.maxWidth),e.maxHeight=fS(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),t.parentNode&&t.parentNode.removeChild(t)),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const i=e.classList;pS(t).forEach(e=>{e&&(n?i.add(e):i.remove(e))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.asObservable().pipe(TS($(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}}const WP="cdk-overlay-connected-position-bounding-box";class qP{constructor(e,t,n,i,r){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new M,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add(WP),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,i=[];let r;for(let s of this._preferredPositions){let o=this._getOriginPoint(e,s),a=this._getOverlayPoint(o,t,s),l=this._getOverlayFit(a,t,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:s,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:t})}if(i.length){let e=null,t=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>t&&(t=i,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&YP(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(WP),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,i;if("center"==t.originX)n=e.left+e.width/2;else{const i=this._isRtl()?e.right:e.left,r=this._isRtl()?e.left:e.right;n="start"==t.originX?i:r}return{x:n,y:i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}_getOverlayPoint(e,t,n){let i,r;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,{x:e.x+i,y:e.y+(r="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height)}}_getOverlayFit(e,t,n,i){let{x:r,y:s}=e,o=this._getOffset(i,"x"),a=this._getOffset(i,"y");o&&(r+=o),a&&(s+=a);let l=0-s,c=s+t.height-n.height,h=this._subtractOverflows(t.width,0-r,r+t.width-n.width),u=this._subtractOverflows(t.height,l,c),d=h*u;return{visibleArea:d,isCompletelyWithinViewport:t.width*t.height===d,fitsInViewportVertically:u===t.height,fitsInViewportHorizontally:h==t.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,r=n.right-t.x,s=this._overlayRef.getConfig().minHeight,o=this._overlayRef.getConfig().minWidth,a=e.fitsInViewportHorizontally||null!=o&&o<=r;return(e.fitsInViewportVertically||null!=s&&s<=i)&&a}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=this._viewportRect,r=Math.max(e.x+t.width-i.right,0),s=Math.max(e.y+t.height-i.bottom,0),o=Math.max(i.top-n.top-e.y,0),a=Math.max(i.left-n.left-e.x,0);let l=0,c=0;return this._previousPushAmount={x:l=t.width<=i.width?a||-r:e.x<this._viewportMargin?i.left-n.left-e.x:0,y:c=t.height<=i.height?o||-s:e.y<this._viewportMargin?i.top-n.top-e.y:0},{x:e.x+l,y:e.y+c}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),n=new VP(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,i=this._isRtl();let r,s,o,a,l,c;if("top"===t.overlayY)r=n.height-(s=e.y)+this._viewportMargin;else if("bottom"===t.overlayY)r=n.height-(o=n.height-e.y+2*this._viewportMargin)+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),i=this._lastBoundingBoxSize.height;s=e.y-t,(r=2*t)>i&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-i/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)c=n.width-e.x+this._viewportMargin,a=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),i=this._lastBoundingBoxSize.width;l=e.x-t,(a=2*t)>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-i/2)}return{top:s,left:l,bottom:o,right:c,width:a,height:r}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="",i.width=i.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=fS(n.height),i.top=fS(n.top),i.bottom=fS(n.bottom),i.width=fS(n.width),i.left=fS(n.left),i.right=fS(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(i.maxHeight=fS(e)),r&&(i.maxWidth=fS(r))}this._lastBoundingBoxSize=n,YP(this._boundingBox.style,i)}_resetBoundingBoxStyles(){YP(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){YP(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={};if(this._hasExactPosition()){const i=this._viewportRuler.getViewportScrollPosition();YP(n,this._getExactOverlayY(t,e,i)),YP(n,this._getExactOverlayX(t,e,i))}else n.position="static";let i="",r=this._getOffset(t,"x"),s=this._getOffset(t,"y");r&&(i+=`translateX(${r}px) `),s&&(i+=`translateY(${s}px)`),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),YP(this._pane.style,n)}_getExactOverlayY(e,t,n){let i={top:null,bottom:null},r=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=s,"bottom"===e.overlayY?i.bottom=`${this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)}px`:i.top=fS(r.y),i}_getExactOverlayX(e,t,n){let i,r={left:null,right:null},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"right"==(i=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?r.right=`${this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)}px`:r.left=fS(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kP(e,n),isOriginOutsideView:OP(e,n),isOverlayClipped:kP(t,n),isOverlayOutsideView:OP(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(e=>{HP("originX",e.originX),BP("originY",e.originY),HP("overlayX",e.overlayX),BP("overlayY",e.overlayY)})}_addPanelClasses(e){this._pane&&pS(e).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Qt)return e.nativeElement.getBoundingClientRect();if(e instanceof HTMLElement)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function YP(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}class XP{constructor(e,t,n,i,r,s,o){this._preferredPositions=[],this._positionStrategy=new qP(n,i,r,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,i){const r=new zP(e,t,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const ZP="cdk-global-overlay-wrapper";class $P{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ZP),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===n.width?"0":this._leftOffset,e.marginTop="100%"===n.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,"100%"===n.width?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems="100%"===n.height?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(ZP),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}const KP=(()=>{class e{constructor(e,t,n,i){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=i}global(){return new $P}connectedTo(e,t,n){return new XP(t,n,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new qP(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(AP),Me(Sa),Me(rS),Me(GP))},token:e,providedIn:"root"}),e})();let JP=0;const QP=(()=>(class{constructor(e,t,n,i,r,s,o,a,l,c){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=c}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),i=this._createPortalOutlet(n),r=new FP(e);return r.direction=r.direction||this._directionality.value,new jP(i,t,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id=`cdk-overlay-${JP++}`,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ds)),new YM(e,this._componentFactoryResolver,this._appRef,this._injector)}}))(),eL=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],tL=new Ce("cdk-connected-overlay-scroll-strategy"),nL=(()=>(class{constructor(e){this.elementRef=e}}))(),iL=(()=>(class{constructor(e,t,n,i,r){this._overlay=e,this._dir=r,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=d.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new xr,this.positionChange=new xr,this.attach=new xr,this.detach=new xr,this.overlayKeydown=new xr,this._templatePortal=new WM(t,n),this._scrollStrategyFactory=i,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=uS(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=uS(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=uS(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=uS(e)}get push(){return this._push}set push(e){this._push=uS(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=eL),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe(e=>{this.overlayKeydown.next(e),27!==e.keyCode||NE(e)||(e.preventDefault(),this._detachOverlay())})}_buildConfig(){const e=this._position=this._createPositionStrategy(),t=new FP({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(t.width=this.width),(this.height||0===this.height)&&(t.height=this.height),(this.minWidth||0===this.minWidth)&&(t.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(t.minHeight=this.minHeight),this.backdropClass&&(t.backdropClass=this.backdropClass),this.panelClass&&(t.panelClass=this.panelClass),t}_updatePositionStrategy(e){const t=this.positions.map(e=>({originX:e.originX,originY:e.originY,overlayX:e.overlayX,overlayY:e.overlayY,offsetX:e.offsetX||this.offsetX,offsetY:e.offsetY||this.offsetY,panelClass:e.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(t).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e.positionChanges.subscribe(e=>this.positionChange.emit(e)),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe()}_detachOverlay(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}}))();function rL(e){return()=>e.scrollStrategies.reposition()}const sL=(()=>(class{}))();let oL=0;const aL=new Ce("mat-select-scroll-strategy");function lL(e){return()=>e.scrollStrategies.reposition()}class cL{constructor(e,t){this.source=e,this.value=t}}class hL{constructor(e,t,n,i,r){this._elementRef=e,this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}}const uL=dM(pM(hM(fM(hL)))),dL=(()=>(class extends uL{constructor(e,t,n,i,r,s,o,a,l,c,h,u,d){var p;super(r,i,o,a,c),this._viewportRuler=e,this._changeDetectorRef=t,this._ngZone=n,this._dir=s,this._parentFormField=l,this.ngControl=c,this._liveAnnouncer=d,this._panelOpen=!1,this._required=!1,this._scrollTop=0,this._multiple=!1,this._compareWith=((e,t)=>e===t),this._uid=`mat-select-${oL++}`,this._destroy=new M,this._triggerFontSize=0,this._onChange=(()=>{}),this._onTouched=(()=>{}),this._optionIds="",this._transformOrigin="top",this._panelDoneAnimatingStream=new M,this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}],this._disableOptionCentering=!1,this._focused=!1,this.controlType="mat-select",this.ariaLabel="",this.optionSelectionChanges=(p=(()=>{const e=this.options;return e?e.changes.pipe(MS(e),xP(()=>$(...e.map(e=>e.onSelectionChange)))):this._ngZone.onStable.asObservable().pipe(eS(1),xP(()=>this.optionSelectionChanges))}),new _(e=>{let t;try{t=p()}catch(n){return void e.error(n)}return(t?j(t):zl()).subscribe(e)})),this.openedChange=new xr,this._openedStream=this.openedChange.pipe(ZE(e=>e),B(()=>{})),this._closedStream=this.openedChange.pipe(ZE(e=>!e),B(()=>{})),this.selectionChange=new xr,this.valueChange=new xr,this.ngControl&&(this.ngControl.valueAccessor=this),this._scrollStrategyFactory=u,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}set focused(e){this._focused=e}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=uS(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){if(this._selectionModel)throw Error("Cannot change `multiple` mode of select after initialization.");this._multiple=uS(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=uS(e)}get compareWith(){return this._compareWith}set compareWith(e){if("function"!=typeof e)throw Error("`compareWith` must be a function.");this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){e!==this._value&&(this.writeValue(e),this._value=e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new mP(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(YS(),TS(this._destroy)).subscribe(()=>{this.panelOpen?(this._scrollTop=0,this.openedChange.emit(!0)):(this.openedChange.emit(!1),this.overlayDir.offsetX=0,this._changeDetectorRef.markForCheck())}),this._viewportRuler.change().pipe(TS(this._destroy)).subscribe(()=>{this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.onChange.pipe(TS(this._destroy)).subscribe(e=>{e.added.forEach(e=>e.select()),e.removed.forEach(e=>e.deselect())}),this.options.changes.pipe(MS(null),TS(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){!this.disabled&&this.options&&this.options.length&&!this._panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._calculateOverlayPosition(),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(eS(1)).subscribe(()=>{this._triggerFontSize&&this.overlayDir.overlayRef&&this.overlayDir.overlayRef.overlayElement&&(this.overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.options&&this._setSelectionByValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(e=>e.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const t=e.keyCode,n=t===LE||t===IE||t===AE||t===PE,i=this._keyManager;if((13===t||32===t)&&!NE(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){const n=this.selected;36===t||35===t?(36===t?i.setFirstItemActive():i.setLastItemActive(),e.preventDefault()):i.onKeydown(e);const r=this.selected;this._liveAnnouncer&&r&&n!==r&&this._liveAnnouncer.announce(r.viewValue,1e4)}}_handleOpenKeydown(e){const t=e.keyCode,n=t===LE||t===IE,i=this._keyManager;if(36===t||35===t)e.preventDefault(),36===t?i.setFirstItemActive():i.setLastItemActive();else if(n&&e.altKey)e.preventDefault(),this.close();else if(13!==t&&32!==t||!i.activeItem||NE(e))if(this._multiple&&t===kE&&e.ctrlKey){e.preventDefault();const t=this.options.some(e=>!e.disabled&&!e.selected);this.options.forEach(e=>{e.disabled||(t?e.select():e.deselect())})}else{const t=i.activeItemIndex;i.onKeydown(e),this._multiple&&n&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==t&&i.activeItem._selectViaInteraction()}else e.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this.overlayDir.positionChange.pipe(eS(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.multiple&&e){if(!Array.isArray(e))throw Error("Value must be an array in multiple-selection mode.");this._selectionModel.clear(),e.forEach(e=>this._selectValue(e)),this._sortValues()}else{this._selectionModel.clear();const t=this._selectValue(e);t?this._keyManager.setActiveItem(t):this.panelOpen||this._keyManager.setActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const t=this.options.find(t=>{try{return null!=t.value&&this._compareWith(t.value,e)}catch(n){return it()&&console.warn(n),!1}});return t&&this._selectionModel.select(t),t}_initKeyManager(){this._keyManager=new vS(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(TS(this._destroy)).subscribe(()=>{this.focus(),this.close()}),this._keyManager.change.pipe(TS(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollActiveOptionIntoView():this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=$(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(TS(e)).subscribe(e=>{this._onSelect(e.source,e.isUserInput),e.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),$(...this.options.map(e=>e._stateChanges)).pipe(TS(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()}),this._setOptionIds()}_onSelect(e,t){const n=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())):(e.deselect(),this._selectionModel.clear(),this._propagateChanges(e.value)),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((t,n)=>this.sortComparator?this.sortComparator(t,n,e):e.indexOf(t)-e.indexOf(n)),this.stateChanges.next()}}_propagateChanges(e){let t=null;t=this.multiple?this.selected.map(e=>e.value):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(new cL(this,t)),this._changeDetectorRef.markForCheck()}_setOptionIds(){this._optionIds=this.options.map(e=>e.id).join(" ")}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_scrollActiveOptionIntoView(){const e=this._keyManager.activeItemIndex||0,t=NM(e,this.options,this.optionGroups);this.panel.nativeElement.scrollTop=function(e,t,n,i){const r=e*t;return r<n?r:r+t>n+256?Math.max(0,r-256+t):n}(e+t,this._getItemHeight(),this.panel.nativeElement.scrollTop)}focus(e){this._elementRef.nativeElement.focus(e)}_getOptionIndex(e){return this.options.reduce((t,n,i)=>void 0===t?e===n?i:void 0:t,void 0)}_calculateOverlayPosition(){const e=this._getItemHeight(),t=this._getItemCount(),n=Math.min(t*e,256),i=t*e-n;let r=this.empty?0:this._getOptionIndex(this._selectionModel.selected[0]);r+=NM(r,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(r,s,i),this._offsetY=this._calculateOverlayOffsetY(r,s,i),this._checkOverlayWithinViewport(i)}_calculateOverlayScroll(e,t,n){const i=this._getItemHeight();return Math.min(Math.max(0,i*e-t+i/2),n)}_getAriaLabel(){return this.ariaLabelledby?null:this.ariaLabel||this.placeholder}_getAriaLabelledby(){return this.ariaLabelledby?this.ariaLabelledby:this._parentFormField&&this._parentFormField._hasFloatingLabel()&&!this._getAriaLabel()&&this._parentFormField._labelId||null}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_calculateOverlayOffsetX(){const e=this.overlayDir.overlayRef.overlayElement.getBoundingClientRect(),t=this._viewportRuler.getViewportSize(),n=this._isRtl(),i=this.multiple?56:32;let r;if(this.multiple)r=40;else{let e=this._selectionModel.selected[0]||this.options.first;r=e&&e.group?32:16}n||(r*=-1);const s=0-(e.left+r-(n?i:0)),o=e.right+r-t.width+(n?0:i);s>0?r+=s+8:o>0&&(r-=o+8),this.overlayDir.offsetX=Math.round(r),this.overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,t,n){const i=this._getItemHeight(),r=(i-this._triggerRect.height)/2,s=Math.floor(256/i);let o;return this._disableOptionCentering?0:(o=0===this._scrollTop?e*i:this._scrollTop===n?(e-(this._getItemCount()-s))*i+(i-(this._getItemCount()*i-256)%i):t-i/2,Math.round(-1*o-r))}_checkOverlayWithinViewport(e){const t=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),i=this._triggerRect.top-8,r=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*t,256)-s-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):s>i?this._adjustPanelDown(s,i,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,t){const n=Math.round(e-t);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,t,n){const i=Math.round(e-t);if(this._scrollTop+=i,this._offsetY+=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_getOriginBasedOnOption(){const e=this._getItemHeight(),t=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-t+e/2}px 0px`}_getItemCount(){return this.options.length+this.optionGroups.length}_getItemHeight(){return 3*this._triggerFontSize}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty}}))(),pL=(()=>(class{}))();var fL=qn({encapsulation:2,styles:[".mat-select{display:inline-block;width:100%;outline:0}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform .4s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px}@media (-ms-high-contrast:active){.mat-select-panel{outline:solid 1px}}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}"],data:{animation:[{type:7,name:"transformPanelWrap",definitions:[{type:1,expr:"* => void",animation:{type:11,selector:"@transformPanel",animation:[{type:9,options:null}],options:{optional:!0}},options:null}],options:{}},{type:7,name:"transformPanel",definitions:[{type:0,name:"void",styles:{type:6,styles:{transform:"scaleY(0.8)",minWidth:"100%",opacity:0},offset:null},options:void 0},{type:0,name:"showing",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:0,name:"showing-multiple",styles:{type:6,styles:{opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"},offset:null},options:void 0},{type:1,expr:"void => *",animation:{type:4,styles:null,timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}}]}});function mL(e){return Gs(0,[(e()(),As(0,0,null,null,1,"span",[["class","mat-select-placeholder"]],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.placeholder||"\xa0")})}function gL(e){return Gs(0,[(e()(),As(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Bs(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.triggerValue||"\xa0")})}function vL(e){return Gs(0,[zs(null,0),(e()(),Cs(0,null,null,0))],null,null)}function yL(e){return Gs(0,[(e()(),As(0,0,null,null,5,"span",[["class","mat-select-value-text"]],null,null,null,null,null)),rr(1,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Cs(16777216,null,null,1,null,gL)),rr(3,16384,null,0,xa,[An,Tn,_a],null,null),(e()(),Cs(16777216,null,null,1,null,vL)),rr(5,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,t){e(t,1,0,!!t.component.customTrigger),e(t,5,0,!0)},null)}function _L(e){return Gs(0,[(e()(),As(0,0,null,null,4,"div",[["class","mat-select-panel-wrap"]],[[24,"@transformPanelWrap",0]],null,null,null,null)),(e()(),As(1,0,[[2,0],["panel",1]],null,3,"div",[],[[24,"@transformPanel",0],[4,"transformOrigin",null],[4,"font-size","px"]],[[null,"@transformPanel.done"],[null,"keydown"]],function(e,t,n){var i=!0,r=e.component;return"@transformPanel.done"===t&&(i=!1!==r._panelDoneAnimatingStream.next(n.toState)&&i),"keydown"===t&&(i=!1!==r._handleKeydown(n)&&i),i},null,null)),sr(512,null,la,ca,[_n,bn,Qt,sn]),rr(3,278528,null,0,ua,[la],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),zs(null,1)],function(e,t){var n=t.component;e(t,3,0,_i(1,"mat-select-panel ",n._getPanelTheme(),""),n.panelClass)},function(e,t){var n=t.component;e(t,0,0,void 0),e(t,1,0,n.multiple?"showing-multiple":"showing",n._transformOrigin,n._triggerFontSize)})}function bL(e){return Gs(2,[Os(671088640,1,{trigger:0}),Os(671088640,2,{panel:0}),Os(671088640,3,{overlayDir:0}),(e()(),As(3,0,[[1,0],["trigger",1]],null,9,"div",[["aria-hidden","true"],["cdk-overlay-origin",""],["class","mat-select-trigger"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.toggle()&&i),i},null,null)),rr(4,16384,[["origin",4]],0,nL,[Qt],null,null),(e()(),As(5,0,null,null,5,"div",[["class","mat-select-value"]],null,null,null,null,null)),rr(6,16384,null,0,_a,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Cs(16777216,null,null,1,null,mL)),rr(8,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Cs(16777216,null,null,1,null,yL)),rr(10,278528,null,0,ba,[An,Tn,_a],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),As(11,0,null,null,1,"div",[["class","mat-select-arrow-wrapper"]],null,null,null,null,null)),(e()(),As(12,0,null,null,0,"div",[["class","mat-select-arrow"]],null,null,null,null,null)),(e()(),Cs(16777216,null,null,1,function(e,t,n){var i=!0,r=e.component;return"backdropClick"===t&&(i=!1!==r.close()&&i),"attach"===t&&(i=!1!==r._onAttached()&&i),"detach"===t&&(i=!1!==r.close()&&i),i},_L)),rr(14,671744,[[3,4]],0,iL,[QP,Tn,An,tL,[2,BM]],{origin:[0,"origin"],positions:[1,"positions"],offsetY:[2,"offsetY"],minWidth:[3,"minWidth"],backdropClass:[4,"backdropClass"],scrollStrategy:[5,"scrollStrategy"],open:[6,"open"],hasBackdrop:[7,"hasBackdrop"],lockPosition:[8,"lockPosition"]},{backdropClick:"backdropClick",attach:"attach",detach:"detach"})],function(e,t){var n=t.component;e(t,6,0,n.empty),e(t,8,0,!0),e(t,10,0,!1),e(t,14,0,Wi(t,4),n._positions,n._offsetY,null==n._triggerRect?null:n._triggerRect.width,"cdk-overlay-transparent-backdrop",n._scrollStrategy,n.panelOpen,"","")},null)}var xL=qn({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}@media (-ms-high-contrast:active){.mat-option{margin:0 1px}.mat-option.mat-active{border:solid 1px currentColor;margin:0}}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media (-ms-high-contrast:active){.mat-option .mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}});function wL(e){return Gs(0,[(e()(),As(0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null],[2,"_mat-animation-noopable",null]],null,null,ML,SL)),rr(1,49152,null,0,TM,[[2,wI]],{state:[0,"state"],disabled:[1,"disabled"]},null)],function(e,t){var n=t.component;e(t,1,0,n.selected?"checked":"",n.disabled)},function(e,t){e(t,0,0,"indeterminate"===Wi(t,1).state,"checked"===Wi(t,1).state,Wi(t,1).disabled,"NoopAnimations"===Wi(t,1)._animationMode)})}function EL(e){return Gs(2,[(e()(),Cs(16777216,null,null,1,null,wL)),rr(1,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null),(e()(),As(2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),zs(null,0),(e()(),As(4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),rr(5,212992,null,0,SM,[Qt,Yr,rS,[2,EM],[2,wI]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],function(e,t){var n=t.component;e(t,1,0,n.multiple),e(t,5,0,n.disabled||n.disableRipple,n._getHostElement())},function(e,t){e(t,4,0,Wi(t,5).unbounded)})}var SL=qn({encapsulation:2,styles:[".mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}"],data:{}});function ML(e){return Gs(2,[],null,null)}var TL=qn({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function CL(e){return Gs(2,[Os(671088640,1,{ripple:0}),(e()(),As(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),zs(null,0),(e()(),As(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),rr(4,212992,[[1,4]],0,SM,[Qt,Yr,rS,[2,EM],[2,wI]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(e()(),As(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())},function(e,t){var n=t.component;e(t,3,0,n.isRoundButton||n.isIconButton,Wi(t,4).unbounded)})}const AL=hS({passive:!0}),IL=(()=>{class e{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Fl;const t=mS(e),n=this._monitoredElements.get(t);if(n)return n.subject.asObservable();const i=new M,r="cdk-text-field-autofilled",s=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(r)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(r)&&(t.classList.remove(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!1}))):(t.classList.add(r),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",s,AL),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:i,unlisten:()=>{t.removeEventListener("animationstart",s,AL)}}),i.asObservable()}stopMonitoring(e){const t=mS(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}return e.ngInjectableDef=pe({factory:function(){return new e(Me(rS),Me(Yr))},token:e,providedIn:"root"}),e})(),PL=(()=>(class{}))(),LL=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let RL=0;class OL{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}}const kL=fM(OL),DL=(()=>(class extends kL{constructor(e,t,n,i,r,s,o,a,l){super(s,i,r,n),this._elementRef=e,this._platform=t,this.ngControl=n,this._autofillMonitor=a,this._uid=`mat-input-${RL++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new M,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>lS().has(e));const c=this._elementRef.nativeElement;this._inputValueAccessor=o||c,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&l.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{let t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===c.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=c.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=uS(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=uS(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&lS().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=uS(e)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){if(LL.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focused||this.focus()}}))(),NL=(()=>(class{}))();var FL=qn({encapsulation:0,styles:[[".content[_ngcontent-%COMP%]{height:100%;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:60px 250px auto}.header[_ngcontent-%COMP%]{height:100%;width:100%;background:#a4c9a4;color:#ff0;justify-content:center;display:flex;align-items:center;font-size:30px}.notice-icon[_ngcontent-%COMP%]{font-size:30px}.mainPng[_ngcontent-%COMP%]{height:100%;align-self:center;justify-self:center}.mainStepper[_ngcontent-%COMP%]{width:80%;align-self:center;justify-self:center}.step-content[_ngcontent-%COMP%]{width:100%;justify-self:start;align-self:center;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:200px auto}.step-result-content[_ngcontent-%COMP%]{width:100%;justify-self:start;align-self:center;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:100px auto;justify-content:center}.input-area[_ngcontent-%COMP%]{width:100%;align-self:center}.size-select[_ngcontent-%COMP%]{width:100%}.tip-png[_ngcontent-%COMP%]{max-height:240px;justify-self:center}.containerRef[_ngcontent-%COMP%]{grid-column:1/3;max-width:100%}.refImg[_ngcontent-%COMP%]{max-width:100%}.result-table[_ngcontent-%COMP%]{grid-column:1/3;align-self:center;justify-self:center;width:60%}.result-btn-group[_ngcontent-%COMP%]{grid-column:1/3;align-self:center;justify-self:center}.result-btn[_ngcontent-%COMP%]{width:200px}.result-display[_ngcontent-%COMP%]{grid-column:1/3;width:100%;max-width:100%;display:flex;flex-direction:column;align-items:center}.display-container[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:20px;position:relative}#geo-display[_ngcontent-%COMP%]{width:100%;height:500px}#plane-display[_ngcontent-%COMP%]{width:100%}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:500px;background:#f4f7f4;display:flex;justify-items:center;justify-content:center;z-index:999}"]],data:{}});function zL(e){return Gs(0,[(e()(),Bs(-1,null,["\u96c6\u88c5\u7bb1\u9009\u62e9"]))],null,null)}function VL(e){return Gs(0,[(e()(),Bs(-1,null,["\u6258\u76d8\u9009\u62e9"]))],null,null)}function BL(e){return Gs(0,[(e()(),Bs(-1,null,["\u8d27\u7269\u5c3a\u5bf8\u8bbe\u7f6e"]))],null,null)}function HL(e){return Gs(0,[(e()(),Bs(-1,null,["\u88c5\u7bb1\u7ed3\u679c"]))],null,null)}function UL(e){return Gs(0,[(e()(),As(0,0,null,null,1,"div",[["class","loading-spinner"]],null,null,null,null,null)),(e()(),As(1,0,null,null,0,"img",[["src","assets/loadding.gif"]],null,null,null,null,null))],null,null)}function GL(e){return Gs(0,[(e()(),As(0,0,null,null,8,"div",[["class","result-display"],["id","result"]],null,null,null,null,null)),(e()(),As(1,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Bs(-1,null,["\u6258\u76d8\u6446\u653e\u8d27\u7269\u56fe\u793a"])),(e()(),As(3,0,null,null,5,"div",[["class","display-container"]],null,null,null,null,null)),(e()(),As(4,0,null,null,0,"div",[["id","geo-display"]],null,null,null,null,null)),(e()(),As(5,0,null,null,1,"canvas",[["id","plane-display"]],null,null,null,null,null)),(e()(),Bs(-1,null,[" \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 HTML5 canvas \u6807\u7b7e\u3002 "])),(e()(),Cs(16777216,null,null,1,null,UL)),rr(8,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,8,0,t.component.isLoadingLayout)},null)}function jL(e){return Gs(0,[(e()(),As(0,0,null,null,249,"div",[["class","content"]],null,null,null,null,null)),(e()(),As(1,0,null,null,3,"div",[["class","header"]],null,null,null,null,null)),(e()(),As(2,0,null,null,1,"i",[["class","material-icons notice-icon"]],null,null,null,null,null)),(e()(),Bs(-1,null,["notifications_none"])),(e()(),Bs(-1,null,[" \u4ec5\u4f9b\u3010Joanna@TianPeng\u3011\u5185\u90e8\u4f7f\u7528 "])),(e()(),As(5,0,null,null,0,"img",[["class","mainPng"],["src","assets/packer.png"]],null,null,null,null,null)),(e()(),As(6,0,null,null,243,"div",[["class","mainStepper"]],null,null,null,null,null)),(e()(),As(7,0,null,null,242,"mat-horizontal-stepper",[["aria-orientation","horizontal"],["class","mat-stepper-horizontal"],["labelPosition","bottom"],["linear",""],["role","tablist"]],[[2,"mat-stepper-label-position-end",null],[2,"mat-stepper-label-position-bottom",null]],[[null,"selectionChange"]],function(e,t,n){var i=!0;return"selectionChange"===t&&(i=!1!==e.component.onSelectChange(n)&&i),i},LI,CI)),rr(8,5423104,[["stepper",4]],2,nM,[[2,BM],xn,Qt,Sa],{linear:[0,"linear"],labelPosition:[1,"labelPosition"]},{selectionChange:"selectionChange"}),Os(603979776,1,{_steps:1}),Os(603979776,2,{_icons:1}),sr(2048,null,tM,null,[nM]),sr(2048,null,kS,null,[nM]),(e()(),As(13,0,null,null,60,"mat-step",[["errorMessage","\u5fc5\u987b\u9009\u62e9\u5c3a\u5bf8"]],null,null,null,TI,SI)),rr(14,573440,[[1,4]],1,eM,[tM,[1,gM],[2,RS]],{stepControl:[0,"stepControl"],errorMessage:[1,"errorMessage"]},null),Os(603979776,3,{stepLabel:0}),sr(2048,null,gM,null,[eM]),(e()(),As(17,0,null,0,56,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==Wi(e,19).onSubmit(n)&&i),"reset"===t&&(i=!1!==Wi(e,19).onReset()&&i),i},null,null)),rr(18,16384,null,0,zc,[],null,null),rr(19,540672,null,0,Bc,[[8,null],[8,null]],{form:[0,"form"]},null),sr(2048,null,ql,null,[Bc]),rr(21,16384,null,0,Kl,[[4,ql]],null,null),(e()(),Cs(0,null,null,1,null,zL)),rr(23,16384,[[3,4]],0,$S,[Tn],null,null),(e()(),As(24,0,null,null,49,"div",[["class","step-content"]],null,null,null,null,null)),(e()(),As(25,0,null,null,43,"div",[["class","input-area"]],null,null,null,null,null)),(e()(),As(26,0,null,null,37,"mat-form-field",[["class","size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,fP,nP)),rr(27,7520256,null,9,$I,[Qt,xn,[2,zM],[2,BM],[2,ZI],rS,Yr,[2,wI]],null,null),Os(603979776,4,{_controlNonStatic:0}),Os(335544320,5,{_controlStatic:0}),Os(603979776,6,{_labelChildNonStatic:0}),Os(335544320,7,{_labelChildStatic:0}),Os(603979776,8,{_placeholderChild:0}),Os(603979776,9,{_errorChildren:1}),Os(603979776,10,{_hintChildren:1}),Os(603979776,11,{_prefixChildren:1}),Os(603979776,12,{_suffixChildren:1}),(e()(),As(37,0,null,3,2,"mat-label",[],null,null,null,null,null)),rr(38,16384,[[6,4],[7,4]],0,WI,[],null,null),(e()(),Bs(-1,null,["\u8bf7\u9009\u62e9\u96c6\u88c5\u7bb1\u5c3a\u5bf8"])),(e()(),As(40,0,null,1,23,"mat-select",[["class","mat-select"],["disableRipple",""],["formControlName","firstCtrl"],["required",""],["role","listbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"valueChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0,r=e.component;return"keydown"===t&&(i=!1!==Wi(e,46)._handleKeydown(n)&&i),"focus"===t&&(i=!1!==Wi(e,46)._onFocus()&&i),"blur"===t&&(i=!1!==Wi(e,46)._onBlur()&&i),"valueChange"===t&&(i=!1!==(r.containerIndex=n)&&i),i},bL,fL)),rr(41,16384,null,0,Wc,[],{required:[0,"required"]},null),sr(1024,null,Ql,function(e){return[e]},[Wc]),rr(43,671744,null,0,jc,[[3,ql],[6,Ql],[8,null],[8,null],[2,Vc]],{name:[0,"name"]},null),sr(2048,null,Xl,null,[jc]),rr(45,16384,null,0,$l,[[4,Xl]],null,null),rr(46,2080768,null,3,dL,[AP,xn,Yr,gM,Qt,[2,BM],[2,Dc],[2,Bc],[2,$I],[6,Xl],[8,null],aL,xS],{disableRipple:[0,"disableRipple"],required:[1,"required"],value:[2,"value"]},{valueChange:"valueChange"}),Os(603979776,13,{options:1}),Os(603979776,14,{optionGroups:1}),Os(603979776,15,{customTrigger:0}),sr(2048,[[4,4],[5,4]],GI,null,[dL]),sr(2048,null,kM,null,[dL]),(e()(),As(52,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","1"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,53)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,53)._handleKeydown(n)&&i),i},EL,xL)),rr(53,8568832,[[13,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["20GP"])),(e()(),As(55,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","2"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,56)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,56)._handleKeydown(n)&&i),i},EL,xL)),rr(56,8568832,[[13,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["40GP"])),(e()(),As(58,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","3"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,59)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,59)._handleKeydown(n)&&i),i},EL,xL)),rr(59,8568832,[[13,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["40HC/HQ"])),(e()(),As(61,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","4"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,62)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,62)._handleKeydown(n)&&i),i},EL,xL)),rr(62,8568832,[[13,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["45HC/HQ"])),(e()(),As(64,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),As(65,0,null,null,3,"button",[["color","primary"],["mat-stroked-button",""],["matStepperNext",""]],[[8,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,66)._handleClick()&&i),i},CL,TL)),rr(66,16384,null,0,iM,[kS],null,null),rr(67,180224,null,0,JM,[Qt,SS,[2,wI]],{color:[0,"color"]},null),(e()(),Bs(-1,0,["\u4e0b\u4e00\u6b65"])),(e()(),As(69,0,null,null,0,"img",[["class","tip-png"],["src","assets/box.jpg"]],null,null,null,null,null)),(e()(),As(70,0,null,null,3,"div",[["class","containerRef"]],null,null,null,null,null)),(e()(),As(71,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),Bs(-1,null,["\u96c6\u88c5\u7bb1\u89c4\u683c\u53c2\u8003"])),(e()(),As(73,0,null,null,0,"img",[["class","refImg"],["src","assets/container.PNG"]],null,null,null,null,null)),(e()(),As(74,0,null,null,57,"mat-step",[["errorMessage","\u5fc5\u987b\u9009\u62e9\u5c3a\u5bf8"]],null,null,null,TI,SI)),rr(75,573440,[[1,4]],1,eM,[tM,[1,gM],[2,RS]],{stepControl:[0,"stepControl"],errorMessage:[1,"errorMessage"]},null),Os(603979776,16,{stepLabel:0}),sr(2048,null,gM,null,[eM]),(e()(),As(78,0,null,0,53,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==Wi(e,80).onSubmit(n)&&i),"reset"===t&&(i=!1!==Wi(e,80).onReset()&&i),i},null,null)),rr(79,16384,null,0,zc,[],null,null),rr(80,540672,null,0,Bc,[[8,null],[8,null]],{form:[0,"form"]},null),sr(2048,null,ql,null,[Bc]),rr(82,16384,null,0,Kl,[[4,ql]],null,null),(e()(),Cs(0,null,null,1,null,VL)),rr(84,16384,[[16,4]],0,$S,[Tn],null,null),(e()(),As(85,0,null,null,46,"div",[["class","step-content"]],null,null,null,null,null)),(e()(),As(86,0,null,null,44,"div",[["class","input-area"]],null,null,null,null,null)),(e()(),As(87,0,null,null,34,"mat-form-field",[["class","size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,fP,nP)),rr(88,7520256,null,9,$I,[Qt,xn,[2,zM],[2,BM],[2,ZI],rS,Yr,[2,wI]],null,null),Os(603979776,17,{_controlNonStatic:0}),Os(335544320,18,{_controlStatic:0}),Os(603979776,19,{_labelChildNonStatic:0}),Os(335544320,20,{_labelChildStatic:0}),Os(603979776,21,{_placeholderChild:0}),Os(603979776,22,{_errorChildren:1}),Os(603979776,23,{_hintChildren:1}),Os(603979776,24,{_prefixChildren:1}),Os(603979776,25,{_suffixChildren:1}),(e()(),As(98,0,null,3,2,"mat-label",[],null,null,null,null,null)),rr(99,16384,[[19,4],[20,4]],0,WI,[],null,null),(e()(),Bs(-1,null,["\u8bf7\u9009\u62e9\u6258\u76d8\u5c3a\u5bf8"])),(e()(),As(101,0,null,1,20,"mat-select",[["class","mat-select"],["disableRipple",""],["formControlName","secondCtrl"],["required",""],["role","listbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"valueChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(e,t,n){var i=!0,r=e.component;return"keydown"===t&&(i=!1!==Wi(e,107)._handleKeydown(n)&&i),"focus"===t&&(i=!1!==Wi(e,107)._onFocus()&&i),"blur"===t&&(i=!1!==Wi(e,107)._onBlur()&&i),"valueChange"===t&&(i=!1!==(r.trayIndex=n)&&i),i},bL,fL)),rr(102,16384,null,0,Wc,[],{required:[0,"required"]},null),sr(1024,null,Ql,function(e){return[e]},[Wc]),rr(104,671744,null,0,jc,[[3,ql],[6,Ql],[8,null],[8,null],[2,Vc]],{name:[0,"name"]},null),sr(2048,null,Xl,null,[jc]),rr(106,16384,null,0,$l,[[4,Xl]],null,null),rr(107,2080768,null,3,dL,[AP,xn,Yr,gM,Qt,[2,BM],[2,Dc],[2,Bc],[2,$I],[6,Xl],[8,null],aL,xS],{disableRipple:[0,"disableRipple"],required:[1,"required"],value:[2,"value"]},{valueChange:"valueChange"}),Os(603979776,26,{options:1}),Os(603979776,27,{optionGroups:1}),Os(603979776,28,{customTrigger:0}),sr(2048,[[17,4],[18,4]],GI,null,[dL]),sr(2048,null,kM,null,[dL]),(e()(),As(113,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","1"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,114)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,114)._handleKeydown(n)&&i),i},EL,xL)),rr(114,8568832,[[26,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["1200mm\xd71000mm \u6258\u76d8"])),(e()(),As(116,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","2"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,117)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,117)._handleKeydown(n)&&i),i},EL,xL)),rr(117,8568832,[[26,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["1200mm\xd7800mm \u6258\u76d8"])),(e()(),As(119,0,null,1,2,"mat-option",[["class","mat-option"],["role","option"],["value","3"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,120)._selectViaInteraction()&&i),"keydown"===t&&(i=!1!==Wi(e,120)._handleKeydown(n)&&i),i},EL,xL)),rr(120,8568832,[[26,4]],0,DM,[Qt,xn,[2,kM],[2,LM]],{value:[0,"value"]},null),(e()(),Bs(-1,0,["1000mm\xd7800mm \u6258\u76d8"])),(e()(),As(122,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),As(123,0,null,null,3,"button",[["mat-stroked-button",""],["matStepperPrevious",""]],[[8,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,124)._handleClick()&&i),i},CL,TL)),rr(124,16384,null,0,rM,[kS],null,null),rr(125,180224,null,0,JM,[Qt,SS,[2,wI]],null,null),(e()(),Bs(-1,0,["\u4e0a\u4e00\u6b65"])),(e()(),As(127,0,null,null,3,"button",[["color","primary"],["mat-stroked-button",""],["matStepperNext",""]],[[8,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,128)._handleClick()&&i),i},CL,TL)),rr(128,16384,null,0,iM,[kS],null,null),rr(129,180224,null,0,JM,[Qt,SS,[2,wI]],{color:[0,"color"]},null),(e()(),Bs(-1,0,["\u4e0b\u4e00\u6b65"])),(e()(),As(131,0,null,null,0,"img",[["class","tip-png"],["src","assets/pan.jpg"]],null,null,null,null,null)),(e()(),As(132,0,null,null,82,"mat-step",[["errorMessage","\u5c3a\u5bf8\u4e0d\u5f97\u5c0f\u4e8e80mm"]],null,null,null,TI,SI)),rr(133,573440,[[1,4]],1,eM,[tM,[1,gM],[2,RS]],{stepControl:[0,"stepControl"],errorMessage:[1,"errorMessage"]},null),Os(603979776,29,{stepLabel:0}),sr(2048,null,gM,null,[eM]),(e()(),As(136,0,null,0,78,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var i=!0;return"submit"===t&&(i=!1!==Wi(e,138).onSubmit(n)&&i),"reset"===t&&(i=!1!==Wi(e,138).onReset()&&i),i},null,null)),rr(137,16384,null,0,zc,[],null,null),rr(138,540672,null,0,Bc,[[8,null],[8,null]],{form:[0,"form"]},null),sr(2048,null,ql,null,[Bc]),rr(140,16384,null,0,Kl,[[4,ql]],null,null),(e()(),Cs(0,null,null,1,null,BL)),rr(142,16384,[[29,4]],0,$S,[Tn],null,null),(e()(),As(143,0,null,null,71,"div",[["class","step-content"]],null,null,null,null,null)),(e()(),As(144,0,null,null,69,"div",[["class","input-area"]],null,null,null,null,null)),(e()(),As(145,0,null,null,19,"mat-form-field",[["class","size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,fP,nP)),rr(146,7520256,null,9,$I,[Qt,xn,[2,zM],[2,BM],[2,ZI],rS,Yr,[2,wI]],null,null),Os(603979776,30,{_controlNonStatic:0}),Os(335544320,31,{_controlStatic:0}),Os(603979776,32,{_labelChildNonStatic:0}),Os(335544320,33,{_labelChildStatic:0}),Os(603979776,34,{_placeholderChild:0}),Os(603979776,35,{_errorChildren:1}),Os(603979776,36,{_hintChildren:1}),Os(603979776,37,{_prefixChildren:1}),Os(603979776,38,{_suffixChildren:1}),(e()(),As(156,0,null,1,8,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","thridCtrl1"],["matInput",""],["min","80"],["placeholder","\u8bbe\u7f6e\u8d27\u7269\u957f\u5ea6/mm"],["title","\u5c3a\u5bf8\u4e0d\u5f97\u5c0f\u4e8e80mm"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"focus"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==Wi(e,157)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,157).onTouched()&&i),"compositionstart"===t&&(i=!1!==Wi(e,157)._compositionStart()&&i),"compositionend"===t&&(i=!1!==Wi(e,157)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==Wi(e,158).onChange(n.target.value)&&i),"input"===t&&(i=!1!==Wi(e,158).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,158).onTouched()&&i),"blur"===t&&(i=!1!==Wi(e,163)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==Wi(e,163)._focusChanged(!0)&&i),"input"===t&&(i=!1!==Wi(e,163)._onInput()&&i),"ngModelChange"===t&&(i=!1!==(r.packageLength=n)&&i),i},null,null)),rr(157,16384,null,0,jl,[sn,Qt,[2,Gl]],null,null),rr(158,16384,null,0,ac,[sn,Qt],null,null),sr(1024,null,Hl,function(e,t){return[e,t]},[jl,ac]),rr(160,671744,null,0,jc,[[3,ql],[8,null],[8,null],[6,Hl],[2,Vc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),sr(2048,null,Xl,null,[jc]),rr(162,16384,null,0,$l,[[4,Xl]],null,null),rr(163,999424,null,0,DL,[Qt,rS,[6,Xl],[2,Dc],[2,Bc],gM,[8,null],IL,Yr],{placeholder:[0,"placeholder"],type:[1,"type"]},null),sr(2048,[[30,4],[31,4]],GI,null,[DL]),(e()(),As(165,0,null,null,19,"mat-form-field",[["class","size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,fP,nP)),rr(166,7520256,null,9,$I,[Qt,xn,[2,zM],[2,BM],[2,ZI],rS,Yr,[2,wI]],null,null),Os(603979776,39,{_controlNonStatic:0}),Os(335544320,40,{_controlStatic:0}),Os(603979776,41,{_labelChildNonStatic:0}),Os(335544320,42,{_labelChildStatic:0}),Os(603979776,43,{_placeholderChild:0}),Os(603979776,44,{_errorChildren:1}),Os(603979776,45,{_hintChildren:1}),Os(603979776,46,{_prefixChildren:1}),Os(603979776,47,{_suffixChildren:1}),(e()(),As(176,0,null,1,8,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","thridCtrl2"],["matInput",""],["min","80"],["placeholder","\u8bbe\u7f6e\u8d27\u7269\u5bbd\u5ea6/mm"],["title","\u5c3a\u5bf8\u4e0d\u5f97\u5c0f\u4e8e80mm"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"focus"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==Wi(e,177)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,177).onTouched()&&i),"compositionstart"===t&&(i=!1!==Wi(e,177)._compositionStart()&&i),"compositionend"===t&&(i=!1!==Wi(e,177)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==Wi(e,178).onChange(n.target.value)&&i),"input"===t&&(i=!1!==Wi(e,178).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,178).onTouched()&&i),"blur"===t&&(i=!1!==Wi(e,183)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==Wi(e,183)._focusChanged(!0)&&i),"input"===t&&(i=!1!==Wi(e,183)._onInput()&&i),"ngModelChange"===t&&(i=!1!==(r.packageWidth=n)&&i),i},null,null)),rr(177,16384,null,0,jl,[sn,Qt,[2,Gl]],null,null),rr(178,16384,null,0,ac,[sn,Qt],null,null),sr(1024,null,Hl,function(e,t){return[e,t]},[jl,ac]),rr(180,671744,null,0,jc,[[3,ql],[8,null],[8,null],[6,Hl],[2,Vc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),sr(2048,null,Xl,null,[jc]),rr(182,16384,null,0,$l,[[4,Xl]],null,null),rr(183,999424,null,0,DL,[Qt,rS,[6,Xl],[2,Dc],[2,Bc],gM,[8,null],IL,Yr],{placeholder:[0,"placeholder"],type:[1,"type"]},null),sr(2048,[[39,4],[40,4]],GI,null,[DL]),(e()(),As(185,0,null,null,19,"mat-form-field",[["class","size-select mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,fP,nP)),rr(186,7520256,null,9,$I,[Qt,xn,[2,zM],[2,BM],[2,ZI],rS,Yr,[2,wI]],null,null),Os(603979776,48,{_controlNonStatic:0}),Os(335544320,49,{_controlStatic:0}),Os(603979776,50,{_labelChildNonStatic:0}),Os(335544320,51,{_labelChildStatic:0}),Os(603979776,52,{_placeholderChild:0}),Os(603979776,53,{_errorChildren:1}),Os(603979776,54,{_hintChildren:1}),Os(603979776,55,{_prefixChildren:1}),Os(603979776,56,{_suffixChildren:1}),(e()(),As(196,0,null,1,8,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","thridCtrl3"],["matInput",""],["min","80"],["placeholder","\u8bbe\u7f6e\u8d27\u7269\u9ad8\u5ea6/mm"],["title","\u5c3a\u5bf8\u4e0d\u5f97\u5c0f\u4e8e80mm"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"focus"]],function(e,t,n){var i=!0,r=e.component;return"input"===t&&(i=!1!==Wi(e,197)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,197).onTouched()&&i),"compositionstart"===t&&(i=!1!==Wi(e,197)._compositionStart()&&i),"compositionend"===t&&(i=!1!==Wi(e,197)._compositionEnd(n.target.value)&&i),"change"===t&&(i=!1!==Wi(e,198).onChange(n.target.value)&&i),"input"===t&&(i=!1!==Wi(e,198).onChange(n.target.value)&&i),"blur"===t&&(i=!1!==Wi(e,198).onTouched()&&i),"blur"===t&&(i=!1!==Wi(e,203)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==Wi(e,203)._focusChanged(!0)&&i),"input"===t&&(i=!1!==Wi(e,203)._onInput()&&i),"ngModelChange"===t&&(i=!1!==(r.packageHeight=n)&&i),i},null,null)),rr(197,16384,null,0,jl,[sn,Qt,[2,Gl]],null,null),rr(198,16384,null,0,ac,[sn,Qt],null,null),sr(1024,null,Hl,function(e,t){return[e,t]},[jl,ac]),rr(200,671744,null,0,jc,[[3,ql],[8,null],[8,null],[6,Hl],[2,Vc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),sr(2048,null,Xl,null,[jc]),rr(202,16384,null,0,$l,[[4,Xl]],null,null),rr(203,999424,null,0,DL,[Qt,rS,[6,Xl],[2,Dc],[2,Bc],gM,[8,null],IL,Yr],{placeholder:[0,"placeholder"],type:[1,"type"]},null),sr(2048,[[48,4],[49,4]],GI,null,[DL]),(e()(),As(205,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),As(206,0,null,null,3,"button",[["mat-stroked-button",""],["matStepperPrevious",""]],[[8,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,207)._handleClick()&&i),i},CL,TL)),rr(207,16384,null,0,rM,[kS],null,null),rr(208,180224,null,0,JM,[Qt,SS,[2,wI]],null,null),(e()(),Bs(-1,0,["\u4e0a\u4e00\u6b65"])),(e()(),As(210,0,null,null,3,"button",[["color","primary"],["mat-stroked-button",""],["matStepperNext",""]],[[8,"type",0],[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,211)._handleClick()&&i),i},CL,TL)),rr(211,16384,null,0,iM,[kS],null,null),rr(212,180224,null,0,JM,[Qt,SS,[2,wI]],{color:[0,"color"]},null),(e()(),Bs(-1,0,["\u4e0b\u4e00\u6b65"])),(e()(),As(214,0,null,null,0,"img",[["class","tip-png"],["src","assets/huo1.png"]],null,null,null,null,null)),(e()(),As(215,0,null,null,34,"mat-step",[],null,null,null,TI,SI)),sr(6144,null,gM,null,[eM]),rr(217,573440,[[1,4]],1,eM,[tM,[1,gM],[2,RS]],null,null),Os(603979776,57,{stepLabel:0}),(e()(),Cs(0,null,0,1,null,HL)),rr(220,16384,[[57,4]],0,$S,[Tn],null,null),(e()(),As(221,0,null,0,28,"div",[["class","step-result-content"]],null,null,null,null,null)),(e()(),As(222,0,null,null,18,"table",[["border","1"],["class","result-table"]],null,null,null,null,null)),(e()(),As(223,0,null,null,5,"tr",[],null,null,null,null,null)),(e()(),As(224,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),As(225,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),Bs(-1,null,["\u96c6\u88c5\u7bb1\u53ef\u6446\u6258\u76d8\u6570\u76ee:"])),(e()(),As(227,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),Bs(228,null,[""," \u4e2a"])),(e()(),As(229,0,null,null,5,"tr",[],null,null,null,null,null)),(e()(),As(230,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),As(231,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),Bs(-1,null,["\u6258\u76d8\u53ef\u653e\u8d27\u7269\u6570\u76ee\uff1a"])),(e()(),As(233,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),Bs(234,null,[""," \u5c42 * "," \u4ef6 = "," \u4ef6"])),(e()(),As(235,0,null,null,5,"tr",[],null,null,null,null,null)),(e()(),As(236,0,null,null,2,"td",[],null,null,null,null,null)),(e()(),As(237,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),Bs(-1,null,["\u96c6\u88c5\u7bb1\u53ef\u88c5\u8d27\u7269\u6570\u76ee\uff1a"])),(e()(),As(239,0,null,null,1,"td",[],null,null,null,null,null)),(e()(),Bs(240,null,[""," \u4ef6"])),(e()(),As(241,0,null,null,6,"div",[["class","result-btn-group"]],null,null,null,null,null)),(e()(),As(242,0,null,null,2,"button",[["class","result-btn"],["color","accent"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.showResult()&&i),i},CL,TL)),rr(243,180224,null,0,JM,[Qt,SS,[2,wI]],{color:[0,"color"]},null),(e()(),Bs(-1,0,["\u6258\u76d8\u6446\u653e\u8d27\u7269\u56fe\u793a"])),(e()(),As(245,0,null,null,2,"button",[["class","result-btn"],["color","accent"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Wi(e,8).reset()&&i),i},CL,TL)),rr(246,180224,null,0,JM,[Qt,SS,[2,wI]],{color:[0,"color"]},null),(e()(),Bs(-1,0,["\u6e05\u7a7a\u7ed3\u679c"])),(e()(),Cs(16777216,null,null,1,null,GL)),rr(249,16384,null,0,ma,[An,Tn],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,8,0,"","bottom"),e(t,14,0,n.firstFormGroup,"\u5fc5\u987b\u9009\u62e9\u5c3a\u5bf8"),e(t,19,0,n.firstFormGroup),e(t,41,0,""),e(t,43,0,"firstCtrl"),e(t,46,0,"","",n.containerIndex),e(t,53,0,"1"),e(t,56,0,"2"),e(t,59,0,"3"),e(t,62,0,"4"),e(t,67,0,"primary"),e(t,75,0,n.secondFormGroup,"\u5fc5\u987b\u9009\u62e9\u5c3a\u5bf8"),e(t,80,0,n.secondFormGroup),e(t,102,0,""),e(t,104,0,"secondCtrl"),e(t,107,0,"","",n.trayIndex),e(t,114,0,"1"),e(t,117,0,"2"),e(t,120,0,"3"),e(t,129,0,"primary"),e(t,133,0,n.thridFormGroup,"\u5c3a\u5bf8\u4e0d\u5f97\u5c0f\u4e8e80mm"),e(t,138,0,n.thridFormGroup),e(t,160,0,"thridCtrl1",n.packageLength),e(t,163,0,"\u8bbe\u7f6e\u8d27\u7269\u957f\u5ea6/mm","number"),e(t,180,0,"thridCtrl2",n.packageWidth),e(t,183,0,"\u8bbe\u7f6e\u8d27\u7269\u5bbd\u5ea6/mm","number"),e(t,200,0,"thridCtrl3",n.packageHeight),e(t,203,0,"\u8bbe\u7f6e\u8d27\u7269\u9ad8\u5ea6/mm","number"),e(t,212,0,"primary"),e(t,243,0,"accent"),e(t,246,0,"accent"),e(t,249,0,n.showLayout)},function(e,t){var n=t.component;e(t,7,0,"end"==Wi(t,8).labelPosition,"bottom"==Wi(t,8).labelPosition),e(t,17,0,Wi(t,21).ngClassUntouched,Wi(t,21).ngClassTouched,Wi(t,21).ngClassPristine,Wi(t,21).ngClassDirty,Wi(t,21).ngClassValid,Wi(t,21).ngClassInvalid,Wi(t,21).ngClassPending),e(t,26,1,["standard"==Wi(t,27).appearance,"fill"==Wi(t,27).appearance,"outline"==Wi(t,27).appearance,"legacy"==Wi(t,27).appearance,Wi(t,27)._control.errorState,Wi(t,27)._canLabelFloat,Wi(t,27)._shouldLabelFloat(),Wi(t,27)._hasFloatingLabel(),Wi(t,27)._hideControlPlaceholder(),Wi(t,27)._control.disabled,Wi(t,27)._control.autofilled,Wi(t,27)._control.focused,"accent"==Wi(t,27).color,"warn"==Wi(t,27).color,Wi(t,27)._shouldForward("untouched"),Wi(t,27)._shouldForward("touched"),Wi(t,27)._shouldForward("pristine"),Wi(t,27)._shouldForward("dirty"),Wi(t,27)._shouldForward("valid"),Wi(t,27)._shouldForward("invalid"),Wi(t,27)._shouldForward("pending"),!Wi(t,27)._animationsEnabled]),e(t,40,1,[Wi(t,41).required?"":null,Wi(t,45).ngClassUntouched,Wi(t,45).ngClassTouched,Wi(t,45).ngClassPristine,Wi(t,45).ngClassDirty,Wi(t,45).ngClassValid,Wi(t,45).ngClassInvalid,Wi(t,45).ngClassPending,Wi(t,46).id,Wi(t,46).tabIndex,Wi(t,46)._getAriaLabel(),Wi(t,46)._getAriaLabelledby(),Wi(t,46).required.toString(),Wi(t,46).disabled.toString(),Wi(t,46).errorState,Wi(t,46).panelOpen?Wi(t,46)._optionIds:null,Wi(t,46).multiple,Wi(t,46)._ariaDescribedby||null,Wi(t,46)._getAriaActiveDescendant(),Wi(t,46).disabled,Wi(t,46).errorState,Wi(t,46).required,Wi(t,46).empty]),e(t,52,0,Wi(t,53)._getTabIndex(),Wi(t,53).selected,Wi(t,53).multiple,Wi(t,53).active,Wi(t,53).id,Wi(t,53)._getAriaSelected(),Wi(t,53).disabled.toString(),Wi(t,53).disabled),e(t,55,0,Wi(t,56)._getTabIndex(),Wi(t,56).selected,Wi(t,56).multiple,Wi(t,56).active,Wi(t,56).id,Wi(t,56)._getAriaSelected(),Wi(t,56).disabled.toString(),Wi(t,56).disabled),e(t,58,0,Wi(t,59)._getTabIndex(),Wi(t,59).selected,Wi(t,59).multiple,Wi(t,59).active,Wi(t,59).id,Wi(t,59)._getAriaSelected(),Wi(t,59).disabled.toString(),Wi(t,59).disabled),e(t,61,0,Wi(t,62)._getTabIndex(),Wi(t,62).selected,Wi(t,62).multiple,Wi(t,62).active,Wi(t,62).id,Wi(t,62)._getAriaSelected(),Wi(t,62).disabled.toString(),Wi(t,62).disabled),e(t,65,0,Wi(t,66).type,Wi(t,67).disabled||null,"NoopAnimations"===Wi(t,67)._animationMode),e(t,78,0,Wi(t,82).ngClassUntouched,Wi(t,82).ngClassTouched,Wi(t,82).ngClassPristine,Wi(t,82).ngClassDirty,Wi(t,82).ngClassValid,Wi(t,82).ngClassInvalid,Wi(t,82).ngClassPending),e(t,87,1,["standard"==Wi(t,88).appearance,"fill"==Wi(t,88).appearance,"outline"==Wi(t,88).appearance,"legacy"==Wi(t,88).appearance,Wi(t,88)._control.errorState,Wi(t,88)._canLabelFloat,Wi(t,88)._shouldLabelFloat(),Wi(t,88)._hasFloatingLabel(),Wi(t,88)._hideControlPlaceholder(),Wi(t,88)._control.disabled,Wi(t,88)._control.autofilled,Wi(t,88)._control.focused,"accent"==Wi(t,88).color,"warn"==Wi(t,88).color,Wi(t,88)._shouldForward("untouched"),Wi(t,88)._shouldForward("touched"),Wi(t,88)._shouldForward("pristine"),Wi(t,88)._shouldForward("dirty"),Wi(t,88)._shouldForward("valid"),Wi(t,88)._shouldForward("invalid"),Wi(t,88)._shouldForward("pending"),!Wi(t,88)._animationsEnabled]),e(t,101,1,[Wi(t,102).required?"":null,Wi(t,106).ngClassUntouched,Wi(t,106).ngClassTouched,Wi(t,106).ngClassPristine,Wi(t,106).ngClassDirty,Wi(t,106).ngClassValid,Wi(t,106).ngClassInvalid,Wi(t,106).ngClassPending,Wi(t,107).id,Wi(t,107).tabIndex,Wi(t,107)._getAriaLabel(),Wi(t,107)._getAriaLabelledby(),Wi(t,107).required.toString(),Wi(t,107).disabled.toString(),Wi(t,107).errorState,Wi(t,107).panelOpen?Wi(t,107)._optionIds:null,Wi(t,107).multiple,Wi(t,107)._ariaDescribedby||null,Wi(t,107)._getAriaActiveDescendant(),Wi(t,107).disabled,Wi(t,107).errorState,Wi(t,107).required,Wi(t,107).empty]),e(t,113,0,Wi(t,114)._getTabIndex(),Wi(t,114).selected,Wi(t,114).multiple,Wi(t,114).active,Wi(t,114).id,Wi(t,114)._getAriaSelected(),Wi(t,114).disabled.toString(),Wi(t,114).disabled),e(t,116,0,Wi(t,117)._getTabIndex(),Wi(t,117).selected,Wi(t,117).multiple,Wi(t,117).active,Wi(t,117).id,Wi(t,117)._getAriaSelected(),Wi(t,117).disabled.toString(),Wi(t,117).disabled),e(t,119,0,Wi(t,120)._getTabIndex(),Wi(t,120).selected,Wi(t,120).multiple,Wi(t,120).active,Wi(t,120).id,Wi(t,120)._getAriaSelected(),Wi(t,120).disabled.toString(),Wi(t,120).disabled),e(t,123,0,Wi(t,124).type,Wi(t,125).disabled||null,"NoopAnimations"===Wi(t,125)._animationMode),e(t,127,0,Wi(t,128).type,Wi(t,129).disabled||null,"NoopAnimations"===Wi(t,129)._animationMode),e(t,136,0,Wi(t,140).ngClassUntouched,Wi(t,140).ngClassTouched,Wi(t,140).ngClassPristine,Wi(t,140).ngClassDirty,Wi(t,140).ngClassValid,Wi(t,140).ngClassInvalid,Wi(t,140).ngClassPending),e(t,145,1,["standard"==Wi(t,146).appearance,"fill"==Wi(t,146).appearance,"outline"==Wi(t,146).appearance,"legacy"==Wi(t,146).appearance,Wi(t,146)._control.errorState,Wi(t,146)._canLabelFloat,Wi(t,146)._shouldLabelFloat(),Wi(t,146)._hasFloatingLabel(),Wi(t,146)._hideControlPlaceholder(),Wi(t,146)._control.disabled,Wi(t,146)._control.autofilled,Wi(t,146)._control.focused,"accent"==Wi(t,146).color,"warn"==Wi(t,146).color,Wi(t,146)._shouldForward("untouched"),Wi(t,146)._shouldForward("touched"),Wi(t,146)._shouldForward("pristine"),Wi(t,146)._shouldForward("dirty"),Wi(t,146)._shouldForward("valid"),Wi(t,146)._shouldForward("invalid"),Wi(t,146)._shouldForward("pending"),!Wi(t,146)._animationsEnabled]),e(t,156,1,[Wi(t,162).ngClassUntouched,Wi(t,162).ngClassTouched,Wi(t,162).ngClassPristine,Wi(t,162).ngClassDirty,Wi(t,162).ngClassValid,Wi(t,162).ngClassInvalid,Wi(t,162).ngClassPending,Wi(t,163)._isServer,Wi(t,163).id,Wi(t,163).placeholder,Wi(t,163).disabled,Wi(t,163).required,Wi(t,163).readonly&&!Wi(t,163)._isNativeSelect||null,Wi(t,163)._ariaDescribedby||null,Wi(t,163).errorState,Wi(t,163).required.toString()]),e(t,165,1,["standard"==Wi(t,166).appearance,"fill"==Wi(t,166).appearance,"outline"==Wi(t,166).appearance,"legacy"==Wi(t,166).appearance,Wi(t,166)._control.errorState,Wi(t,166)._canLabelFloat,Wi(t,166)._shouldLabelFloat(),Wi(t,166)._hasFloatingLabel(),Wi(t,166)._hideControlPlaceholder(),Wi(t,166)._control.disabled,Wi(t,166)._control.autofilled,Wi(t,166)._control.focused,"accent"==Wi(t,166).color,"warn"==Wi(t,166).color,Wi(t,166)._shouldForward("untouched"),Wi(t,166)._shouldForward("touched"),Wi(t,166)._shouldForward("pristine"),Wi(t,166)._shouldForward("dirty"),Wi(t,166)._shouldForward("valid"),Wi(t,166)._shouldForward("invalid"),Wi(t,166)._shouldForward("pending"),!Wi(t,166)._animationsEnabled]),e(t,176,1,[Wi(t,182).ngClassUntouched,Wi(t,182).ngClassTouched,Wi(t,182).ngClassPristine,Wi(t,182).ngClassDirty,Wi(t,182).ngClassValid,Wi(t,182).ngClassInvalid,Wi(t,182).ngClassPending,Wi(t,183)._isServer,Wi(t,183).id,Wi(t,183).placeholder,Wi(t,183).disabled,Wi(t,183).required,Wi(t,183).readonly&&!Wi(t,183)._isNativeSelect||null,Wi(t,183)._ariaDescribedby||null,Wi(t,183).errorState,Wi(t,183).required.toString()]),e(t,185,1,["standard"==Wi(t,186).appearance,"fill"==Wi(t,186).appearance,"outline"==Wi(t,186).appearance,"legacy"==Wi(t,186).appearance,Wi(t,186)._control.errorState,Wi(t,186)._canLabelFloat,Wi(t,186)._shouldLabelFloat(),Wi(t,186)._hasFloatingLabel(),Wi(t,186)._hideControlPlaceholder(),Wi(t,186)._control.disabled,Wi(t,186)._control.autofilled,Wi(t,186)._control.focused,"accent"==Wi(t,186).color,"warn"==Wi(t,186).color,Wi(t,186)._shouldForward("untouched"),Wi(t,186)._shouldForward("touched"),Wi(t,186)._shouldForward("pristine"),Wi(t,186)._shouldForward("dirty"),Wi(t,186)._shouldForward("valid"),Wi(t,186)._shouldForward("invalid"),Wi(t,186)._shouldForward("pending"),!Wi(t,186)._animationsEnabled]),e(t,196,1,[Wi(t,202).ngClassUntouched,Wi(t,202).ngClassTouched,Wi(t,202).ngClassPristine,Wi(t,202).ngClassDirty,Wi(t,202).ngClassValid,Wi(t,202).ngClassInvalid,Wi(t,202).ngClassPending,Wi(t,203)._isServer,Wi(t,203).id,Wi(t,203).placeholder,Wi(t,203).disabled,Wi(t,203).required,Wi(t,203).readonly&&!Wi(t,203)._isNativeSelect||null,Wi(t,203)._ariaDescribedby||null,Wi(t,203).errorState,Wi(t,203).required.toString()]),e(t,206,0,Wi(t,207).type,Wi(t,208).disabled||null,"NoopAnimations"===Wi(t,208)._animationMode),e(t,210,0,Wi(t,211).type,Wi(t,212).disabled||null,"NoopAnimations"===Wi(t,212)._animationMode),e(t,228,0,n.NumTray),e(t,234,0,n.NumPackageLevel,n.NumPackagePerLevel,n.NumPackagePerTray),e(t,240,0,n.NumPackage),e(t,242,0,Wi(t,243).disabled||null,"NoopAnimations"===Wi(t,243)._animationMode),e(t,245,0,Wi(t,246).disabled||null,"NoopAnimations"===Wi(t,246)._animationMode)})}function WL(e){return Gs(0,[(e()(),As(0,0,null,null,2,"app-root",[],null,null,null,jL,FL)),rr(1,114688,null,0,SE,[Yc,vE],null,null),sr(256,null,RS,EE,[])],function(e,t){e(t,1,0)},null)}var qL=ki("app-root",SE,WL,{},{},[]);const YL=(()=>(class{}))();var XL=Zo(Ko,[SE],function(e){return function(e){const t={},n=[];let i=!1;for(let r=0;r<e.length;r++){const s=e[r];s.token===Ht&&!0===s.value&&(i=!0),1073741824&s.flags&&n.push(s.token),s.index=r,t[Gn(s.token)]=s}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:i}}([Mi(512,Yt,Xt,[[8,[qL]],[3,Yt],$t]),Mi(5120,xs,Ss,[[3,xs]]),Mi(4608,oa,aa,[xs,[2,sa]]),Mi(5120,br,Ms,[Yr]),Mi(4608,Fr,Fr,[]),Mi(5120,Mr,Tr,[]),Mi(5120,_n,ws,[]),Mi(5120,bn,Es,[]),Mi(4608,Tl,Cl,[Sa]),Mi(6144,Tt,null,[Tl]),Mi(4608,_l,xl,[]),Mi(5120,qa,function(e,t,n,i,r,s,o,a){return[new vl(e,t,n),new Ml(i),new wl(r,s,o,a)]},[Sa,Yr,Ir,Sa,Sa,_l,Lr,[2,bl]]),Mi(4608,Ya,Ya,[qa,Yr]),Mi(135680,$a,$a,[Sa]),Mi(4608,il,il,[Ya,$a,Mr]),Mi(5120,eC,_I,[]),Mi(5120,tA,bI,[]),Mi(4608,FA,yI,[Sa,eC,tA]),Mi(5120,nn,xI,[il,FA,Yr]),Mi(6144,Za,null,[$a]),Mi(4608,es,es,[Yr]),Mi(4608,zS,cI,[nn,Sa]),Mi(5120,KS,JS,[[3,KS]]),Mi(4608,gM,gM,[]),Mi(4608,lc,lc,[]),Mi(4608,Yc,Yc,[]),Mi(4608,JI,JI,[]),Mi(4608,QP,QP,[NP,GP,Yt,KP,UP,Re,Yr,Sa,BM,[2,Qo]]),Mi(5120,tL,rL,[QP]),Mi(5120,aL,lL,[QP]),Mi(1073742336,Ea,Ea,[]),Mi(1024,et,Dl,[]),Mi(1024,Er,function(e){return[(t=e,Ga("probe",Wa),Ga("coreTokens",Object.assign({},ja,(t||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>Wa)];var t},[[2,as]]),Mi(512,Sr,Sr,[[2,Er]]),Mi(131584,ds,ds,[Yr,Lr,Re,et,Yt,Sr]),Mi(1073742336,Ts,Ts,[ds]),Mi(1073742336,Nl,Nl,[[3,Nl]]),Mi(1073742336,EI,EI,[]),Mi(1073742336,HM,HM,[]),Mi(1073742336,cM,cM,[[2,lM],[2,bl]]),Mi(1073742336,XM,XM,[]),Mi(1073742336,sS,sS,[]),Mi(1073742336,MM,MM,[]),Mi(1073742336,QM,QM,[]),Mi(1073742336,FS,FS,[]),Mi(1073742336,LT,LT,[]),Mi(1073742336,sM,sM,[]),Mi(1073742336,qc,qc,[]),Mi(1073742336,Xc,Xc,[]),Mi(1073742336,Zc,Zc,[]),Mi(1073742336,tP,tP,[]),Mi(1073742336,KI,KI,[]),Mi(1073742336,PL,PL,[]),Mi(1073742336,NL,NL,[]),Mi(1073742336,TP,TP,[]),Mi(1073742336,sL,sL,[]),Mi(1073742336,CM,CM,[]),Mi(1073742336,FM,FM,[]),Mi(1073742336,pL,pL,[]),Mi(1073742336,YL,YL,[]),Mi(1073742336,Ko,Ko,[]),Mi(256,Ht,!0,[]),Mi(256,wI,"BrowserAnimations",[]),Mi(256,Vc,"never",[])])});(function(){if(nt)throw new Error("Cannot enable prod mode after platform setup.");tt=!1})(),kl().bootstrapModuleFactory(XL).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);